function getSpinXCustomizedData(t,e,n="value",o){return o||(t?.customized&&null!=t[n]?t[n]:e&&Object.hasOwn(e,n)?e[n]:e)}function getSpinXRewardTypeDefault(t,e){e=e.rewardTypes;let n;return e&&("none"===t.type?n=e.none:"discount_code"===t.type?n=e.discountCode:"free_shipping"===t.type?n=e.freeShipping:"free_gift"===t.type&&(n=e.freeGift)),n}function validateSpinXRewardEffectMusic(t,e){return!("none"===t&&!["not_winning_default","not_winning_laughing","not_winning_scene_transitions"].includes(e)||"none"!==t&&!["winning_default","winning_victory","winning_introduction","winning_clapping","winning_firework"].includes(e))}function getSpinXRewardEffectMusic(t,e){if(!t.config?.effectMusic?.value||!validateSpinXRewardEffectMusic(t.type,t.config.effectMusic.value)){e=getSpinXRewardTypeDefault(t,e);if(e?.effectMusic)return{...t.config?.effectMusic||{},value:e.effectMusic}}return t.config?.effectMusic}function getSpinXCustomizedRewardMessage(t,e,n,o){var e=e.config?.popup||{},i=n?.popup,n=getSpinXRewardTypeDefault(t,n);return{title:{text:getSpinXCustomizedData(t.config?.message?.title,n?.message?.title,"text",o?.messageTitle),size:Number(getSpinXCustomizedData(t.config?.message?.title,getSpinXCustomizedData(e.title,i?.title,"size"),"size")),color:getSpinXCustomizedData(t.config?.message?.title,getSpinXCustomizedData(e.title,i?.title,"color"),"color")},content:{text:getSpinXCustomizedData(t.config?.message?.content,n?.message?.content,"text",o?.messageContent),size:Number(getSpinXCustomizedData(t.config?.message?.content,getSpinXCustomizedData(e.content,i?.content,"size"),"size")),color:getSpinXCustomizedData(t.config?.message?.content,getSpinXCustomizedData(e.content,i?.content,"color"),"color")}}}function getSpinXCurrentLocale(t){var e=window.SpinX.locale;return e&&t.config?.langs&&Object.hasOwn(t.config.langs,e)?t.config.langs[e]:null}function getSpinXThemeDataUrl(t){return window.SpinX.widgetPath+`/assets/themes/${t}.json`}function getSpinXThemeThumbnailUrl(t){return window.SpinX.widgetPath+`/assets/images/themes/${t}.png`}function getSpinXOpenerIconUrl(t){return window.SpinX.widgetPath+`/assets/images/openers/${t}.svg`}function getSpinXSoundUrl(t){return window.SpinX.widgetPath+`/assets/sounds/${t}.mp3`}function initSpinXWheel(t,e,n){var o=document.createElement("spinx-wheel");return o.dataset.json=JSON.stringify(t),"function"==typeof e&&o.addEventListener("onSpinXStartSpin",e),"function"==typeof n&&o.addEventListener("onSpinXEndSpin",n),o}function initSpinXForm(t,e){var n=document.createElement("spinx-form");return n.dataset.json=JSON.stringify(t),"function"==typeof e&&n.addEventListener("onSpinXSpin",e),n}function initSpinXPopup(t,e,n){let o=document.createElement("spinx-popup");return o.dataset.json=JSON.stringify(t),"function"==typeof e&&o.addEventListener("onSpinXLoadedPopup",()=>e(o)),"function"==typeof n&&o.addEventListener("onSpinXOpenedPopup",()=>n(o)),document.body.append(o),o}function removeSpinXPopup(){document.querySelector("spinx-popup")?.remove()}function initSpinXOpener(t,e,n){let o=document.createElement("spinx-opener");return o.dataset.json=JSON.stringify(t),"function"==typeof e&&o.addEventListener("onSpinXLoadedOpener",()=>e(o)),"function"==typeof n&&o.addEventListener("onSpinXClickOpener",n),document.body.append(o),o}function removeSpinXOpener(){document.querySelector("spinx-opener")?.remove()}function initSpinXWelcomePopup(t,e,n){let o=document.createElement("spinx-welcome-popup");return o.dataset.json=JSON.stringify(t),"function"==typeof e&&o.addEventListener("onSpinXLoadedWelcomePopup",()=>e(o)),"function"==typeof n&&o.addEventListener("onSpinXClickWelcomePopup",n),document.body.append(o),o}function removeSpinXWelcomePopup(){document.querySelector("spinx-welcome-popup")?.remove()}function initSpinXIntentPopup(t,e,n){let o=document.createElement("spinx-intent-popup");return o.dataset.json=JSON.stringify(t),"function"==typeof e&&o.addEventListener("onSpinXLoadedIntentPopup",()=>e(o)),"function"==typeof n&&o.addEventListener("onSpinXClickIntentPopup",n),document.body.append(o),o}function removeSpinXIntentPopup(){document.querySelector("spinx-intent-popup")?.remove()}function initSpinXAnnouncement(t,e,n){let o=document.createElement("spinx-announcement");return o.dataset.json=JSON.stringify(t),"top"===t.position?document.body.insertBefore(o,document.body.firstChild):document.body.append(o),"function"==typeof e&&o.addEventListener("onSpinXLoadedAnnouncement",()=>e(o)),"function"==typeof n&&o.addEventListener("onSpinXVisibleAnnouncementChanged",n),o}function removeSpinXAnnouncement(){document.querySelector("spinx-announcement")?.remove()}function getSpinXTriggerKey(t){return window.SpinX.disableAutoTriggerPopupKey+`_${t}_`+(window.SpinX.participant?.id||"anonymous")}function getSpinXViewTrackingKey(t){return"spinx_view_"+t}function checkSpinXAppHidden(t){let e=window.location.pathname;return t.some(t=>e.startsWith(t))}function checkSpinXOpenerEnable(t){return!!t?.config?.triggers?.opener?.enabled}function checkSpinXWelcomePopupEnable(t){return!!t?.config?.triggers?.delayedDisplay?.enabled}function checkSpinXIntentPopupEnable(t){return!!t?.config?.triggers?.exitIntent?.enabled}function checkSpinXAnnouncementBarEnable(t){return!!t?.config?.announcement?.upcomingEvent?.enabled||!!t?.config?.announcement?.readyToSpin?.enabled}function fadeInSpinXAudio(e,n=500){e.currentTime=0,e.volume=0,e.play();let o=performance.now(),i=t=>{t=Math.min(1,(t-o)/n);e.volume=Math.min(1,Math.max(0,t)),t<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}function fadeOutSpinXAudio(e,n=500){let o=e.volume,i=performance.now(),a=t=>{t=Math.min(1,(t-i)/n);e.volume=Math.min(1,Math.max(0,o*(1-t))),t<1?requestAnimationFrame(a):(e.pause(),e.currentTime=0)};requestAnimationFrame(a)}function readSpinXJson(t){return fetch(t).then(t=>{if(t.ok)return t.json();throw new Error("HTTP error "+t.status)}).catch(function(){this.dataError=!0})}function getSpinXParticipantName(t){var e=(`${t.firstName||""} `+(t.lastName||"")).trim();return e||t.email}function convertSpinXCurrency(t,e="USD",n){return t.toLocaleString(n?.locales,{style:"currency",currency:e,currencyDisplay:n?.currencyDisplay})}function formatSpinXDateTime(t){return"[object Date]"!==Object.prototype.toString.call(t)?"NaD":dayjs(t).format("DD/MM/YYYY HH:mm")}function lessThanSpinXHours(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/36e5<n}function lessThanSpinXDays(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/864e5<n}function convertSpinXCountDownTime(t){var e=t%3600;return Math.floor(t/3600)+`:${Math.floor(e/60)}:`+Math.floor(e%60)}function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function loadGoogleFont(t){if(["Arial","Times New Roman","Courier New","Verdana","Tahoma"].includes(t))return Promise.resolve();let o=`https://fonts.googleapis.com/css2?family=${t.replace(" ","+")}:wght@400;700&display=swap`;return Array.from(document.head.getElementsByTagName("link")).find(t=>t.href===o)?document.fonts.ready:new Promise((t,e)=>{var n=document.createElement("link");n.href=o,n.rel="stylesheet",n.onload=()=>{document.fonts.ready.then(t).catch(e)},n.onerror=e,document.head.appendChild(n)})}function combineSpinXWheelData(a,s){var t=a.config?.wheel||{};let r=getSpinXCurrentLocale(a),d=s.wheel,p=(t,e)=>e<t?e:p(t,e-t);return{fontFamily:getSpinXCustomizedData(t.fontFamily,d?.fontFamily),contentSize:Number(getSpinXCustomizedData(t.contentSize,d?.contentSize)),borderAround:{type:getSpinXCustomizedData(t.borderAround,d?.borderAround,"type"),color:getSpinXCustomizedData(t.borderAround,d?.borderAround,"color")},rewardBorder:{displayed:getSpinXCustomizedData(t.rewardBorder,d?.rewardBorder,"displayed"),color:getSpinXCustomizedData(t.rewardBorder,d?.rewardBorder,"color")},circleCenter:{displayed:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"displayed"),borderType:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"borderType"),borderColor:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"borderColor"),backgroundColor:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"backgroundColor"),icon:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"icon")},sticker:{borderType:getSpinXCustomizedData(t.sticker,d?.sticker,"borderType"),borderColor:getSpinXCustomizedData(t.sticker,d?.sticker,"borderColor"),backgroundColor:getSpinXCustomizedData(t.sticker,d?.sticker,"backgroundColor")},playingMusic:t.playingMusic,rewards:a.rewards?.map((t,e)=>{let n=t;var t=n.config||{},e=d.rewards?.length?d.rewards[p(d.rewards.length,e)]:null,o=r?.rewards?.find(t=>t.id===n.id),i=o?.name||n.name;return t.discountCode?.amount&&"number"!=typeof t.discountCode.amount&&(t.discountCode.amount=Number(t.discountCode.amount)),t.discountCode?.percentage&&"number"!=typeof t.discountCode.percentage&&(t.discountCode.percentage=Number(t.discountCode.percentage)),t.discountCode?.startTime?.date&&"string"==typeof t.discountCode.startTime.date&&(t.discountCode.startTime.date=new Date(t.discountCode.startTime.date)),t.discountCode?.endTime?.date&&"string"==typeof t.discountCode.endTime.date&&(t.discountCode.endTime.date=new Date(t.discountCode.endTime.date)),t.freeShipping?.shippingRates?.amount&&"number"!=typeof t.freeShipping.shippingRates.amount&&(t.freeShipping.shippingRates.amount=Number(t.freeShipping.shippingRates.amount)),t.freeShipping?.startTime?.date&&"string"==typeof t.freeShipping.startTime.date&&(t.freeShipping.startTime.date=new Date(t.freeShipping.startTime.date)),t.freeShipping?.endTime?.date&&"string"==typeof t.freeShipping.endTime.date&&(t.freeShipping.endTime.date=new Date(t.freeShipping.endTime.date)),t.freeGift?.quantity?.amount&&"number"!=typeof t.freeGift.quantity.amount&&(t.freeGift.quantity.amount=Number(t.freeGift.quantity.amount)),t.freeGift?.startTime?.date&&"string"==typeof t.freeGift.startTime.date&&(t.freeGift.startTime.date=new Date(t.freeGift.startTime.date)),t.freeGift?.endTime?.date&&"string"==typeof t.freeGift.endTime.date&&(t.freeGift.endTime.date=new Date(t.freeGift.endTime.date)),{id:n.id,name:i,type:n.type,status:n.status,order:n.order,config:{discountCode:t.discountCode,freeShipping:t.freeShipping,contentColor:getSpinXCustomizedData(t.contentColor,e?.contentColor),backgroundColor:getSpinXCustomizedData(t.backgroundColor,e?.backgroundColor),effectMusic:getSpinXRewardEffectMusic(n,s),message:getSpinXCustomizedRewardMessage(n,a,s,o)}}})}}function combineSpinXPopupData(t,e){var n=t.config?.popup||{};let o=getSpinXCurrentLocale(t);t=e?.popup;return{contentColor:n?.content?.color,displayType:n.displayType,showLogo:n.showLogo,background:{backgroundColor:getSpinXCustomizedData(n.background,t?.background,"backgroundColor"),backgroundImage:n.background?.customized&&n.background.backgroundImage?.url?n.background.backgroundImage.url:t?.background?.backgroundImage,mobileBackgroundImage:n.background?.customized&&n.background.mobileBackgroundImage?.url?n.background.mobileBackgroundImage.url:t?.background?.mobileBackgroundImage},backgroundMusic:n.backgroundMusic,fontFamily:getSpinXCustomizedData(n.fontFamily,t?.fontFamily),title:{text:getSpinXCustomizedData(n.title,t?.title,"text",o?.popup?.title),size:Number(getSpinXCustomizedData(n.title,t?.title,"size")),color:getSpinXCustomizedData(n.title,t?.title,"color")},content:{text:getSpinXCustomizedData(n.content,t?.content,"text",o?.popup?.content),size:Number(getSpinXCustomizedData(n.content,t?.content,"size")),color:getSpinXCustomizedData(n.content,t?.content,"color")},contentForExistingAccount:{text:getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"text",o?.popup?.contentForExistingAccount),size:Number(getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"size")),color:getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"color")},fields:(n.fields||t?.fields)?.map(e=>{let n=o?.popup?.fields?.find(t=>t.name===e.name);return n?.label&&(e.label=n.label),e.messages||(e.messages={}),Object.keys(n?.messages||{}).forEach(t=>{e.messages[t]=n.messages[t]}),e}),agreement:o?.popup?.agreement||t?.agreement,spinButton:{text:getSpinXCustomizedData(n.spinButton,t?.spinButton,"text",o?.popup?.spinButton),size:Number(getSpinXCustomizedData(n.spinButton,t?.spinButton,"size")),color:getSpinXCustomizedData(n.spinButton,t?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(n.spinButton,t?.spinButton,"backgroundColor")},footerContent:{text:getSpinXCustomizedData(n.footerContent,t?.footerContent,"text",o?.popup?.footerContent),size:Number(getSpinXCustomizedData(n.footerContent,t?.footerContent,"size")),color:getSpinXCustomizedData(n.footerContent,t?.footerContent,"color")},styleContent:getSpinXCustomizedData(n.styleContent,"")}}function combineSpinXOpenerData(t,e){var n=t.config||{},t=getSpinXCurrentLocale(t),n=n.triggers.opener,e=e?.triggers?.opener||{};return{content:getSpinXCustomizedData(n.content,e?.content,"value",t?.triggers?.opener?.content),position:n.position,distance:{left:Number(getSpinXCustomizedData(n.distance?.left,e?.distance?.left)),right:Number(getSpinXCustomizedData(n.distance?.right,e?.distance?.right)),bottom:Number(getSpinXCustomizedData(n.distance?.bottom,e?.distance?.bottom)),bottomFromAnnouncement:Number(getSpinXCustomizedData(n.distance?.bottomFromAnnouncement,e?.distance?.bottomFromAnnouncement))},contentColor:getSpinXCustomizedData(n.contentColor,e?.contentColor),backgroundColor:getSpinXCustomizedData(n.backgroundColor,e?.backgroundColor),iconUrl:getSpinXOpenerIconUrl(n.icon||e?.icon),attentionEffect:{enabled:n.attentionEffect?.enabled,intervalTime:Number(n.attentionEffect?.intervalTime)}}}function combineDelayedDisplayData(t,e){var n=getSpinXCurrentLocale(t),t=t.config?.triggers?.delayedDisplay||{},e=e?.triggers?.delayedDisplay;return{delay:getSpinXCustomizedData(t.delay,e?.delay),background:{backgroundColor:getSpinXCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:t.background?.customized&&t.background.backgroundImage?.url?t.background.backgroundImage.url:e?.background?.backgroundImage,mobileBackgroundImage:t.background?.customized&&t.background.mobileBackgroundImage?.url?t.background.mobileBackgroundImage.url:e?.background?.mobileBackgroundImage},fontFamily:getSpinXCustomizedData(t.fontFamily,e?.fontFamily),title:{text:getSpinXCustomizedData(t.title,e?.title,"text",n?.triggers?.delayedDisplay?.title),size:Number(getSpinXCustomizedData(t.title,e?.title,"size")),color:getSpinXCustomizedData(t.title,e?.title,"color")},content:{text:getSpinXCustomizedData(t.content,e?.content,"text",n?.triggers?.delayedDisplay?.content),size:Number(getSpinXCustomizedData(t.content,e?.content,"size")),color:getSpinXCustomizedData(t.content,e?.content,"color")},contentBottom:{text:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.delayedDisplay?.contentBottom),size:Number(getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.delayedDisplay?.spinButton),size:Number(getSpinXCustomizedData(t.spinButton,e?.spinButton,"size")),color:getSpinXCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(t.spinButton,e?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.delayedDisplay?.cancelButton),size:Number(getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor")}}}function combineExitIntentData(t,e){var n=getSpinXCurrentLocale(t),t=t.config?.triggers?.exitIntent||{},e=e?.triggers?.exitIntent;return{desktop:t.desktop,mobile:t.mobile,background:{backgroundColor:getSpinXCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:t.background?.customized&&t.background.backgroundImage?.url?t.background.backgroundImage.url:e?.background?.backgroundImage,mobileBackgroundImage:t.background?.customized&&t.background.mobileBackgroundImage?.url?t.background.mobileBackgroundImage.url:e?.background?.mobileBackgroundImage},fontFamily:getSpinXCustomizedData(t.fontFamily,e?.fontFamily),title:{text:getSpinXCustomizedData(t.title,e?.title,"text",n?.triggers?.exitIntent?.title),size:Number(getSpinXCustomizedData(t.title,e?.title,"size")),color:getSpinXCustomizedData(t.title,e?.title,"color")},content:{text:getSpinXCustomizedData(t.content,e?.content,"text",n?.triggers?.exitIntent?.content),size:Number(getSpinXCustomizedData(t.content,e?.content,"size")),color:getSpinXCustomizedData(t.content,e?.content,"color")},contentBottom:{text:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.exitIntent?.contentBottom),size:Number(getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.exitIntent?.spinButton),size:Number(getSpinXCustomizedData(t.spinButton,e?.spinButton,"size")),color:getSpinXCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(t.spinButton,e?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.exitIntent?.cancelButton),size:Number(getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor")}}}function combineSpinXAnnouncementData(t,e){var n=t.config||{},o=getSpinXCurrentLocale(t),i=n.announcement,a=e?.announcement||{},s={...i.upcomingEvent||{},content:getSpinXCustomizedData(i.upcomingEvent?.content,a?.upcomingEvent?.content,"value",o?.announcement?.upcomingEvent?.content)},r={...i.readyToSpin||{},content:getSpinXCustomizedData(i.readyToSpin?.content,a?.readyToSpin?.content,"value",o?.announcement?.readyToSpin?.content)},d={...i.countDownToLaunch||{},content:getSpinXCustomizedData(i.countDownToLaunch?.content,a?.countDownToLaunch?.content,"value",o?.announcement?.countDownToLaunch?.content)},o={...i.countDownToClose||{},content:getSpinXCustomizedData(i.countDownToClose?.content,a?.countDownToClose?.content,"value",o?.announcement?.countDownToClose?.content)};return s.displayDays&&"number"!=typeof s.displayDays&&(s.displayDays=Number(s.displayDays)),d.displayHours&&"number"!=typeof d.displayHours&&(d.displayHours=Number(d.displayHours)),o.displayHours&&"number"!=typeof o.displayHours&&(o.displayHours=Number(o.displayHours)),{status:t.status,spinState:{state:"scheduled"===t.status?"upcoming_event":"",productCode:""},scheduledAt:t.scheduledAt&&"string"==typeof t.scheduledAt?new Date(t.scheduledAt):t.scheduledAt,launchedAt:t.launchedAt&&"string"==typeof t.launchedAt?new Date(t.launchedAt):t.launchedAt,closedAt:t.closedAt&&"string"==typeof t.closedAt?new Date(t.closedAt):t.closedAt,position:i.position,displayType:i.displayType,fontFamily:getSpinXCustomizedData(i.fontFamily,a?.fontFamily),contentSize:Number(getSpinXCustomizedData(i.contentSize,a?.contentSize)),contentColor:getSpinXCustomizedData(i.contentColor,a?.contentColor),backgroundColor:getSpinXCustomizedData(i.backgroundColor,a?.backgroundColor),iconUrl:getSpinXOpenerIconUrl(n.triggers?.opener?.icon||e?.opener?.icon),upcomingEvent:s,readyToSpin:r,countDownToLaunch:d,countDownToClose:o}}window.SpinX=window.SpinX||{locale:null,store:null,campaign:null,participant:null,opener:null,wheel:null,popup:null,announcement:null,components:{opener:null,wheel:null,popup:null,form:null,welcomePopup:null,intentPopup:null,announcement:null}},window.SpinX.version="dev-build-176",window.SpinX.isDevelopment=!1,window.SpinX.widgetPath="https://cdn.jsdelivr.net/gh/eplugin-io/spinx"+(window.SpinX.version?"@"+window.SpinX.version:""),window.SpinX.disableAutoTriggerPopupKey="spinx-disabled-auto-trigger-popup",console.log("window.SpinX config",window.SpinX);class SpinXAnnouncement extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"}),this.countDownId="spinx-count-down",this.messageItemClass="announcement-item",this.debounceResize=this.debounce(this.handleResize.bind(this),200)}connectedCallback(){this.reset(),window.addEventListener("resize",this.debounceResize)}handleResize(){this.resetContainerHeight()}debounce(e,n){let o;return function(...t){clearTimeout(o),o=setTimeout(()=>{e.apply(this,t)},n)}}render(){this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.data.scheduledAt&&"string"==typeof this.data.scheduledAt&&(this.data.scheduledAt=new Date(this.data.scheduledAt)),this.data.launchedAt&&"string"==typeof this.data.launchedAt&&(this.data.launchedAt=new Date(this.data.launchedAt)),this.data.closedAt&&"string"==typeof this.data.closedAt&&(this.data.closedAt=new Date(this.data.closedAt));var t=[];if("upcoming_event"===this.data.spinState?.state)if(this.data.countDownToLaunch?.enabled&&this.data.countDownToLaunch.content&&this.data.countDownToLaunch.displayHours&&lessThanSpinXHours(this.data.launchedAt,new Date,this.data.countDownToLaunch.displayHours)){let e=()=>(this.data.launchedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=convertSpinXCountDownTime(e()))},1e3),t.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToLaunch.content.replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(e())}</span>`)}</p>`)}else this.data.upcomingEvent?.enabled&&this.data.upcomingEvent.content&&this.data.upcomingEvent.displayDays&&lessThanSpinXDays(this.data.launchedAt,new Date,this.data.upcomingEvent.displayDays)&&t.push(`<p class="${this.messageItemClass}">${this.data.upcomingEvent.content.replace(/{{TIME}}/g,formatSpinXDateTime(this.data.launchedAt))}</p>`);else if(["ready_to_spin","use_winning_rewards"].includes(this.data.spinState?.state)){var n=`<img class="spinx-icon-announcement" src="${this.data.iconUrl}" />`;if(this.data.countDownToClose?.enabled&&this.data.countDownToClose.content&&this.data.countDownToClose.displayHours&&lessThanSpinXHours(this.data.closedAt,new Date,this.data.countDownToClose.displayHours)){let e=()=>(this.data.closedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=convertSpinXCountDownTime(e()))},1e3),t.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToClose.content.replace(/{{OPENER}}/g,n).replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(e())}</span>`)}</p>`)}else"ready_to_spin"===this.data.spinState?.state&&this.data.readyToSpin?.enabled&&this.data.readyToSpin.content&&t.push(`<p class="${this.messageItemClass}">${this.data.readyToSpin.content.replace(/{{OPENER}}/g,n)}</p>`)}let e="",o=(t.forEach(t=>{e+=t}),"");t.forEach((t,e)=>{o+=`.spinx-announcement-container .${this.messageItemClass}:nth-child(${e+1}) { animation-delay: ${3*e}s; } `}),this.shadowRoot.innerHTML=`
      <style>
        .spinx-announcement-container {
          opacity: 0;
          transition: opacity 0.5s linear;
          background-color: ${this.data.backgroundColor||"#fdc73b"};
          color: ${this.data.contentColor||"#121212"};
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: 16px;
          letter-spacing: 0.06rem;
          line-height: 1.2em;
          text-align: center;
          width: 100%;
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: fixed;
          z-index: 1000;
          ${"top"===this.data.position?"top: 0;":"bottom: 0;"}
        }

        .spinx-announcement-container .${this.messageItemClass} {
          margin: auto;
          padding-top: 2px;
          padding-bottom: 8px;
          position: absolute;
          width: 80%;
          font-weight: 400;
          font-size: ${(this.data.contentSize||16)/this.rootSize}em;
          ${1<t.length?`opacity: 0; animation: slideUp ${3*t.length}s infinite;`:"opacity: 1; transform: translateY(0%);"}
        }

        .spinx-icon-announcement {
          width: 22px;
          height: 22px;
          position: relative;
          top: 5px;
        }

        .close-button {
          color: ${this.data.contentColor||"#121212"};
          position: absolute;
          right: 0px;
          padding: 3px 12px;
          font-size: 22px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        @keyframes slideUp {
          0% {
            transform: translateY(100%);
            opacity: 0;
          }
          10% {
            transform: translateY(0%);
            opacity: 1;
          }
          45% {
            transform: translateY(0%);
            opacity: 1;
          }
          55% {
            transform: translateY(-100%);
            opacity: 0;
          }
          100% {
            transform: translateY(-100%);
            opacity: 0;
          }
        }

        ${o}
      </style>

      <div class="spinx-announcement-container" style="display: none">
        ${e}
        <button class="close-button">&times;</button>
      </div>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.announcementContainer=this.shadowRoot.querySelector(".spinx-announcement-container"),setTimeout(()=>{this.announcementContainer.style.opacity=1},10),this.resetContainerHeight(),"true"===sessionStorage.getItem("hide_announcement_"+this.data.spinState?.state)?this.hide():this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedAnnouncement",{bubbles:!0,composed:!0}))},10)}show(){this.announcementContainer.style.display="flex",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))},10)}hide(){this.announcementContainer.style.display="none",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!1}))},10)}reset(){this.updateSpinState(),this.render()}resetContainerHeight(){setTimeout(()=>{var t=this.shadowRoot.querySelectorAll("."+this.messageItemClass);let e=0;t.forEach(t=>{t.offsetHeight>e&&(e=t.offsetHeight)}),this.announcementContainer.style.height=e+"px",this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))},0)}getContainerHeight(){return this.announcementContainer?.clientHeight||0}updateSpinState(){window.SpinX.announcement.spinState={state:"scheduled"===window.SpinX.campaign.status?"upcoming_event":"ready_to_spin",productCode:""},this.dataset.json=JSON.stringify(window.SpinX.announcement)}close(){this.hide(),sessionStorage.setItem("hide_announcement_"+this.data.spinState?.state,"true")}}customElements.define("spinx-announcement",SpinXAnnouncement);class SpinXOpener extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);let t=this.data?.backgroundColor?this.data.backgroundColor:"#1D305D";var e=this.data?.contentColor?this.data.contentColor:"#fff";this.shadowRoot.innerHTML=`
      <style>
        @keyframes rotateIn {
          0% {
            transform: rotate(0deg);
          }
          100% {
            opacity: 1;
            transform: rotate(2880deg);
          }
        }

        @keyframes borderDisplay {
          0% {
            border-color: transparent;
            // box-shadow: 0px transparent;
          }
          100% {
            border-color: ${t};
            // box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
          }
        }

        @keyframes contentDisplay {
          0% {
            transform: scaleX(0);
          }
          100% {
            transform: scaleX(1);
          }
        }

        .opener-button-container {
          position: ${"preview-in-box"===this.data?.viewMode?"absolute":"fixed"};
          ${"preview-in-box"===this.data?.viewMode?"":"z-index: 1001;"}
          ${"preview-in-box"===this.data?.viewMode?"":`bottom: ${this.data.distance?.bottom?this.data.distance?.bottom+"px":"24px"};`}
          ${"left"===this.data?.position?"preview-in-box"===this.data?.viewMode?"":`left: ${this.data.distance?.left?this.data.distance.left+"px":"20px"};`:`right: ${this.data.distance?.right?this.data.distance.right+"px":"20px"};`}
          font-family: Arial, sans-serif;
        }

        .opener-button-container[data-direction="right"] .opener-text {
          right: 70%;
        }

        .opener-button-container[data-direction="left"] .opener-text {
          left: 70%;
        }

        .opener-button {
          width: 54px;
          height: 54px;
          position: relative;
          z-index: 1003;
          border-radius: 50%;
          overflow: hidden;
          border: 3px solid transparent;
          background-color: #fff;
          cursor: pointer;
          // box-shadow: 0px 4px 8px transparent;
          transition: transform 0.1s ease, box-shadow 0.2s ease-out, border-color 1s ease-out;
          animation: rotateIn 1.2s forwards ease, borderDisplay 0.5s forwards ease-out 0.4s;
          opacity: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0;
        }

        .opener-button img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .opener-button:hover {
          box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.4) !important;
          transform: scale(1.05) !important;
        }

        .opener-button:active {
          transform: scale(0.95) !important;
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .opener-text {
          position: absolute;
          z-index: 1002;
          bottom: 4px;
          ${"left"===this.data?.position?"border-radius: 0px 8px 8px 0px;":"border-radius: 8px 0px 0px 8px;"}
          line-height: 1;
          padding: 8px 0px;
          font-size: 16px;
          font-weight: 600;
          line-height: 1.9;
          letter-spacing: 0.06rem;
          text-transform: uppercase;
          color: ${e};
          background-color: ${t};
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
          white-space: nowrap;
          // opacity: 0;
          width: auto;
          transform: scaleX(0);
          transform-origin: ${this.data?.position};
          transition: 0.3s all ease;
          pointer-events: none;
        }

        .opener-text span {
            ${"left"===this.data?.position?"padding: 0px 20px 0px 24px;":"padding: 0px 24px 0px 20px;"}
        }

        @media only screen and (max-width: 600px) {
          .opener-text {
            display: none !important;
            animation: none;
          }
        }
      </style>

      <div class="opener-button-container" id="opener-button-container" data-direction="${this.data?.position}" style="display: none;">
        <div class="opener-text" id="opener-text"><span>${this.data?.content?this.data.content:"Spin Now"}</span></div>
        <button class="opener-button" id="opener-button">
          <img src="${this.data?.iconUrl}" alt="${this.data?.content?this.data.content:"Spin Now"}" />
        </button>
      </div>
    `,this.openerContainer=this.shadowRoot.getElementById("opener-button-container"),this.openerButton=this.shadowRoot.getElementById("opener-button"),this.openerText=this.shadowRoot.getElementById("opener-text"),this.data?.attentionEffect.enabled?(this.openerButton.style.animation="rotateIn 2s forwards ease, borderDisplay 0.5s forwards ease-out 0.8s",this.openerText.style.animation="contentDisplay 0.8s forwards ease-out 1.2s",setInterval(()=>{this.openerButton.style.animation="none",this.openerButton.style.opacity=1,this.openerButton.style.borderColor=t,setTimeout(()=>this.openerButton.style.animation="rotateIn 2s forwards ease",100)},1e3*(this.data?.attentionEffect.intervalTime||10))):(this.openerButton.style.opacity=1,this.openerButton.style.borderColor=t,this.openerText.style.transform="scaleX(1)"),this.openerButton.addEventListener("click",()=>this.click()),this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedOpener",{bubbles:!0,composed:!0}))},10)}show(){this.openerContainer.style.display="block"}hide(){this.openerContainer.style.display="none"}click(){this.dispatchEvent(new CustomEvent("onSpinXClickOpener",{bubbles:!0,composed:!0}))}enableOpenerButton(t){this.openerButton.disabled=!t}resetBottomDistance(t){"preview-in-box"!==this.data?.viewMode&&(this.openerContainer.style.bottom=t?t+(this.data.distance?.bottomFromAnnouncement||10)+"px":`${this.data.distance?.bottom||24}px`)}}customElements.define("spinx-opener",SpinXOpener);class SpinXWelcomePopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 40px;
          max-width: 600px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          min-height: 300px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          max-height: 85vh;
          overflow-y: auto;
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;      
          background-position: center;
          background-repeat: no-repeat;
        }

         @media (max-width: 767px) {
          .modal {
            max-width: 600px;
            padding: 10px;
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||""});
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .modal {
            overflow-y: auto;
            max-height: 80vh;
          }
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||28)/this.rootSize}em;
          font-weight: 600;
          margin-top: 12px;
          text-align: center;
        }

        .modal-body {
          margin: 16px 0;
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||18)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||18)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
          padding: 10px;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin: 26px 0 12px 0;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||14)/this.rootSize}em;
          border: 1px solid #ccc;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||14)/this.rootSize}em;
          border: none;
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickWelcomePopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWelcomePopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=getSpinXTriggerKey(t);localStorage.getItem(e)||(t=this.data.delay||10,setTimeout(()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))},1e3*t))}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-welcome-popup",SpinXWelcomePopup);class SpinXIntentPopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 40px;
          max-width: 600px;
          max-height: 85vh;
          overflow-y: auto;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          min-height: 300px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;      
          background-position: center;
          background-repeat: no-repeat;
        }

        @media (max-width: 767px) {
          .modal {
            max-width: 600px;
            padding: 10px;
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||""});
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .modal {
            overflow-y: auto;
            max-height: 80vh;
          }
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||24)/this.rootSize}em;
          font-weight: 600;
          margin-top: 12px;
          text-align: center;
        }

        .modal-body {
          margin: 16px 0;
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||16)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||16)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
          padding: 10px;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin: 26px 0 12px 0;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||16)/this.rootSize}em;
          border: 1px solid #ccc;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||16)/this.rootSize}em;
          border: none;
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickIntentPopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedIntentPopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=getSpinXTriggerKey(t),n=()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))};setTimeout(()=>{var t=localStorage.getItem(e);if(!t&&(this.data.desktop&&768<window.innerWidth&&document.addEventListener("mouseout",function(t){!t.toElement&&!t.relatedTarget&&t.clientY<=10&&n()}),this.data.mobile)&&window.innerWidth<=768){window.addEventListener("popstate",function(t){n(),history.pushState(null,null,location.href)});let e=0;window.addEventListener("scroll",()=>{var t=window.pageYOffset;200<e&&t<30&&n(),e=t}),window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&n()})}},3e3)}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-intent-popup",SpinXIntentPopup);class SpinXPopup extends HTMLElement{data;audio;enabledAudio=!1;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render(),window.addEventListener("resize",this.updateElementSize.bind(this)),this.enabledAudio=window.SpinX?.widgetPath&&this.data?.backgroundMusic?.enabled&&this.data?.backgroundMusic?.value,this.enabledAudio&&(this.audio=new Audio(getSpinXSoundUrl(this.data.backgroundMusic.value)),this.audio.loop=!0,this.audio.volume=0)}render(){this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: #fff;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
          overflow-y: auto;
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1004;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        .popup-overlay.fullscreen.active {
          transform: translateX(0);
        }

        // .popup-overlay.fullscreen .spin-column {
        //   padding: 120px;
        // }

        .close-button {
          color: ${this.data.content?.color||"#000000"};
          position: absolute;
          top: 10px;
          right: 10px;
          padding: 5px 15px;
          font-size: 32px;
          font-weight: bold;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        .popup-content {
          width: 100%;
          height: 100%;
          border-radius: 8px;
          display: grid;
          align-items: center;
          position: relative;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
        }

        .popup-body {
          width: 100%;
          height: 100%;
          align-items: center;
          justify-content: center;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
        }

        .spin-column {
          padding: 0px;
          width: 100%;
          margin: auto;
        }

        .info-column {
          width: 90%;
          flex: 1;
          margin: auto;
        }

        .close-button-landscape {
          display: none;
          z-index: 10000;
          font-size: 30px;
          right: 2px;
          top: 0;
        }

        @media (orientation: portrait) {
          .popup-overlay.active {
            transform: translateX(0);
          }

          .popup-content {
            ${this.data.background?.mobileBackgroundImage?`background-image: url(${this.data.background.mobileBackgroundImage});`:""}
          }

          .spin-column {
            width: 90%;
          }

          .info-column {
            padding: 10px 10px;
          }
        }

        // @media (max-width: 1366px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 6em;
        //     // padding-bottom: 1.5em;
        //   }
        // }

        @media (max-width: 1024px) and (orientation: portrait) {
          .spin-column {
            padding-top: 5em;
          }
        }

        // @media (max-width: 912px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 4.8em;
        //     // padding-bottom: 1em;
        //   }
        // }

        @media (max-width: 820px) and (orientation: portrait) {
          .spin-column {
            padding-top: 4.5em;
          }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          .spin-column {
            padding-top: 4em;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          .spin-column {
            padding-top: 3em;
          }
        }

        @media (max-width: 344px) and (orientation: portrait) {
          .spin-column {
            padding-top: 2.6em;
          }
        }

        @media (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-28%);
          }

          .popup-body {
            display: flex;
            flex-direction: row;
            ${this.data.background?.backgroundImage?`background-image: url(${this.data.background.backgroundImage});`:""}
          }

          .spin-column {
            flex: 1.4;
            padding-left: 35em;
          }

          .info-column {
            padding: 0 10em 0 10em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            flex: 1;
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 2560px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-26%);
          }

          .spin-column {
            flex: 1.3;
            padding-left: 28em;
          }

          .info-column {
            padding: 0 8em 0 8em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 1920px) and (orientation: landscape) {
          .spin-column {
            padding-left: 24em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 0 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 6em;
          }
        }

        @media (max-width: 1728px) and (orientation: landscape) {
          .spin-column {
            padding-left: 18em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 2em 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 4em;
          }
        }

        // @media (max-width: 1680px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-30%);
        //   }
        // }

        // @media (max-width: 1536px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-28%);
        //   }
        // }

        // @media (max-width: 1440px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-26%);
        //   }
        // }

        @media (max-width: 1368px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-20%);
          }

          .spin-column {
            padding-left: 3em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 1em 0 3em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-22%);
          }
        }

        @media (max-width: 1180px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-23%);
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-24%);
          }

          .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(0%);
          }

          .spin-column {
            flex: 1;
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }

          .spin-element {
            margin: 0 auto;
          }

          .info-column {
            padding: 0 3em 0 0em;
          }
        }

        @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-column {
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }
          .spin-element {
            margin: 0 auto;
   	      }
        }

        @media (width: 1024px) and (height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .close-button-landscape {
            right: 250px;
          }
        }

        @media (width: 882px) and (height: 344px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-element {
            width: 80%;
          }
        }

        // @media (max-width: 932px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: initial;
        //   }
        // }

        // @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: initial;
        //   }
        // }

        // @media (min-height: 1368px) and (orientation: portrait) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: 100%;
        //   }
        // }

        // @media (max-width: 882px) and (min-height: 344px) and (orientation: landscape) {
        //   .spin-column {
        //     flex: 1;
        //     padding: 0 3em;
        //   }
        // }

        @media (max-width: 740px) and (orientation: landscape) {
          .spin-column {
            padding: 0 1em;
          }

          .info-column {
            padding: 0 2em 0 1em;
          }
        }

        @media (max-width: 667px) and (orientation: landscape) {
          .spin-column {
            padding: 0 !important;
            transform: translateX(-30%) !important;
          }

          .info-column {
            padding: 0 !important;
            transform: translateX(-15%) !important;
          }
        }
      </style>

      <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content">
          <div class="popup-body">
            <div class="spin-column">
              <div class="spin-element"></div>
            </div>
            <div class="info-column"></div>
          </div>
        </div>
        <button class="close-button close-button-normal">&times;</button>
      </div>
      <button class="close-button close-button-landscape">&times;</button>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector(".close-button-landscape").addEventListener("click",()=>this.close()),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedPopup",{bubbles:!0,composed:!0}))},10)}get isOpened(){return this.shadowRoot.getElementById("popup-overlay").classList.contains("active")}enableCloseButton(t){var e=this.shadowRoot.querySelector(".close-button"),n=this.shadowRoot.querySelector(".close-button-landscape");e.disabled=!t,n.disabled=!t}setSpinContent(t){this.shadowRoot.querySelector(".spin-element").replaceChildren(t)}setFormContent(t){this.shadowRoot.querySelector(".info-column").replaceChildren(t)}playAudio(t=1200){this.enabledAudio&&fadeInSpinXAudio(this.audio,t)}stopAudio(t=800){this.enabledAudio&&fadeOutSpinXAudio(this.audio,t)}open(){var t=getSpinXTriggerKey(window.SpinX.campaign.id),t=(localStorage.getItem(t)||localStorage.setItem(t,!0),this.shadowRoot.getElementById("popup-overlay"));t.classList.remove("fullscreen","halfscreen"),t.classList.add("full_screen"===this.data.displayType?"fullscreen":"halfscreen"),t.classList.add("active"),this.updateElementSize(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXOpenedPopup",{bubbles:!0,composed:!0}))},10),this.playAudio()}close(){setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXClosedPopup",{bubbles:!0,composed:!0}))},10),this.shadowRoot.getElementById("popup-overlay").classList.remove("active"),this.stopAudio(),window.SpinX.components.wheel?.stopRewardAudio()}updateElementSize(){var t,e,n=this.shadowRoot.querySelector(".spin-element");n&&(e=window.innerWidth<=932&&window.matchMedia("(orientation: landscape)").matches,t=window.innerWidth<=1024&&window.innerHeight<=600&&window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(hover: none)").matches&&window.matchMedia("(pointer: coarse)").matches,e||t?(e=n.offsetHeight,n.style.marginTop=(window.innerHeight-e)/2+"px",this.forceAlwaysShowScrollbar(!0),this.shadowRoot.querySelector(".close-button-normal").style.display="none",this.shadowRoot.querySelector(".close-button-landscape").style.display="block"):(n.style.marginTop="",this.forceAlwaysShowScrollbar(!1),this.shadowRoot.querySelector(".close-button-normal").style.display="block",this.shadowRoot.querySelector(".close-button-landscape").style.display="none"))}forceAlwaysShowScrollbar(t){var e=this.shadowRoot.querySelector(".popup-overlay");e&&(t?(e.style.overflowY="scroll",e.style.webkitOverflowScrolling="touch",e.style.scrollbarWidth="auto",this._scrollbarStyle||(this._scrollbarStyle=document.createElement("style"),this._scrollbarStyle.textContent=`
          ::-webkit-scrollbar {
            width: 6px;
          }
          ::-webkit-scrollbar-thumb {
            background: #b7b9be;
            border-radius: 2px;
          }
        `,this.shadowRoot.appendChild(this._scrollbarStyle))):(e.style.overflowY="",e.style.webkitOverflowScrolling="",e.style.scrollbarWidth="",this._scrollbarStyle&&(this._scrollbarStyle.remove(),this._scrollbarStyle=null)))}}customElements.define("spinx-popup",SpinXPopup);class SpinXWheel extends HTMLElement{data;spinedRewardIndex=-1;audio;enabledAudio=!1;audioRewards;constructor(){super(),this.attachShadow({mode:"open"}),this.init()}connectedCallback(){this.render(),this.enabledAudio=window.SpinX?.widgetPath&&this.data?.playingMusic?.enabled&&this.data?.playingMusic?.value,this.enabledAudio&&(this.audio=new Audio(getSpinXSoundUrl(this.data.playingMusic.value)),this.audio.volume=0),this.audioRewards={},this.data.rewards?.forEach(t=>{var e={enabledAudio:!1,audio:null};window.SpinX?.widgetPath&&t.config?.effectMusic?.enabled&&t.config?.effectMusic?.value&&(e.enabledAudio=!0,e.audio=new Audio(getSpinXSoundUrl(t.config.effectMusic.value))),this.audioRewards[t.id]=e})}init(){this.width=this.getAttribute("width")||1e3,this.height=this.getAttribute("height")||1e3,this.defaultSize=42,this.stickerAngle=45,this.angleOffset=0,this.isSpinning=!1,this.isSpinningClass="is-spinning",this.tickerAnim,this.currentSlice=0}render(){this.data=JSON.parse(this.dataset.json),this.rewardAngle=this.data.rewards?.length?360/this.data.rewards?.length:0,this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
        }

        #container {
          width: 100%;
          aspect-ratio: 1 / 1;
          position: relative;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: ${this.data.contentSize||this.defaultSize}px;
          overflow: hidden;
        }

        canvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }

        .ticker {
          ${this.data.sticker.hidden?"display: none;":""}
          position: absolute;
          width: 7%;
          height: 15%;
          top: 7%;
          right: 8%;
          transform-origin: 50% 30%;
          transform: translate(0, 0) rotate(${this.stickerAngle}deg);
          pointer-events: none;
        }

        .${this.isSpinningClass} .ticker {
          animation: tick 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes tick {
          40% {
            transform: translate(0, 0) rotate(20deg);
          }
        }

        @media (orientation: portrait) {
          #container {
            width: 85%;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          #container {
            width: 90%;
          }
        }
      </style>

      <div id="container"></div>
    `,this.container=this.shadowRoot.getElementById("container"),this.wheel=document.createElement("canvas"),this.wheel.classList.add("wheel"),this.wheel.width=this.width,this.wheel.height=this.height,this.renderWheelCanvas(),this.data.circleCenter?.displayed?(this.circle=document.createElement("canvas"),this.circle.classList.add("circle"),this.circle.width=this.width,this.circle.height=this.height,this.renderCircleCanvas()):this.circle=null;var t=document.createElement("div");t.innerHTML=`
      <svg class="ticker" viewBox="55 0 190 300" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M71.8615 145.363C82.9061 180.684 121.428 288.612 149.699 288.611C177.97 288.611 216.491 180.684 227.536 145.363C247.489 81.5512 222.41 11.0005 149.699 11.0005C76.9872 11.0005 51.9081 81.5512 71.8615 145.363Z" fill="${this.data.sticker?.backgroundColor||"#CCCCCC"}"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="${"standard"===this.data.sticker?.borderType?"M67.0663 50.5022C81.3603 22.0419 109.079 2.00046 149.699 2.00046C190.319 2.00046 218.038 22.0419 232.332 50.5022C246.376 78.4655 247.496 114.328 237.019 147.833C231.434 165.693 218.917 201.883 204.161 233.737C196.806 249.614 188.715 264.809 180.451 276.172C176.332 281.836 171.908 286.918 167.203 290.677C162.625 294.334 156.681 297.611 149.699 297.611C142.717 297.611 136.773 294.334 132.195 290.677C127.49 286.919 123.066 281.837 118.947 276.173C110.683 264.81 102.592 249.614 95.2373 233.738C80.4807 201.884 67.9636 165.693 62.3787 147.833C51.9022 114.328 53.0219 78.4655 67.0663 50.5022ZM149.699 288.611C121.428 288.612 82.9063 180.684 71.8617 145.363C51.9083 81.5512 76.9874 11.0005 149.699 11.0005C222.411 11.0005 247.49 81.5512 227.536 145.363C216.492 180.684 177.97 288.611 149.699 288.611Z":""}"  fill="${"standard"===this.data.sticker?.borderType&&this.data.sticker.borderColor?this.data.sticker.borderColor:"#CCCCCC"}"/>
      </svg>
    `,this.ticker=t.firstElementChild,this.container.append(this.wheel,this.circle||"",this.ticker),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWheel",{bubbles:!0,composed:!0}))},10)}darkenHex(t,e){t=parseInt(t.slice(1),16);return"#"+(Math.max(0,(t>>16)-e)<<16|Math.max(0,(t>>8&255)-e)<<8|Math.max(0,(255&t)-e)).toString(16).padStart(6,"0")}drawRewardText(e,t){var n=this.width/2,o=t.split(" ");let i="";var a=[];for(let t=0;t<o.length;t++){var s=i+o[t]+" ",r=e.measureText(s).width;i=270<r&&""!==i?(a.push(i),o[t]+" "):s}a.push(i);var d=Math.min(a.length,2);for(let t=0;t<d;t++)e.fillText(a[t],n/1.1,(1<d?0:10)+42*t)}renderWheelCanvas(){let o=this.wheel.getContext("2d"),i=this.width/2;if(o.clearRect(0,0,this.width,this.height),"standard"===this.data.borderAround?.type&&(o.beginPath(),o.arc(i,i,i-10,0,2*Math.PI),o.lineWidth=10,o.strokeStyle=this.data.borderAround.color||"#CCCCCC",o.stroke()),this.data.rewards?.length){let n=2*Math.PI/this.data.rewards.length;this.data.rewards?.forEach((t,e)=>{"auto_darken"===this.data.borderAround?.type&&(o.beginPath(),o.moveTo(i,i),o.arc(i,i,i,n*e+this.angleOffset,n*(e+1)+this.angleOffset),o.closePath(),o.fillStyle=this.darkenHex(t.config?.backgroundColor,20),o.fill()),o.beginPath(),o.moveTo(i,i),o.arc(i,i,i-13,n*e+this.angleOffset,n*(e+1)+this.angleOffset),o.closePath(),o.fillStyle=t.config?.backgroundColor,o.fill(),this.data.rewardBorder?.displayed&&(o.strokeStyle=this.data.rewardBorder.color,o.lineWidth=2,o.stroke()),o.save(),o.translate(i,i),o.rotate(n*e+n/2+this.angleOffset),o.textAlign="right",o.fillStyle=t.config?.contentColor||"#000000",o.font=`bold ${this.data.contentSize||this.defaultSize}px "${this.data.fontFamily}"`,this.drawRewardText(o,t.name),o.restore()})}else{var t=2*Math.PI;o.beginPath(),o.moveTo(i,i),o.arc(i,i,i-13,this.angleOffset,t+this.angleOffset),o.closePath(),o.fillStyle="#CCCCCC",o.fill()}this.wheel.style.transform="rotate(0deg)",this.wheel.style.transition="transform 15s cubic-bezier(0.20, 0.1, 0.20, 1)",this.wheel.addEventListener("transitionend",this.onTransitionend.bind(this))}renderCircleCanvas(){var t=this.circle.getContext("2d"),e=this.width/2;t.clearRect(0,0,this.width,this.height),t.beginPath(),t.arc(e,e,e/6,0,2*Math.PI),t.fillStyle=this.data.circleCenter?.backgroundColor||"#CCCCCC",t.fill(),"standard"===this.data.circleCenter?.borderType&&(t.lineWidth=5,t.strokeStyle=this.data.circleCenter.borderColor||"#CCCCCC",t.stroke())}playAudio(t=200){this.enabledAudio&&fadeInSpinXAudio(this.audio,t)}stopAudio(t=200){this.enabledAudio&&fadeOutSpinXAudio(this.audio,t)}playRewardAudio(t=200){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeInSpinXAudio(e.audio,t)}stopRewardAudio(t=800){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeOutSpinXAudio(e.audio,t)}spin(e){if(e&&!this.isSpinning&&(this.isSpinning=!0,this.spinedRewardIndex=this.data.rewards.findIndex(t=>t.id===e),-1!==this.spinedRewardIndex)){this.playAudio(),this.dispatchEvent(new CustomEvent("onSpinXStartSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.container.classList.add(this.isSpinningClass),this.ticker.style.animation="none",this.runTickerAnimation();var n=this.spinedRewardIndex*this.rewardAngle,o=(this.spinedRewardIndex+1)*this.rewardAngle;let t=Math.round(Math.random()*(o-n)+n);0!==t&&t%this.rewardAngle!=0||t--;o=3600-t-this.stickerAngle;this.wheel.style.transform=`rotate(${o}deg)`}}onTransitionend(){cancelAnimationFrame(this.tickerAnim),this.container.classList.remove(this.isSpinningClass),this.dispatchEvent(new CustomEvent("onSpinXEndSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.stopAudio(),this.playRewardAudio(),setTimeout(()=>{this.stopRewardAudio()},15e3)}runTickerAnimation=()=>{var t=window.getComputedStyle(this.wheel).transform.split("(")[1].split(")")[0].split(","),e=t[0];let n=Math.atan2(t[1],e);n<0&&(n+=2*Math.PI);t=Math.round(n*(180/Math.PI)),e=Math.floor((t+this.stickerAngle)/this.rewardAngle);this.currentSlice!==e&&(this.ticker.style.animation="none",setTimeout(()=>this.ticker.style.animation=null,10),this.currentSlice=e),this.tickerAnim=requestAnimationFrame(this.runTickerAnimation.bind(this))}}customElements.define("spinx-wheel",SpinXWheel);class SpinXForm extends HTMLElement{data;reward;rewardCode;isLogin=!1;container;logoContainer;spinxForm;formTitle;formContent;formContentAccount;formFields;formError;formAgreementContainer;formAgreement;formSpinButton;spinxResult;resultMessageTitle;resultMessageContent;resultCode;spinxFormFooter;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);var t=this.data.content?.size||24;window.SpinX.participant?.email&&(this.isLogin=!0),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        #spinx-container {
          text-align: left;
          padding: 0.5em 0.5em;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        #spinx-form, #spinx-result {
          opacity: 0;
          transition: opacity 0.8s ease;
        }

        #spinx-form.show, #spinx-result.show {
          opacity: 1;
        }

        #spinx-form.hidden, #spinx-result.hidden {
          display: none;
        }

        #spinx-logo-container img {
          height: 8em;
        }

        #spinx-form-title {
          margin: 0;
          margin-bottom: 5px;
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||36)/this.rootSize}em;
          font-weight: 600;
        }

        #spinx-form-content {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${t/this.rootSize}em;
        }

        #spinx-form-content-account {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.contentForExistingAccount?.color};
          font-size: ${(this.data.contentForExistingAccount?.size||24)/this.rootSize}em;
        }

        #spinx-form-fields {
          margin-bottom: 1em;
        }

        #spinx-form-fields p {
          margin: 0;
        }

        #spinx-form-fields input[type="text"], #spinx-form-fields input[type="email"] {
          width: 100%;
          padding: ${10/this.rootSize}em;
          margin: 8px 0;
          box-sizing: border-box;
          line-height: 1.3em;
          font-size: ${t/(this.rootSize+4)}em;
        }

        #spinx-form-fields input[type="text"].error, #spinx-form-fields input[type="email"].error {
          border: 2px red solid;
        }

        #spinx-form-error {
          display: none;
          opacity: 0;
          transition: opacity 0.5s ease;
          margin: 0.5em 0 1.5em 0;
          color: red;
          background-color: white;
        }

        #spinx-form-error.show {
          display: block;
          opacity: 1;
          padding: 4px 12px;
        }

        #spinx-form-agreement-container {
          color: ${this.data.content?.color};
          font-size: 16px;
        }

        #spinx-form-agreement {
          line-height: 1.3em;
          width: ${t/(1.3*this.rootSize)}em;
          height: ${t/(1.3*this.rootSize)}em;
          position: relative;
          top: 0.1em;
          cursor: pointer;
        }

        #spinx-form-agreement-container label {
          line-height: 1.4em;
          font-size: ${t/(1.3*this.rootSize)}em;
          cursor: pointer;
        }

        // #spinx-form-agreement-container label.error {
        //   color: red;
        // }

        .flash {
          color: red;
          transition: color 0.25s ease-in-out;
        }

        #spinx-form-spin-button {
          width: 100%;
          color: ${this.data.spinButton?.color};
          background-color: ${this.data.spinButton?.backgroundColor};
          font-size: ${(this.data.spinButton?.size||24)/this.rootSize}em;
          padding: 12px 16px;
          border: none;
          text-decoration: none;
          cursor: pointer;
        }

        // #spinx-form-spin-button:hover {
        //   color: ${this.data.spinButton?.backgroundColor};
        //   background-color: ${this.data.spinButton?.color};
        // }

        #spinx-form-spin-button[disabled="true"] {
          color: ${this.data.spinButton?.color} !important;
          background-color: #808080 !important;
          cursor: not-allowed !important;
        }

        #spinx-result-message-title {
          margin: 0;
          margin-bottom: 5px;
          font-weight: 600;
          line-height: 1.3em;
        }

        #spinx-result-message-content {
          margin: 0.5em 0 1.5em 0;
          line-height: 1.3em;
        }

        #spinx-result-code input[type="text"] {
          font-size: ${t/this.rootSize}em;
          width: 100%;
          text-align: center;
          padding: 12px 12px;
          margin: 8px 0;
          font-weight: 600;
          letter-spacing: 2px;
          box-sizing: border-box;
        }

        #spinx-form-footer {
          margin: 25px 0;
          text-align: center;
          color: ${this.data.footerContent?.color};
          font-size: ${(this.data.footerContent?.size||24)/this.rootSize}em;
        }

        @media (orientation: portrait) {
          #spinx-container {
            text-align: center;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 11em;
          }

          #spinx-container {
            padding: 0 3.5em;
          }
        }

        @media (max-width: 912px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 10em;
          }

          #spinx-container {
            padding: 0 3em;
          }
        }

        @media (max-width: 820px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 9em;
          }

          #spinx-container {
            padding: 0 2.5em;
          }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 8em;
          }

          #spinx-container {
            padding: 0 2em;
          }
        }

        // @media (max-width: 600px) and (orientation: portrait) {
        //   #spinx-container {
        //     padding: 10px 0px;
        //   }

        //   #spinx-logo-container img {
        //     margin-bottom: 0px;
        //   }
        // }

        @media (max-width: 540px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 1em;
          }
        }

        // @media (max-width: 480px) and (orientation: portrait) {
        //   #spinx-container {
        //     padding: 10px 0px;
        //   }
        // }

        @media (max-width: 430px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 0.6em;
          }

          #spinx-form-content, #spinx-form-content-account {
            margin: 0.5em 0 0.8em 0;
          }

          #spinx-form-fields {
            margin-bottom: 0px;
          }

          #spinx-form-agreement-container {
            // line-height: 1em;
            font-size: 12px;
          }

          #spinx-form-agreement {
            line-height: 1.3em;
            // top: 0.1em;
          }
        }

        // @media (max-width: 390px) and (orientation: portrait) {
        //   #spinx-logo-container img {
        //     height: 5.5em;
        //   }
        // }

        @media (max-width: 375px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 0.5em;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 740px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
            font-size: 13px;
          }
        }
      </style>

      <div id="spinx-container">
        <div id="spinx-logo-container"></div>
        <div id="spinx-form">
          <p id="spinx-form-title"></p>
          <p id="spinx-form-content"></p>
          <p id="spinx-form-content-account"></p>
          <div id="spinx-form-fields"></div>
          <p id="spinx-form-error"></p>
          <p id="spinx-form-agreement-container">
            <input type="checkbox" id="spinx-form-agreement" name="agreement" value="true">
            <label for="spinx-form-agreement"></label>
          </p>
          <button id="spinx-form-spin-button"></button>
          <p id="spinx-form-footer"></p>
        </div>
        <div id="spinx-result">
          <p id="spinx-result-message-title"></p>
          <p id="spinx-result-message-content"></p>
          <p id="spinx-result-code"><input type="text" value="" readonly="true" /></p>
        </div>
      </div>

      <style>
        ${this.data.styleContent}
      </style>
    `,this.container=this.shadowRoot.getElementById("spinx-container"),this.logoContainer=this.shadowRoot.getElementById("spinx-logo-container"),this.spinxForm=this.shadowRoot.getElementById("spinx-form"),this.formTitle=this.shadowRoot.getElementById("spinx-form-title"),this.formContent=this.shadowRoot.getElementById("spinx-form-content"),this.formContentAccount=this.shadowRoot.getElementById("spinx-form-content-account"),this.formFields=this.shadowRoot.getElementById("spinx-form-fields"),this.formError=this.shadowRoot.getElementById("spinx-form-error"),this.formAgreementContainer=this.shadowRoot.getElementById("spinx-form-agreement-container"),this.formAgreement=this.shadowRoot.getElementById("spinx-form-agreement"),this.formAgreementLabel=this.formAgreementContainer.getElementsByTagName("label")[0],this.formSpinButton=this.shadowRoot.getElementById("spinx-form-spin-button"),this.spinxResult=this.shadowRoot.getElementById("spinx-result"),this.resultMessageTitle=this.shadowRoot.getElementById("spinx-result-message-title"),this.resultMessageContent=this.shadowRoot.getElementById("spinx-result-message-content"),this.resultCode=this.shadowRoot.getElementById("spinx-result-code"),this.resultCodeInput=this.resultCode.getElementsByTagName("input")[0],this.spinxFormFooter=this.shadowRoot.getElementById("spinx-form-footer"),this.generateContents(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedForm",{bubbles:!0,composed:!0}))},10)}showSpinXForm(t=!0){t?(this.spinxForm.classList.remove("hidden"),this.spinxResult.classList.add("hidden"),this.spinxResult.classList.remove("show"),setTimeout(()=>this.spinxForm.classList.add("show"),10)):(this.spinxForm.classList.add("hidden"),this.spinxResult.classList.remove("hidden"),this.spinxForm.classList.remove("show"),setTimeout(()=>this.spinxResult.classList.add("show"),10))}generateMinAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.min?"number"===t.type?`min="${t.min}"`:`minLength="${t.min}"`:""}generateMaxAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.max?"number"===t.type?`max="${t.max}"`:`maxLength="${t.max}"`:""}generateFields(){let e="";return this.reward||this.data.fields?.forEach(t=>{e+=`<p><input id="spinx-form-${t.name}" name="${t.name}" placeholder="${t.label}" type="${t.type}" required="${t.required}" ${this.generateMinAttribute(t)} ${this.generateMaxAttribute(t)} /></p>`}),e}generateContents(){this.data.showLogo&&window.SpinX.store?.config?.logo?.url&&(this.logoContainer.style.display="block",this.logoContainer.innerHTML=`<img src="${window.SpinX.store.config.logo.url}" alt="${window.SpinX.store.name}">`),this.reward?(this.showSpinXForm(!1),this.resultMessageTitle.innerText=this.reward.config?.message?.title?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageContent.innerText=this.reward.config?.message?.content?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageTitle.style.color=this.reward.config?.message?.title?.color,this.resultMessageTitle.style.fontSize=this.reward.config?.message?.title?.size/this.rootSize+"em",this.resultMessageContent.style.color=this.reward.config?.message?.content?.color,this.resultMessageContent.style.fontSize=this.reward.config?.message?.content?.size/this.rootSize+"em","none"!==this.reward.type?this.resultCodeInput.value=this.rewardCode:this.resultCodeInput.style.display="none"):(this.showSpinXForm(),this.formTitle.innerText=this.data.title?.text||"",this.isLogin?(this.formContent.style.display="none",this.formFields.style.display="none",this.formContentAccount.style.display="block",this.formContentAccount.innerHTML=escapeHtml(this.data.contentForExistingAccount?.text||"").replace(/{{NAME}}/g,`<b>${getSpinXParticipantName(window.SpinX.participant)||"Unknown"}</b>`)||""):(this.formContent.style.display="block",this.formFields.style.display="block",this.formContentAccount.style.display="none",this.formContent.innerText=this.data.content?.text||"",this.formFields.innerHTML=this.generateFields()),this.formAgreementLabel.innerText=this.data.agreement,this.formSpinButton.innerText=this.data.spinButton?.text||"",this.spinxFormFooter.innerText=this.data.footerContent?.text||"",this.registerEvents())}enableFormInputs(e){this.isLogin||this.data.fields.forEach(t=>{t=this.shadowRoot.getElementById("spinx-form-"+t.name);e?t.removeAttribute("readonly"):t.setAttribute("readonly",!0)}),e?(this.formAgreement.removeAttribute("disabled"),this.formSpinButton.removeAttribute("disabled")):(this.formAgreement.setAttribute("disabled",!0),this.formSpinButton.setAttribute("disabled",!0))}registerEvents(){this.isLogin||this.data.fields?.forEach(t=>{let e=this.shadowRoot.getElementById("spinx-form-"+t.name);e.addEventListener("change",()=>{t.value=e.value,["text","email"].includes(t.type)&&t.max&&t.value.length>t.max&&(t.value=t.value.substring(0,t.max))})}),this.formSpinButton.addEventListener("click",()=>{if(this.validateForm())if(this.formAgreement.checked){let t={};var e,n,o;this.isLogin?t={...window.SpinX.participant}:"first-name_last-name_email"===this.data.formTemplate?(n=this.shadowRoot.getElementById("spinx-form-first-name"),o=this.shadowRoot.getElementById("spinx-form-last-name"),e=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName=o.value,t.email=e.value):(n=this.shadowRoot.getElementById("spinx-form-name"),o=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName="",t.email=o.value),t.locale=window.SpinX.locale,setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXSpin",{bubbles:!0,composed:!0,detail:t}))},10)}else this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash")},400)})}validateField(t){this.formError.classList.remove("show");let e=!(this.formError.innerText="");var n=this.shadowRoot.getElementById("spinx-form-"+t.name);return n.classList.remove("error"),"name"===t.name?t.required&&!t.value&&(e=!1,this.formError.innerText=t.messages?.required||""):"email"===t.name&&(t.required&&!t.value?(e=!1,this.formError.innerText=t.messages?.required||""):/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.value)||(e=!1,this.formError.innerText=t.messages?.type||"")),this.formError.innerText&&(this.formError.classList.add("show"),n.classList.add("error")),e}validateForm(){let e=!0;if(!this.isLogin&&this.data.fields?.length)for(let t=0;t<this.data.fields.length;t++){var n=this.data.fields[t];if(!(e=this.validateField(n)))break}return e}showError(t){this.formError.innerText="",this.formError.classList.remove("show"),t&&(this.formError.innerText=t,this.formError.classList.add("show"))}showReward(t,e){this.reward=t,this.rewardCode=e,this.generateContents()}}async function initSpinXApp(i,a){if(removeSpinXWelcomePopup(),removeSpinXIntentPopup(),removeSpinXPopup(),removeSpinXOpener(),removeSpinXAnnouncement(),!checkSpinXAppHidden(i?.config?.excludeUrls||[])&&["scheduled","launching"].includes(i?.status)){var e,n=await readSpinXJson(getSpinXThemeDataUrl(i.config?.theme));if(checkSpinXAnnouncementBarEnable(i)&&(window.SpinX.announcement=combineSpinXAnnouncementData(i,n)),"launching"===i?.status){window.SpinX.popup=combineSpinXPopupData(i,n),window.SpinX.wheel=combineSpinXWheelData(i,n),checkSpinXOpenerEnable(i)&&(window.SpinX.opener=combineSpinXOpenerData(i,n));let t=initSpinXPopup(window.SpinX.popup,t=>{let o;var e=initSpinXWheel(window.SpinX.wheel,t=>{console.log("onStartSpin",t.detail),window.SpinX.components.opener.enableOpenerButton(!1),window.SpinX.components.popup.enableCloseButton(!1),window.SpinX.components.popup.stopAudio(200)},t=>{console.log("onEndSpin",t.detail),window.SpinX.components.popup.enableCloseButton(!0),window.SpinX.components.opener.enableOpenerButton(!0),t.detail.reward&&(window.SpinX.components.form.showReward(t.detail.reward,o),checkSpinXAnnouncementBarEnable(i))&&window.SpinX.components.announcement.reset(),setTimeout(()=>{document.querySelector("spinx-popup").shadowRoot.querySelector(".popup-overlay").scrollTo({top:0,behavior:"smooth"})},500)}),e=(window.SpinX.components.wheel=e,t.setSpinContent(e),initSpinXForm(window.SpinX.popup,async t=>{t=t.detail;if(window.SpinX.components.form.enableFormInputs(!1),window.SpinX.isDevelopment){o="SPINX_CODE_DEMO";var e=Math.floor(Math.random()*window.SpinX.wheel.rewards.length),e=window.SpinX.wheel.rewards[e];window.SpinX.components.wheel.spin(e.id)}else if("function"==typeof a?.spin){window.SpinX.components.form.showError();try{var n=await a.spin(i.id,t);if(!n?.rewardId)throw new Error("Sorry, something went wrong. Please try it again!");o=n.rewardCode,window.SpinX.components.wheel.spin(n.rewardId)}catch(t){window.SpinX.components.form.showError(t.message),window.SpinX.components.form.enableFormInputs(!0)}}}));window.SpinX.components.form=e,t.setFormContent(e)},t=>{var e;"function"!=typeof a?.view||(e=getSpinXViewTrackingKey(i.id),(e=localStorage.getItem(e))&&Date.now()-parseInt(e)<3e5)||(a.view(i.id,{pageTemplate:window.SpinX.pageTemplate,urlPath:location.pathname,email:window.SpinX.participant?.email||null}),localStorage.setItem(getSpinXTriggerKey(i.id),!0),localStorage.setItem(getSpinXViewTrackingKey(i.id),Date.now()))});window.SpinX.components.popup=t,checkSpinXOpenerEnable(i)&&(e=initSpinXOpener(window.SpinX.opener,void 0,()=>{t&&(t.isOpened?t.close():t.open())}),window.SpinX.components.opener=e),checkSpinXWelcomePopupEnable(i)&&(window.SpinX.delayedDisplay=combineDelayedDisplayData(i,n),e=initSpinXWelcomePopup(window.SpinX.delayedDisplay,t=>{t.registerPopupTrigger(i.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.welcomePopup=e),checkSpinXIntentPopupEnable(i)&&(window.SpinX.exitIntent=combineExitIntentData(i,n),e=initSpinXIntentPopup(window.SpinX.exitIntent,t=>{t.registerPopupTrigger(i.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.intentPopup=e)}if(checkSpinXAnnouncementBarEnable(i)){let e=initSpinXAnnouncement(window.SpinX.announcement,void 0,t=>{checkSpinXOpenerEnable(i)&&(t.detail&&"bottom"===window.SpinX.announcement.position?(t=e.getContainerHeight(),window.SpinX.components.opener.resetBottomDistance(t)):window.SpinX.components.opener.resetBottomDistance(0))});window.SpinX.components.announcement=e}}}customElements.define("spinx-form",SpinXForm);