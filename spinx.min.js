function getSpinXCustomizedData(e,t,n="value",i){return i||(e?.customized&&null!=e[n]?e[n]:t&&Object.hasOwn(t,n)?t[n]:t)}function getSpinXRewardTypeDefault(e,t){t=t.rewardTypes;let n;return t&&("none"===e.type?n=t.none:"discount_code"===e.type?n=t.discountCode:"free_shipping"===e.type?n=t.freeShipping:"free_gift"===e.type&&(n=t.freeGift)),n}function getSpinXRewardEffectMusic(e,t){return(null==e.config?.effectMusic?.enabled||e.config?.effectMusic?.enabled&&!e.config?.effectMusic?.value?getSpinXRewardTypeDefault(e,t):e.config)?.effectMusic}function getSpinXCustomizedRewardMessage(e,t,n,i){var t=t.config?.popup||{},o=n?.popup,n=getSpinXRewardTypeDefault(e,n);return{title:{text:getSpinXCustomizedData(e.config?.message?.title,n?.message?.title,"text",i?.messageTitle),size:Number(getSpinXCustomizedData(e.config?.message?.title,getSpinXCustomizedData(t.title,o?.title,"size"),"size")),color:getSpinXCustomizedData(e.config?.message?.title,getSpinXCustomizedData(t.title,o?.title,"color"),"color")},content:{text:getSpinXCustomizedData(e.config?.message?.content,n?.message?.content,"text",i?.messageContent),size:Number(getSpinXCustomizedData(e.config?.message?.content,getSpinXCustomizedData(t.content,o?.content,"size"),"size")),color:getSpinXCustomizedData(e.config?.message?.content,getSpinXCustomizedData(t.content,o?.content,"color"),"color")}}}function getSpinXCustomizedResourceUrl(e,t,n){return e&&t?.url?t.url:n?.path?""+window.SpinX.widgetPath+n.path:null}function getSpinXCurrentLocale(e){var t=window.SpinX.locale,e=e.config||{};return t&&e.multiLanguage?.enabled&&Object.hasOwn(e.multiLanguage.langs||{},t)?e.multiLanguage.langs[t]:null}function getSpinXThemeCate(e){return e?.startsWith("CLS_")?"classic":e?.startsWith("HLW_")?"halloween":e?.startsWith("BFD_")?"black_friday":"classic"}function getSpinXThemeDataUrl(e){var t=getSpinXThemeCate(e);return window.SpinX.widgetPath+`/catalog/${t}/themes/${e}/theme.json`}function getSpinXOpenerIconUrl(e){var t=getSpinXThemeCate(e);return window.SpinX.widgetPath+`/catalog/${t}/openers/${e}.png`}function getSpinXSoundUrl(e){var t=getSpinXThemeCate(e);let n=e;return e?.includes("_BG_")?n="background/"+e:e?.includes("_PY_")?n="playing/"+e:e?.includes("_WN_")?n="winning/"+e:e?.includes("_LS_")&&(n="losing/"+e),`${window.SpinX.widgetPath}/catalog/${t}/sounds/${n}.mp3`}function initSpinXWheel(e,t,n){var i=document.createElement("spinx-wheel");return i.dataset.json=JSON.stringify(e),"function"==typeof t&&i.addEventListener("onSpinXStartSpin",t),"function"==typeof n&&i.addEventListener("onSpinXEndSpin",n),i}function initSpinXForm(e,t){var n=document.createElement("spinx-form");return n.dataset.json=JSON.stringify(e),"function"==typeof t&&n.addEventListener("onSpinXSpin",t),n}function initSpinXPopup(e,t,n){let i=document.createElement("spinx-popup");return i.dataset.json=JSON.stringify(e),"function"==typeof t&&i.addEventListener("onSpinXLoadedPopup",()=>t(i)),"function"==typeof n&&i.addEventListener("onSpinXOpenedPopup",()=>n(i)),document.body.append(i),i}function removeSpinXPopup(){document.querySelector("spinx-popup")?.remove()}function initSpinXOpener(e,t,n){let i=document.createElement("spinx-opener");return i.dataset.json=JSON.stringify(e),"function"==typeof t&&i.addEventListener("onSpinXLoadedOpener",()=>t(i)),"function"==typeof n&&i.addEventListener("onSpinXClickOpener",n),document.body.append(i),i}function removeSpinXOpener(){document.querySelector("spinx-opener")?.remove()}function initSpinXWelcomePopup(e,t,n){let i=document.createElement("spinx-welcome-popup");return i.dataset.json=JSON.stringify(e),"function"==typeof t&&i.addEventListener("onSpinXLoadedWelcomePopup",()=>t(i)),"function"==typeof n&&i.addEventListener("onSpinXClickWelcomePopup",n),document.body.append(i),i}function removeSpinXWelcomePopup(){document.querySelector("spinx-welcome-popup")?.remove()}function initSpinXIntentPopup(e,t,n){let i=document.createElement("spinx-intent-popup");return i.dataset.json=JSON.stringify(e),"function"==typeof t&&i.addEventListener("onSpinXLoadedIntentPopup",()=>t(i)),"function"==typeof n&&i.addEventListener("onSpinXClickIntentPopup",n),document.body.append(i),i}function removeSpinXIntentPopup(){document.querySelector("spinx-intent-popup")?.remove()}function initSpinXAnnouncement(e,t,n){let i=document.createElement("spinx-announcement");return i.dataset.json=JSON.stringify(e),"top"===e.position?document.body.insertBefore(i,document.body.firstChild):document.body.append(i),"function"==typeof t&&i.addEventListener("onSpinXLoadedAnnouncement",()=>t(i)),"function"==typeof n&&i.addEventListener("onSpinXVisibleAnnouncementChanged",n),i}function removeSpinXAnnouncement(){document.querySelector("spinx-announcement")?.remove()}function getSpinXTriggerKey(e){return window.SpinX.disableAutoTriggerPopupKey+`_${e}_`+(window.SpinX.participant?.id||"anonymous")}function getSpinXViewTrackingKey(e){return"spinx_view_"+e}function checkSpinXAppHidden(e){let t=window.location.pathname;return e.some(e=>t.startsWith(e))}function checkSpinXOpenerEnable(e){return!!e?.config?.triggers?.opener?.enabled}function checkSpinXWelcomePopupEnable(e){return!!e?.config?.triggers?.delayedDisplay?.enabled}function checkSpinXIntentPopupEnable(e){return!!e?.config?.triggers?.exitIntent?.enabled}function checkSpinXAnnouncementBarEnable(e){return!!e?.config?.announcement?.upcomingEvent?.enabled||!!e?.config?.announcement?.readyToSpin?.enabled}function fadeInSpinXAudio(t,n=500){t.currentTime=0,t.volume=0,t.play();let i=performance.now(),o=e=>{e=Math.min(1,(e-i)/n);t.volume=Math.min(1,Math.max(0,e)),e<1&&requestAnimationFrame(o)};requestAnimationFrame(o)}function fadeOutSpinXAudio(t,n=500){let i=t.volume,o=performance.now(),a=e=>{e=Math.min(1,(e-o)/n);t.volume=Math.min(1,Math.max(0,i*(1-e))),e<1?requestAnimationFrame(a):(t.pause(),t.currentTime=0)};requestAnimationFrame(a)}function readSpinXJson(e){return fetch(e).then(e=>{if(e.ok)return e.json();throw new Error("HTTP error "+e.status)}).catch(function(){this.dataError=!0})}function getSpinXParticipantName(e){var t=(`${e.firstName||""} `+(e.lastName||"")).trim();return t||e.email}function convertSpinXCurrency(e,t="USD",n){return e.toLocaleString(n?.locales,{style:"currency",currency:t,currencyDisplay:n?.currencyDisplay})}function formatSpinXDateTime(e){return"[object Date]"!==Object.prototype.toString.call(e)?"NaD":dayjs(e).format("DD/MM/YYYY HH:mm")}function lessThanSpinXHours(e,t,n){return 0<e.getTime()-t.getTime()&&(e.getTime()-t.getTime())/36e5<n}function lessThanSpinXDays(e,t,n){return 0<e.getTime()-t.getTime()&&(e.getTime()-t.getTime())/864e5<n}function convertSpinXCountDownTime(e){var t=e%3600;return Math.floor(e/3600)+`:${Math.floor(t/60)}:`+Math.floor(t%60)}function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function loadGoogleFont(e){if(["Arial","Times New Roman","Courier New","Verdana","Tahoma"].includes(e))return Promise.resolve();let i=`https://fonts.googleapis.com/css2?family=${e.replace(" ","+")}:wght@400;700&display=swap`;return Array.from(document.head.getElementsByTagName("link")).find(e=>e.href===i)?document.fonts.ready:new Promise((e,t)=>{var n=document.createElement("link");n.href=i,n.rel="stylesheet",n.onload=()=>{document.fonts.ready.then(e).catch(t)},n.onerror=t,document.head.appendChild(n)})}function onSpinXElementSizeChange(n,i,e={}){if(!n)throw new Error("onSizeChange: element is required");if("function"!=typeof i)throw new Error("onSizeChange: callback is required");let{box:o="border-box",initial:t=!0}=e,a=!1,s=-1,r=-1,d=()=>{var e,t;a||({width:t,height:e}="content-box"===o?{width:n.clientWidth,height:n.clientHeight}:{width:(t=n.getBoundingClientRect()).width,height:t.height},t===s&&e===r)||(s=t,r=e,i({width:t,height:e}))};if(t&&d(),"undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>{requestAnimationFrame(d)});try{e.observe(n,{box:"content-box"===o?"content-box":"border-box"})}catch{e.observe(n)}return()=>{a=!0,e.disconnect()}}let p=new MutationObserver(()=>requestAnimationFrame(d)),l=(p.observe(n,{attributes:!0,attributeFilter:["style","class"],childList:!0,subtree:!0,characterData:!0}),()=>d()),c=(window.addEventListener("resize",l),window.addEventListener("orientationchange",l),setInterval(d,200));return()=>{a=!0,p.disconnect(),window.removeEventListener("resize",l),window.removeEventListener("orientationchange",l),clearInterval(c)}}function combineSpinXWheelData(a,s){var e=a.config?.wheel||{};let r=getSpinXCurrentLocale(a),d=s.wheel,p=(e,t)=>t<e?t:p(e,t-e);return{fontFamily:getSpinXCustomizedData(e.fontFamily,d?.fontFamily),contentSize:Number(getSpinXCustomizedData(e.contentSize,d?.contentSize)),borderAround:{type:getSpinXCustomizedData(e.borderAround,d?.borderAround,"type"),color:getSpinXCustomizedData(e.borderAround,d?.borderAround,"color")},rewardBorder:{displayed:getSpinXCustomizedData(e.rewardBorder,d?.rewardBorder,"displayed"),color:getSpinXCustomizedData(e.rewardBorder,d?.rewardBorder,"color")},circleCenter:{displayed:getSpinXCustomizedData(e.circleCenter,d?.circleCenter,"displayed"),borderType:getSpinXCustomizedData(e.circleCenter,d?.circleCenter,"borderType"),borderColor:getSpinXCustomizedData(e.circleCenter,d?.circleCenter,"borderColor"),backgroundColor:getSpinXCustomizedData(e.circleCenter,d?.circleCenter,"backgroundColor"),icon:getSpinXCustomizedData(e.circleCenter,d?.circleCenter,"icon")},sticker:{borderType:getSpinXCustomizedData(e.sticker,d?.sticker,"borderType"),borderColor:getSpinXCustomizedData(e.sticker,d?.sticker,"borderColor"),backgroundColor:getSpinXCustomizedData(e.sticker,d?.sticker,"backgroundColor")},playingMusic:e.playingMusic||d?.playingMusic,rewards:a.rewards?.map((e,t)=>{let n=e;var e=n.config||{},t=d.rewards?.length?d.rewards[p(d.rewards.length,t)]:null,i=r?.rewards?.find(e=>e.id===n.id),o=i?.name||n.name;return e.discountCode?.amount&&"number"!=typeof e.discountCode.amount&&(e.discountCode.amount=Number(e.discountCode.amount)),e.discountCode?.percentage&&"number"!=typeof e.discountCode.percentage&&(e.discountCode.percentage=Number(e.discountCode.percentage)),e.discountCode?.startTime?.date&&"string"==typeof e.discountCode.startTime.date&&(e.discountCode.startTime.date=new Date(e.discountCode.startTime.date)),e.discountCode?.endTime?.date&&"string"==typeof e.discountCode.endTime.date&&(e.discountCode.endTime.date=new Date(e.discountCode.endTime.date)),e.freeShipping?.shippingRates?.amount&&"number"!=typeof e.freeShipping.shippingRates.amount&&(e.freeShipping.shippingRates.amount=Number(e.freeShipping.shippingRates.amount)),e.freeShipping?.startTime?.date&&"string"==typeof e.freeShipping.startTime.date&&(e.freeShipping.startTime.date=new Date(e.freeShipping.startTime.date)),e.freeShipping?.endTime?.date&&"string"==typeof e.freeShipping.endTime.date&&(e.freeShipping.endTime.date=new Date(e.freeShipping.endTime.date)),e.freeGift?.quantity?.amount&&"number"!=typeof e.freeGift.quantity.amount&&(e.freeGift.quantity.amount=Number(e.freeGift.quantity.amount)),e.freeGift?.startTime?.date&&"string"==typeof e.freeGift.startTime.date&&(e.freeGift.startTime.date=new Date(e.freeGift.startTime.date)),e.freeGift?.endTime?.date&&"string"==typeof e.freeGift.endTime.date&&(e.freeGift.endTime.date=new Date(e.freeGift.endTime.date)),{id:n.id,name:o,type:n.type,status:n.status,order:n.order,config:{discountCode:e.discountCode,freeShipping:e.freeShipping,contentColor:getSpinXCustomizedData(e.contentColor,t?.contentColor),backgroundColor:getSpinXCustomizedData(e.backgroundColor,t?.backgroundColor),effectMusic:getSpinXRewardEffectMusic(n,s),message:getSpinXCustomizedRewardMessage(n,a,s,i)}}})}}function combineSpinXPopupData(e,t){var n=e.config?.popup||{};let i=getSpinXCurrentLocale(e);e=t?.popup;return{contentColor:n?.content?.color,displayType:n.displayType||e?.displayType,showLogo:"boolean"==typeof n.showLogo?n.showLogo:e?.showLogo,background:{backgroundColor:getSpinXCustomizedData(n.background,e?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(n.background?.customized,n.background?.backgroundImage,e?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(n.background?.customized,n.background?.mobileBackgroundImage,e?.background?.mobileBackgroundImage)},backgroundMusic:n.backgroundMusic||e?.backgroundMusic,fontFamily:getSpinXCustomizedData(n.fontFamily,e?.fontFamily),title:{text:getSpinXCustomizedData(n.title,e?.title,"text",i?.popup?.title),size:Number(getSpinXCustomizedData(n.title,e?.title,"size")),color:getSpinXCustomizedData(n.title,e?.title,"color")},content:{text:getSpinXCustomizedData(n.content,e?.content,"text",i?.popup?.content),size:Number(getSpinXCustomizedData(n.content,e?.content,"size")),color:getSpinXCustomizedData(n.content,e?.content,"color")},contentForExistingAccount:{text:getSpinXCustomizedData(n.contentForExistingAccount,e?.contentForExistingAccount,"text",i?.popup?.contentForExistingAccount),size:Number(getSpinXCustomizedData(n.contentForExistingAccount,e?.contentForExistingAccount,"size")),color:getSpinXCustomizedData(n.contentForExistingAccount,e?.contentForExistingAccount,"color")},fields:(n.fields||e?.fields)?.map(t=>{let n=i?.popup?.fields?.find(e=>e.name===t.name);return n?.label&&(t.label=n.label),n?.placeholder&&(t.placeholder=n.placeholder),t.messages||(t.messages={}),Object.keys(n?.messages||{}).forEach(e=>{t.messages[e]=n.messages[e]}),t}),textInput:{color:getSpinXCustomizedData(n.textInput,e?.textInput,"color"),backgroundColor:getSpinXCustomizedData(n.textInput,e?.textInput,"backgroundColor"),placeholderColor:getSpinXCustomizedData(n.textInput,e?.textInput,"placeholderColor")},agreement:i?.popup?.agreement||e?.agreement,spinButton:{text:getSpinXCustomizedData(n.spinButton,e?.spinButton,"text",i?.popup?.spinButton),size:Number(getSpinXCustomizedData(n.spinButton,e?.spinButton,"size")),color:getSpinXCustomizedData(n.spinButton,e?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(n.spinButton,e?.spinButton,"backgroundColor")},footerContent:{text:getSpinXCustomizedData(n.footerContent,e?.footerContent,"text",i?.popup?.footerContent),size:Number(getSpinXCustomizedData(n.footerContent,e?.footerContent,"size")),color:getSpinXCustomizedData(n.footerContent,e?.footerContent,"color")},styleContent:getSpinXCustomizedData(n.styleContent,"")}}function combineSpinXOpenerData(e,t){var n=e.config||{},e=getSpinXCurrentLocale(e),n=n.triggers.opener,t=t?.triggers?.opener||{},i={...t?.attentionEffect||{},...n.attentionEffect||{}};return"string"==typeof i.intervalTime&&(i.intervalTime=Number(i.intervalTime)),{content:getSpinXCustomizedData(n.content,t?.content,"value",e?.triggers?.opener?.content),position:n.position,distance:{left:Number(getSpinXCustomizedData(n.distance?.left,t?.distance?.left)),right:Number(getSpinXCustomizedData(n.distance?.right,t?.distance?.right)),bottom:Number(getSpinXCustomizedData(n.distance?.bottom,t?.distance?.bottom)),bottomFromAnnouncement:Number(getSpinXCustomizedData(n.distance?.bottomFromAnnouncement,t?.distance?.bottomFromAnnouncement))},fontFamily:getSpinXCustomizedData(n.fontFamily,t?.fontFamily),contentColor:getSpinXCustomizedData(n.contentColor,t?.contentColor),backgroundColor:getSpinXCustomizedData(n.backgroundColor,t?.backgroundColor),icon:n.icon?.value?n.icon:t?.icon,attentionEffect:i}}function combineDelayedDisplayData(e,t){var n=getSpinXCurrentLocale(e),e=e.config?.triggers?.delayedDisplay||{},t=t?.triggers?.delayedDisplay;return{delay:getSpinXCustomizedData(e.delay,t?.delay),background:{backgroundColor:getSpinXCustomizedData(e.background,t?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(e.background?.customized,e.background?.backgroundImage,t?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(e.background?.customized,e.background?.mobileBackgroundImage,t?.background?.mobileBackgroundImage)},fontFamily:getSpinXCustomizedData(e.fontFamily,t?.fontFamily),title:{text:getSpinXCustomizedData(e.title,t?.title,"text",n?.triggers?.delayedDisplay?.title),size:Number(getSpinXCustomizedData(e.title,t?.title,"size")),color:getSpinXCustomizedData(e.title,t?.title,"color")},content:{text:getSpinXCustomizedData(e.content,t?.content,"text",n?.triggers?.delayedDisplay?.content),size:Number(getSpinXCustomizedData(e.content,t?.content,"size")),color:getSpinXCustomizedData(e.content,t?.content,"color")},contentBottom:{text:getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"text",n?.triggers?.delayedDisplay?.contentBottom),size:Number(getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"size")),color:getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(e.spinButton,t?.spinButton,"text",n?.triggers?.delayedDisplay?.spinButton),size:Number(getSpinXCustomizedData(e.spinButton,t?.spinButton,"size")),color:getSpinXCustomizedData(e.spinButton,t?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(e.spinButton,t?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"text",n?.triggers?.delayedDisplay?.cancelButton),size:Number(getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"size")),color:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"backgroundColor")}}}function combineExitIntentData(e,t){var n=getSpinXCurrentLocale(e),e=e.config?.triggers?.exitIntent||{},t=t?.triggers?.exitIntent;return{desktop:e.desktop,mobile:e.mobile,background:{backgroundColor:getSpinXCustomizedData(e.background,t?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(e.background?.customized,e.background?.backgroundImage,t?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(e.background?.customized,e.background?.mobileBackgroundImage,t?.background?.mobileBackgroundImage)},fontFamily:getSpinXCustomizedData(e.fontFamily,t?.fontFamily),title:{text:getSpinXCustomizedData(e.title,t?.title,"text",n?.triggers?.exitIntent?.title),size:Number(getSpinXCustomizedData(e.title,t?.title,"size")),color:getSpinXCustomizedData(e.title,t?.title,"color")},content:{text:getSpinXCustomizedData(e.content,t?.content,"text",n?.triggers?.exitIntent?.content),size:Number(getSpinXCustomizedData(e.content,t?.content,"size")),color:getSpinXCustomizedData(e.content,t?.content,"color")},contentBottom:{text:getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"text",n?.triggers?.exitIntent?.contentBottom),size:Number(getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"size")),color:getSpinXCustomizedData(e.contentBottom,t?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(e.spinButton,t?.spinButton,"text",n?.triggers?.exitIntent?.spinButton),size:Number(getSpinXCustomizedData(e.spinButton,t?.spinButton,"size")),color:getSpinXCustomizedData(e.spinButton,t?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(e.spinButton,t?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"text",n?.triggers?.exitIntent?.cancelButton),size:Number(getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"size")),color:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(e.cancelButton,t?.cancelButton,"backgroundColor")}}}function combineSpinXAnnouncementData(e,t){var n=e.config||{},i=getSpinXCurrentLocale(e),o=n.announcement,a=t?.announcement||{},s={...o.upcomingEvent||{},content:getSpinXCustomizedData(o.upcomingEvent?.content,a?.upcomingEvent?.content,"value",i?.announcement?.upcomingEvent?.content)},r={...o.readyToSpin||{},content:getSpinXCustomizedData(o.readyToSpin?.content,a?.readyToSpin?.content,"value",i?.announcement?.readyToSpin?.content)},d={...o.countDownToLaunch||{},content:getSpinXCustomizedData(o.countDownToLaunch?.content,a?.countDownToLaunch?.content,"value",i?.announcement?.countDownToLaunch?.content)},p={...o.countDownToClose||{},content:getSpinXCustomizedData(o.countDownToClose?.content,a?.countDownToClose?.content,"value",i?.announcement?.countDownToClose?.content)},i={...o.encourageUsePrize||{},discountMessage:getSpinXCustomizedData(o.encourageUsePrize?.discountMessage,a?.encourageUsePrize?.discountMessage,"value",i?.announcement?.encourageUsePrize?.discountMessage),discountMessageWithMinOrder:getSpinXCustomizedData(o.encourageUsePrize?.discountMessageWithMinOrder,a?.encourageUsePrize?.discountMessageWithMinOrder,"value",i?.announcement?.encourageUsePrize?.discountMessageWithMinOrder),freeGiftMessage:getSpinXCustomizedData(o.encourageUsePrize?.freeGiftMessage,a?.encourageUsePrize?.freeGiftMessage,"value",i?.announcement?.encourageUsePrize?.freeGiftMessage),freeShipMessage:getSpinXCustomizedData(o.encourageUsePrize?.freeShipMessage,a?.encourageUsePrize?.freeShipMessage,"value",i?.announcement?.encourageUsePrize?.freeShipMessage),freeShipMessageWithMaxAmount:getSpinXCustomizedData(o.encourageUsePrize?.freeShipMessageWithMaxAmount,a?.encourageUsePrize?.freeShipMessageWithMaxAmount,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMaxAmount),freeShipMessageWithMinOrder:getSpinXCustomizedData(o.encourageUsePrize?.freeShipMessageWithMinOrder,a?.encourageUsePrize?.freeShipMessageWithMinOrder,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMinOrder),freeShipMessageWithMaxAmountAndMinOrder:getSpinXCustomizedData(o.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder,a?.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder),helperText:getSpinXCustomizedData(o.encourageUsePrize?.helperText,a?.encourageUsePrize?.helperText,"value",i?.announcement?.encourageUsePrize?.helperText)};return s.displayDays&&"number"!=typeof s.displayDays&&(s.displayDays=Number(s.displayDays)),d.displayHours&&"number"!=typeof d.displayHours&&(d.displayHours=Number(d.displayHours)),p.displayHours&&"number"!=typeof p.displayHours&&(p.displayHours=Number(p.displayHours)),{status:e.status,spinState:{state:"scheduled"===e.status?"upcoming_event":"launching"===e.status?"ready_to_spin":"",rewardCode:"",winningRewardReminder:""},scheduledAt:e.scheduledAt&&"string"==typeof e.scheduledAt?new Date(e.scheduledAt):e.scheduledAt,launchedAt:e.launchedAt&&"string"==typeof e.launchedAt?new Date(e.launchedAt):e.launchedAt,closedAt:e.closedAt&&"string"==typeof e.closedAt?new Date(e.closedAt):e.closedAt,position:o.position,displayType:o.displayType,fontFamily:getSpinXCustomizedData(o.fontFamily,a?.fontFamily),contentSize:Number(getSpinXCustomizedData(o.contentSize,a?.contentSize)),contentColor:getSpinXCustomizedData(o.contentColor,a?.contentColor),backgroundColor:getSpinXCustomizedData(o.backgroundColor,a?.backgroundColor),openerIcon:n.triggers?.opener?.icon?.value?n.triggers.opener.icon:t?.triggers?.opener?.icon,upcomingEvent:s,readyToSpin:r,countDownToLaunch:d,countDownToClose:p,encourageUsePrize:i}}window.SpinX=window.SpinX||{locale:null,site:null,campaign:null,participant:null,opener:null,wheel:null,popup:null,announcement:null,components:{opener:null,wheel:null,popup:null,form:null,welcomePopup:null,intentPopup:null,announcement:null},winningReward:{id:null,name:null,type:null,code:null},utils:{}},window.SpinX.version="v1.0.19",window.SpinX.isDevelopment=!1,window.SpinX.widgetPath="https://cdn.jsdelivr.net/gh/eplugin-io/spinx"+(window.SpinX.version?"@"+window.SpinX.version:""),window.SpinX.disableAutoTriggerPopupKey="spinx-disabled-auto-trigger-popup",window.SpinX.winningRewardKey="spinx-wheel-winning-reward",window.SpinX.utils.getSessionWithTTL=e=>{var t=sessionStorage.getItem(e);if(!t)return null;try{var n=JSON.parse(t);return!n.expiry||Date.now()>n.expiry?(sessionStorage.removeItem(e),null):n.value}catch{return sessionStorage.removeItem(e),null}},window.SpinX.utils.setSessionWithTTL=(e,t,n)=>{var i=Date.now();sessionStorage.setItem(e,JSON.stringify({value:t,expiry:i+n}))},window.SpinX.utils.removeSessionWithTTL=e=>{try{sessionStorage.removeItem(e)}catch(e){}},window.SpinX.utils.getWinningRewardReminder=(e,t,n,i,o)=>{if(!(e&&t&&n&&i&&0!==i.length))return"";if(!n.enabled)return"";i=i.find(e=>e.id===t);if(!i||!i.config)return"";var a=i.type,i=i.config;if("none"===a)return"";let s="";return"discount_code"===a?s=window.SpinX.utils.getWinningDiscountReminder(e,i.discountCode,n,o):"free_shipping"===a?s=window.SpinX.utils.getWinningFreeShippingReminder(e,i.freeShipping,n,o):"free_gift"===a&&(s=window.SpinX.utils.getWinningFreeGiftReminder(e,n,o)),s&&n.helperText&&(s+="<newline>"+n.helperText?.replace("{{CODE}}",`<strong>${e}</strong>`)),s},window.SpinX.utils.getWinningDiscountReminder=(e,t,n,i)=>{if(!t)return"";var o=t.minOrderAmount?.enabled&&0<t.minOrderAmount?.amount;let a="",s=("percentage"===t.type&&t.percentage?a=t.percentage+"%":"fixed_amount"===t.type&&t.amount&&(a=""+window.SpinX.utils.convertMoneyFormat(t.amount,i)),"");return s=(s=(s=o?(s=n.discountMessageWithMinOrder||n.discountMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(t.minOrderAmount.amount,i)):n.discountMessage||"").replace("{{VALUE}}",`<strong>${a}</strong>`)).replace("{{CODE}}",`<strong>${e}</strong>`)},window.SpinX.utils.getWinningFreeShippingReminder=(e,t,n,i)=>{if(!t)return"";var o=t.minOrderAmount?.enabled&&0<t.minOrderAmount?.amount,a=t.maxAmount?.enabled&&0<t.maxAmount?.amount;let s="";return s=(s=o&&a?(s=(s=n.freeShipMessageWithMaxAmountAndMinOrder||n.freeShipMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(t.minOrderAmount.amount,i))).replace("{{MAX_AMOUNT}}",""+window.SpinX.utils.convertMoneyFormat(t.maxAmount.amount,i)):o?(s=n.freeShipMessageWithMinOrder||n.freeShipMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(t.minOrderAmount.amount,i)):a?(s=n.freeShipMessageWithMaxAmount||n.freeShipMessage||"").replace("{{MAX_AMOUNT}}",""+window.SpinX.utils.convertMoneyFormat(t.maxAmount.amount,i)):n.freeShipMessage||"").replace("{{CODE}}",`<strong>${e}</strong>`)},window.SpinX.utils.getWinningFreeGiftReminder=(e,t)=>{let n=t.freeGiftMessage||"";return n=n.replace("{{CODE}}",`<strong>${e}</strong>`)},window.SpinX.utils.formatAmount=e=>e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.formatAmountWithCommaSeparator=e=>e.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.formatAmountNoDecimalsWithCommaSeparator=e=>Math.round(e).toLocaleString("de-DE"),window.SpinX.utils.formatAmountWithApostropheSeparator=e=>e.toLocaleString("en-CH",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.convertMoneyFormat=(e,t)=>(t=t||"{{amount}}").includes("{{amount}}")?t.replace("{{amount}}",window.SpinX.utils.formatAmount(e)):t.includes("{{amount_with_comma_separator}}")?t.replace("{{amount_with_comma_separator}}",window.SpinX.utils.formatAmountWithCommaSeparator(e)):t.includes("{{amount_no_decimals}}")?t.replace("{{amount_no_decimals}}",Math.round(e).toString()):t.includes("{{amount_no_decimals_with_comma_separator}}")?t.replace("{{amount_no_decimals_with_comma_separator}}",window.SpinX.utils.formatAmountNoDecimalsWithCommaSeparator(e)):t.includes("{{amount_with_apostrophe_separator}}")?t.replace("{{amount_with_apostrophe_separator}}",window.SpinX.utils.formatAmountWithApostropheSeparator(e)):t;class SpinXAnnouncement extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"}),this.countDownId="spinx-count-down",this.messageItemClass="announcement-item"}connectedCallback(){this.reset(),this.delayMobileClick()}render(){this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.data.scheduledAt&&"string"==typeof this.data.scheduledAt&&(this.data.scheduledAt=new Date(this.data.scheduledAt)),this.data.launchedAt&&"string"==typeof this.data.launchedAt&&(this.data.launchedAt=new Date(this.data.launchedAt)),this.data.closedAt&&"string"==typeof this.data.closedAt&&(this.data.closedAt=new Date(this.data.closedAt));let n=[];var e=window.SpinX.utils.getSessionWithTTL(window.SpinX.winningRewardKey);let t="";var i=window.SpinX?.campaign?.config?.announcement?.encourageUsePrize?.enabled||!1;if(i&&e?.rewardCode&&e?.rewardId&&(p=window.SpinX?.campaign?.rewards||[],d=window.SpinX?.announcement?.encourageUsePrize||{},w=window.SpinX?.site?.config?.currency?.moneyFormat||"",t=window.SpinX.utils.getWinningRewardReminder(e.rewardCode,e.rewardId,d,p,w)),"upcoming_event"===this.data.spinState?.state)if(this.data.countDownToLaunch?.enabled&&this.data.countDownToLaunch.content&&this.data.countDownToLaunch.displayHours&&lessThanSpinXHours(this.data.launchedAt,new Date,this.data.countDownToLaunch.displayHours)){let t=()=>(this.data.launchedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var e=this.shadowRoot.getElementById(this.countDownId+"-time");e&&(e.innerText=convertSpinXCountDownTime(t()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToLaunch.content.replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(t())}</span>`)}</p>`)}else this.data.upcomingEvent?.enabled&&this.data.upcomingEvent.content&&this.data.upcomingEvent.displayDays&&lessThanSpinXDays(this.data.launchedAt,new Date,this.data.upcomingEvent.displayDays)&&n.push(`<p class="${this.messageItemClass}">${this.data.upcomingEvent.content.replace(/{{TIME}}/g,formatSpinXDateTime(this.data.launchedAt))}</p>`);else if(i&&t)t.split("<newline>").forEach(e=>{n.push(`<p class="${this.messageItemClass}">${e.trim()}</p>`)});else if("ready_to_spin"===this.data.spinState?.state){e=`<img class="spinx-icon-announcement" src="${getSpinXOpenerIconUrl(this.data.openerIcon?.value)}" />`;if(this.data.countDownToClose?.enabled&&this.data.countDownToClose.content&&this.data.countDownToClose.displayHours&&lessThanSpinXHours(this.data.closedAt,new Date,this.data.countDownToClose.displayHours)){let t=()=>(this.data.closedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var e=this.shadowRoot.getElementById(this.countDownId+"-time");e&&(e.innerText=convertSpinXCountDownTime(t()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToClose.content.replace(/{{OPENER}}/g,e).replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(t())}</span>`)}</p>`)}else this.data.readyToSpin?.enabled&&this.data.readyToSpin.content&&n.push(`<p class="${this.messageItemClass}">${this.data.readyToSpin.content.replace(/{{OPENER}}/g,e)}</p>`)}let o="";n.forEach(e=>{o+=e});var a=n.map(e=>this.getDelayTime(e)),s=a.reduce((e,t)=>e+t,0);let r=[];a.reduce((e,t,n)=>(r[n]=e)+t,0);var d=`
      .spinx-announcement-container .${this.messageItemClass} {
        margin: auto;
        padding-top: 4px;
        padding-bottom: 4px;
        position: absolute;
        width: 80%;
        font-weight: 500;
        font-size: ${((this.data.contentSize||16)/this.rootSize).toFixed(2)}em;
        ${1<n.length?`opacity: 0; animation: slideUp ${s}s linear infinite both;`:"opacity: 1; transform: translateY(0%);"}
      }
      `,p=`
      @media (hover: hover) {
        .spinx-announcement-container:hover .${this.messageItemClass} {
          animation-play-state: paused !important;
        }
      }
    `;let l=d;if(1<n.length)for(let e=0;e<n.length;e++){var c=r[e]/s,m=(r[e]+a[e])/s,u=Math.max(0,m-c),h=(100*c).toFixed(4),g=(100*(c+.05*u)).toFixed(4),f=(100*(c+.9*u)).toFixed(4),c=(100*(c+.95*u)).toFixed(4),u=(100*m).toFixed(4);l=(l+=`
          @keyframes slideUp_${e} {
            0% { transform: translateY(100%); opacity: 0; }
            ${h}% { transform: translateY(100%); opacity: 0; }
            ${g}% { transform: translateY(0%);   opacity: 1; }
            ${f}% { transform: translateY(0%);   opacity: 1; }
            ${c}% { transform: translateY(-100%); opacity: 0; }
            ${u}% { transform: translateY(-100%); opacity: 0; }
            100% { transform: translateY(-100%); opacity: 0; }
          }
        `)+`
          .spinx-announcement-container .${this.messageItemClass}:nth-child(${e+1}) {
            animation-name: slideUp_${e};
            animation-duration: ${s}s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
            animation-fill-mode: both;
          }
        `}this.shadowRoot.innerHTML=`
      <style>
        .spinx-announcement-container {
          opacity: 0;
          padding: 4px;
          transition: opacity 0.5s linear;
          background-color: ${this.data.backgroundColor||"#fdc73b"};
          color: ${this.data.contentColor||"#121212"};
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: 16px;
          letter-spacing: 0.06rem;
          line-height: 1.3em;
          text-align: center;
          width: 100%;
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: fixed;
          z-index: 1000;
          ${"top"===this.data.position?"top: 0;":"bottom: 0;"}
        }

        .spinx-icon-announcement {
          width: 21px;
          height: 21px;
          vertical-align: middle;
          position: relative;
          // top: 5px;
          margin-top: -4px;
        }

        .close-button {
          color: ${this.data.contentColor||"#121212"};
          position: absolute;
          right: 8px;
          padding: 3px 12px;
          font-size: 22px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        @keyframes slideUp {
          0% {
            transform: translateY(100%);
            opacity: 0;
          }
          10% {
            transform: translateY(0%);
            opacity: 1;
          }
          45% {
            transform: translateY(0%);
            opacity: 1;
          }
          55% {
            transform: translateY(-100%);
            opacity: 0;
          }
          100% {
            transform: translateY(-100%);
            opacity: 0;
          }
        }

        ${l}
        ${p}
      </style>

      <div class="spinx-announcement-container" style="display: none">
        ${o}
        <button class="close-button">&times;</button>
      </div>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.announcementContainer=this.shadowRoot.querySelector(".spinx-announcement-container"),setTimeout(()=>{this.announcementContainer.style.opacity=1},10);this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(e=>{onSpinXElementSizeChange(e,this.resetContainerHeight.bind(this),{initial:!1})});var w=sessionStorage.getItem("hide_announcement_"+this.data.spinState?.state);"true"===w?this.hide():0<n.length&&this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedAnnouncement",{bubbles:!0,composed:!0}))},10)}show(){this.announcementContainer.style.display="flex",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))},10)}hide(){this.announcementContainer.style.display="none",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!1}))},10)}reset(){this.updateSpinState(),this.render()}resetContainerHeight(){let t=0;this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(e=>{e.offsetHeight>t&&(t=e.offsetHeight)}),this.announcementContainer.style.height=t+"px",this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))}getContainerHeight(){return this.announcementContainer?.clientHeight||0}updateSpinState(){window.SpinX.announcement.spinState={state:"scheduled"===window.SpinX.campaign.status?"upcoming_event":"ready_to_spin",rewardCode:""},this.dataset.json=JSON.stringify(window.SpinX.announcement)}close(){this.hide(),sessionStorage.setItem("hide_announcement_"+this.data.spinState?.state,"true")}getDelayTime(e){e=(new DOMParser).parseFromString(e,"text/html").body.textContent?.trim()||"";return e.length<=50?8:e.length<=100?10:12}delayMobileClick(){if(window.matchMedia("(hover: none) and (pointer: coarse)").matches){let t=this.shadowRoot.querySelectorAll("."+this.messageItemClass);t.length&&t.forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation(),t.forEach(e=>{e.style.animationPlayState="paused"}),clearTimeout(this._resumeTimer),this._resumeTimer=setTimeout(()=>{t.forEach(e=>{e.style.animationPlayState="running"})},5e3)})})}}}customElements.define("spinx-announcement",SpinXAnnouncement);class SpinXOpener extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily);var e=getSpinXOpenerIconUrl(this.data.icon?.value),t=this.data.backgroundColor||"#1D305D",n=this.data.contentColor||"#ffffff";this.shadowRoot.innerHTML=`
      <style>
        @keyframes rotateIn {
          0% {
            transform: rotate(0deg);
          }
          80% {
            opacity: 1;
          }
          100% {
            opacity: 1;
            transform: rotate(2880deg);
          }
        }

        @keyframes fadein {
          0% {
            opacity: 0;
            box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.6);
          }
          100% {
            opacity: 1;
            box-shadow: -2px 4px 8px rgba(0, 0, 0, 0.6);
          }
        }

        @keyframes contentDisplay {
          0% {
            transform: scaleX(0);
            box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.6);
          }
          100% {
            transform: scaleX(1);
            box-shadow: -2px 4px 8px rgba(0, 0, 0, 0.6);
          }
        }

        .opener-button-container {
          position: ${"preview-in-box"===this.data?.viewMode?"absolute":"fixed"};
          ${"preview-in-box"===this.data?.viewMode?"":"z-index: 1001;"}
          ${"preview-in-box"===this.data?.viewMode?"":`bottom: ${this.data.distance?.bottom?this.data.distance?.bottom+"px":"24px"};`}
          ${"left"===this.data?.position?"preview-in-box"===this.data?.viewMode?"":`left: ${this.data.distance?.left?this.data.distance.left+"px":"16px"};`:`right: ${this.data.distance?.right?this.data.distance.right+"px":"16px"};`}
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          filter: drop-shadow(0 8px 14px rgba(0, 0, 0, 0.24));
        }

        .opener-button-container[data-direction="right"] .opener-text {
          right: 62%;
        }

        .opener-button-container[data-direction="left"] .opener-text {
          left: 62%;
        }

        .opener-button {
          --size: 56px;

          width: var(--size);
          height: var(--size);
          position: relative;
          z-index: 1003;
          border-radius: 50%;
          border: 0px;
          opacity: 0;
          transition: transform 0.1s ease;
          animation: fadein 1.2s forwards ease;
          // background-color: transparent;
          background-color: ${t};
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0;
        }

        .opener-button .icon {
          --size: 50px;
          --deltaX: ${this.data.icon?.deltaX?this.data.icon.deltaX:0}px;
          --deltaY: ${this.data.icon?.deltaY?this.data.icon.deltaY:0}px;
          opacity: 0;
          transition: transform 0.1s ease;
          animation: rotateIn 1.2s forwards ease;
          width: var(--size);
          height: var(--size);
          position: relative;
          left: var(--deltaX);
          top: var(--deltaY);
          pointer-events: none;
        }

        .opener-button:hover {
          // box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.4) !important;
          transform: scale(1.05) !important;
        }

        .opener-button:active {
          transform: scale(0.95) !important;
          // box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .opener-text {
          position: absolute;
          z-index: 1002;
          bottom: 5px;
          ${"left"===this.data?.position?"border-radius: 0px 8px 8px 0px;":"border-radius: 8px 0px 0px 8px;"}
          width: auto;
          height: 47px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 16px;
          font-weight: 700;
          text-transform: uppercase;
          color: ${n};
          background-color: ${t};
          white-space: nowrap;
          transform: scaleX(0);
          transform-origin: ${this.data?.position};
          transition: 0.3s all ease;
          pointer-events: none;
        }

        .opener-text span {
          text-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
          text-stroke: 1px rgba(0, 0, 0, 0.3);
          -webkit-text-stroke: 1px rgba(0, 0, 0, 0.3);
          ${"left"===this.data?.position?"padding: 0px 15px 0px 30px;":"padding: 0px 30px 0px 15px;"}
        }

        @media only screen and (max-width: 600px) {
          .opener-text {
            display: none !important;
            animation: none;
          }

          .opener-button {
            // background-color: transparent;
            background-color: ${this.data.icon?.transparentBackground?"transparent":t};
          }

          .opener-button .icon {
            --size: ${this.data.icon?.transparentBackground?56:50}px;

            width: var(--size);
            height: var(--size);
          }
        }
      </style>

      <div class="opener-button-container" id="opener-button-container" data-direction="${this.data?.position}" style="display: none;">
        <div class="opener-text" id="opener-text"><span>${this.data?.content?this.data.content:"Spin Now"}</span></div>
        <button class="opener-button" id="opener-button">
          <img class="icon" id="opener-button-icon" src="${e}" alt="">
        </button>
      </div>
    `,this.openerContainer=this.shadowRoot.getElementById("opener-button-container"),this.openerButton=this.shadowRoot.getElementById("opener-button"),this.openerButtonIcon=this.shadowRoot.getElementById("opener-button-icon"),this.openerText=this.shadowRoot.getElementById("opener-text"),this.data?.attentionEffect.enabled?(this.openerButtonIcon.style.animation="rotateIn 2s forwards ease",this.openerText.style.animation="contentDisplay 0.8s forwards ease-out 1.2s",setInterval(()=>{this.openerButtonIcon.style.animation="none",this.openerButtonIcon.style.opacity=1,setTimeout(()=>this.openerButtonIcon.style.animation="rotateIn 2s forwards ease",100)},1e3*(this.data?.attentionEffect.intervalTime||10))):(this.openerButtonIcon.style.opacity=1,this.openerText.style.transform="scaleX(1)"),this.openerButton.addEventListener("click",()=>this.click()),this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedOpener",{bubbles:!0,composed:!0}))},10)}show(){this.openerContainer.style.display="block"}hide(){this.openerContainer.style.display="none"}click(){this.dispatchEvent(new CustomEvent("onSpinXClickOpener",{bubbles:!0,composed:!0}))}enableOpenerButton(e){this.openerButton.disabled=!e}resetBottomDistance(e){"preview-in-box"!==this.data?.viewMode&&(this.openerContainer.style.bottom=e?e+(this.data.distance?.bottomFromAnnouncement||12)+"px":`${this.data.distance?.bottom||24}px`)}}customElements.define("spinx-opener",SpinXOpener);class SpinXWelcomePopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 20px;
          max-width: 550px;
          min-height: 300px;
          max-height: 85vh;
          overflow-y: auto;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||28)/this.rootSize}em;
          font-weight: 600;
          margin-top: 0px;
          margin-bottom: 0px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||16)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||16)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin-bottom: 5px;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          border: 1px solid #333333;
          font-weight: 500;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          text-stroke: 1px rgba(0, 0, 0, 0.2);
          -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          // box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          transition:
            transform 0.15s ease-out,
            box-shadow 0.15s ease-out,
            background-color 0.15s ease-out;
        }

        .btn:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        .btn:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||16)/this.rootSize}em;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||16)/this.rootSize}em;
        }

        @media (max-width: 767px) and (orientation: portrait) {
          .modal {
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }

          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (max-height: 767px) and (orientation: landscape) {
          .modal {
            padding: 20px 20px;
          }

          #spinx-wheel-div {
            opacity: 0;
            width: 0px;
          }
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(e=document.createElement("spinx-wheel"),(t=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,e.dataset.json=JSON.stringify(t),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(e)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickWelcomePopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWelcomePopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(e){let t=getSpinXTriggerKey(e);localStorage.getItem(t)||(e=this.data.delay||10,setTimeout(()=>{localStorage.getItem(t)||(this.open(),localStorage.setItem(t,!0))},1e3*e))}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-welcome-popup",SpinXWelcomePopup);class SpinXIntentPopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 20px;
          max-width: 550px;
          min-height: 300px;
          max-height: 85vh;
          overflow-y: auto;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||24)/this.rootSize}em;
          font-weight: 600;
          margin-top: 0px;
          margin-bottom: 0px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||16)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||16)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin-bottom: 5px;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          border: 1px solid #333333;
          font-weight: 500;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          text-stroke: 1px rgba(0, 0, 0, 0.2);
          -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          // box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          transition:
            transform 0.15s ease-out,
            box-shadow 0.15s ease-out,
            background-color 0.15s ease-out;
        }

        .btn:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        .btn:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||16)/this.rootSize}em;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||16)/this.rootSize}em;
        }

        @media (max-width: 767px) and (orientation: portrait) {
          .modal {
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }

          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (max-height: 767px) and (orientation: landscape) {
          .modal {
            padding: 20px 20px;
          }

          #spinx-wheel-div {
            opacity: 0;
            width: 0px;
          }
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(e=document.createElement("spinx-wheel"),(t=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,e.dataset.json=JSON.stringify(t),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(e)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickIntentPopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedIntentPopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(e){let t=getSpinXTriggerKey(e),n=()=>{localStorage.getItem(t)||(this.open(),localStorage.setItem(t,!0))};setTimeout(()=>{var e=localStorage.getItem(t);if(!e&&(this.data.desktop&&768<window.innerWidth&&document.addEventListener("mouseout",function(e){!e.toElement&&!e.relatedTarget&&e.clientY<=10&&n()}),this.data.mobile)&&window.innerWidth<=768){window.addEventListener("popstate",function(e){n(),history.pushState(null,null,location.href)});let t=0;window.addEventListener("scroll",()=>{var e=window.pageYOffset;200<t&&e<30&&n(),t=e}),window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&n()})}},1500)}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-intent-popup",SpinXIntentPopup);class SpinXPopup extends HTMLElement{data;audio;enabledAudio=!1;popup;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var e;this.render(),window.addEventListener("resize",this.updateElementSize.bind(this)),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.backgroundMusic?.enabled&&!!this.data?.backgroundMusic?.value,this.enabledAudio&&(e=getSpinXSoundUrl(this.data.backgroundMusic.value),this.audio=new Audio(e),this.audio.loop=!0,this.audio.volume=0)}render(){this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          max-height: 100vh; /* fallback cho mi browser */
          background: #fff;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
          overflow-y: auto;
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1004;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        @supports (height: 100dvh) {
          .popup-overlay {
            max-height: 100dvh; /* override cho browser hin i (iOS 16+, Android mi, desktop modern) */
          }
        }

        .popup-overlay.fullscreen.active {
          transform: translateX(0);
        }

        // .popup-overlay.fullscreen .spin-column {
        //   padding: 120px;
        // }

        .close-button {
          color: ${this.data.title?.color||"#000000"};
          position: absolute;
          top: 10px;
          right: 10px;
          padding: 0 10px;
          font-size: 36px;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        .popup-content {
          width: 100%;
          height: 100%;
          border-radius: 8px;
          display: grid;
          align-items: center;
          position: relative;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
        }

        .popup-body {
          width: 100%;
          height: 100%;
          align-items: center;
          justify-content: center;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        .spin-column {
          padding: 0px;
          width: 100%;
          margin: auto;
        }

        .info-column {
          width: 90%;
          flex: 1;
          margin: auto;
        }

        @media (orientation: portrait) {
          .popup-overlay.active {
            transform: translateX(0);
          }

          .popup-body {
            ${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage?`background-image: url(${this.data.background.mobileBackgroundImage||this.data.background?.backgroundImage}); background-color: transparent;`:""}
          }

          .spin-column {
            width: 90%;
          }

          .info-column {
            padding: 20px 10px;
          }
        }

        // @media (max-width: 1366px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 6em;
        //     // padding-bottom: 1.5em;
        //   }
        // }

        @media (max-width: 1024px) and (orientation: portrait) {
          .spin-column {
            padding-top: 3em;
          }
        }

        // @media (max-width: 912px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 4.8em;
        //     // padding-bottom: 1em;
        //   }
        // }

        // @media (max-width: 820px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 4.5em;
        //   }
        // }

        // @media (max-width: 768px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 3em;
        //   }
        // }

        @media (max-width: 667px) and (orientation: portrait) {
          .spin-column {
            padding-top: 2em;
          }
        }

        // @media (max-width: 344px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 2.6em;
        //   }
        // }

        @media (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-28%);
          }

          .popup-body {
            display: flex;
            flex-direction: row;
            ${this.data.background?.backgroundImage?`background-image: url(${this.data.background.backgroundImage});`:""}
          }

          .spin-column {
            flex: 1.4;
            padding-left: 35em;
          }

          .info-column {
            padding: 0 10em 0 10em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            flex: 1;
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 2560px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-26%);
          }

          .spin-column {
            flex: 1.3;
            padding-left: 28em;
          }

          .info-column {
            padding: 0 8em 0 8em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 1920px) and (orientation: landscape) {
          .spin-column {
            padding-left: 24em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 0 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 6em;
          }
        }

        @media (max-width: 1728px) and (orientation: landscape) {
          .spin-column {
            padding-left: 18em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 2em 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 4em;
          }
        }

        // @media (max-width: 1680px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-30%);
        //   }
        // }

        // @media (max-width: 1536px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-28%);
        //   }
        // }

        // @media (max-width: 1440px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-26%);
        //   }
        // }

        @media (max-width: 1368px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-20%);
          }

          .spin-column {
            padding-left: 3em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 1em 0 3em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-22%);
          }
        }

        @media (max-width: 1180px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-23%);
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-24%);
          }

          .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(0%);
          }

          .spin-column {
            flex: 1;
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }

          .spin-element {
            margin: 0 auto;
          }

          .info-column {
            padding: 0 3em 0 0em;
          }
        }

        @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-column {
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }
          .spin-element {
            margin: 0 auto;
   	      }
        }

        @media (width: 882px) and (height: 344px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-element {
            width: 80%;
          }
        }

        @media (max-width: 740px) and (orientation: landscape) {
          .spin-column {
            padding: 0 1em;
          }

          .info-column {
            padding: 0 2em 0 1em;
          }
        }

        @media (max-width: 667px) and (orientation: landscape) {
          .spin-column {
            padding: 0 !important;
            transform: translateX(-30%) !important;
          }

          .info-column {
            padding: 0 !important;
            transform: translateX(-15%) !important;
          }
        }
      </style>

      <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content">
          <div class="popup-body">
            <div class="spin-column">
              <div class="spin-element"></div>
            </div>
            <div class="info-column"></div>
          </div>
        </div>
        <button class="close-button close-button-normal">&times;</button>
      </div>
    `,this.popup=this.shadowRoot.getElementById("popup-overlay"),this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedPopup",{bubbles:!0,composed:!0}))},10)}get isOpened(){return this.popup.classList.contains("active")}enableCloseButton(e){this.shadowRoot.querySelector(".close-button").disabled=!e}setSpinContent(e){this.shadowRoot.querySelector(".spin-element").replaceChildren(e)}setFormContent(e){this.shadowRoot.querySelector(".info-column").replaceChildren(e)}playAudio(e=1200){this.enabledAudio&&fadeInSpinXAudio(this.audio,e)}stopAudio(e=800){this.enabledAudio&&fadeOutSpinXAudio(this.audio,e)}open(){var e=getSpinXTriggerKey(window.SpinX.campaign.id);localStorage.getItem(e)||localStorage.setItem(e,!0),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",this.popup.classList.remove("fullscreen","halfscreen"),this.popup.classList.add("full_screen"===this.data.displayType?"fullscreen":"halfscreen"),this.popup.classList.add("active"),this.updateElementSize(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXOpenedPopup",{bubbles:!0,composed:!0}))},10),this.playAudio()}close(){setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXClosedPopup",{bubbles:!0,composed:!0}))},10),this.popup.classList.remove("active"),document.documentElement.style.overflow="",document.body.style.overflow="",this.stopAudio(),window.SpinX.components.wheel?.stopRewardAudio()}updateElementSize(){var e,t,n=this.shadowRoot.querySelector(".spin-element");n&&(t=window.innerWidth<=932&&window.matchMedia("(orientation: landscape)").matches,e=window.innerWidth<=1024&&window.innerHeight<=600&&window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(hover: none)").matches&&window.matchMedia("(pointer: coarse)").matches,t||e?(t=n.offsetHeight,n.style.marginTop=(window.innerHeight-t)/2+"px",this.forceAlwaysShowScrollbar(!0)):(n.style.marginTop="",this.forceAlwaysShowScrollbar(!1)))}forceAlwaysShowScrollbar(e){this.popup&&(e?(this.popup.style.overflowY="scroll",this.popup.style.webkitOverflowScrolling="touch",this.popup.style.scrollbarWidth="auto",this._scrollbarStyle||(this._scrollbarStyle=document.createElement("style"),this._scrollbarStyle.textContent=`
          ::-webkit-scrollbar {
            width: 6px;
          }
          ::-webkit-scrollbar-thumb {
            background: #b7b9be;
            border-radius: 2px;
          }
        `,this.shadowRoot.appendChild(this._scrollbarStyle))):(this.popup.style.overflowY="",this.popup.style.webkitOverflowScrolling="",this.popup.style.scrollbarWidth="",this._scrollbarStyle&&(this._scrollbarStyle.remove(),this._scrollbarStyle=null)))}scrollToTop(){this.popup&&this.popup.scrollTo({top:0,behavior:"smooth"})}}customElements.define("spinx-popup",SpinXPopup);class SpinXWheel extends HTMLElement{data;spinedRewardIndex=-1;audio;enabledAudio=!1;audioRewards;constructor(){super(),this.attachShadow({mode:"open"}),this.init()}connectedCallback(){var e;this.render(),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.playingMusic?.enabled&&!!this.data?.playingMusic?.value,this.enabledAudio&&(e=getSpinXSoundUrl(this.data.playingMusic.value),this.audio=new Audio(e),this.audio.volume=0),this.audioRewards={},this.data.rewards?.forEach(e=>{var t,n={enabledAudio:!1,audio:null};window.SpinX?.widgetPath&&e.config?.effectMusic?.enabled&&e.config?.effectMusic?.value&&(t=getSpinXSoundUrl(e.config.effectMusic.value),n.enabledAudio=!0,n.audio=new Audio(t)),this.audioRewards[e.id]=n})}init(){this.width=this.getAttribute("width")||1e3,this.height=this.getAttribute("height")||1e3,this.defaultSize=42,this.stickerAngle=45,this.angleOffset=0,this.isSpinning=!1,this.isSpinningClass="is-spinning",this.tickerAnim,this.currentSlice=0}render(){this.data=JSON.parse(this.dataset.json),this.rewardAngle=this.data.rewards?.length?360/this.data.rewards?.length:0,this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
        }

        #container {
          width: 100%;
          aspect-ratio: 1 / 1;
          position: relative;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: ${this.data.contentSize||this.defaultSize}px;
          overflow: hidden;
        }

        canvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }

        .ticker {
          ${this.data.sticker.hidden?"display: none;":""}
          position: absolute;
          width: 7%;
          height: 15%;
          top: 7%;
          right: 8%;
          transform-origin: 50% 30%;
          transform: translate(0, 0) rotate(${this.stickerAngle}deg);
          pointer-events: none;
          filter: drop-shadow(4px 4px 4px rgba(0, 0, 0, 0.6));
        }

        .${this.isSpinningClass} .ticker {
          animation: tick 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes tick {
          40% {
            transform: translate(0, 0) rotate(20deg);
          }
        }

        @media (orientation: portrait) {
          #container {
            width: 85%;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          #container {
            width: 90%;
          }
        }
      </style>

      <div id="container"></div>
    `,this.container=this.shadowRoot.getElementById("container"),this.wheel=document.createElement("canvas"),this.wheel.classList.add("wheel"),this.wheel.width=this.width,this.wheel.height=this.height,this.renderWheelCanvas(),this.data.circleCenter?.displayed?(this.circle=document.createElement("canvas"),this.circle.classList.add("circle"),this.circle.width=this.width,this.circle.height=this.height,this.renderCircleCanvas()):this.circle=null;var e=document.createElement("div");e.innerHTML=`
      <svg class="ticker" viewBox="55 0 190 300" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M71.8615 145.363C82.9061 180.684 121.428 288.612 149.699 288.611C177.97 288.611 216.491 180.684 227.536 145.363C247.489 81.5512 222.41 11.0005 149.699 11.0005C76.9872 11.0005 51.9081 81.5512 71.8615 145.363Z" fill="${this.data.sticker?.backgroundColor||"#CCCCCC"}"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="${"line"===this.data.sticker?.borderType?"M67.0663 50.5022C81.3603 22.0419 109.079 2.00046 149.699 2.00046C190.319 2.00046 218.038 22.0419 232.332 50.5022C246.376 78.4655 247.496 114.328 237.019 147.833C231.434 165.693 218.917 201.883 204.161 233.737C196.806 249.614 188.715 264.809 180.451 276.172C176.332 281.836 171.908 286.918 167.203 290.677C162.625 294.334 156.681 297.611 149.699 297.611C142.717 297.611 136.773 294.334 132.195 290.677C127.49 286.919 123.066 281.837 118.947 276.173C110.683 264.81 102.592 249.614 95.2373 233.738C80.4807 201.884 67.9636 165.693 62.3787 147.833C51.9022 114.328 53.0219 78.4655 67.0663 50.5022ZM149.699 288.611C121.428 288.612 82.9063 180.684 71.8617 145.363C51.9083 81.5512 76.9874 11.0005 149.699 11.0005C222.411 11.0005 247.49 81.5512 227.536 145.363C216.492 180.684 177.97 288.611 149.699 288.611Z":""}"  fill="${"line"===this.data.sticker?.borderType&&this.data.sticker.borderColor?this.data.sticker.borderColor:"#CCCCCC"}"/>
      </svg>
    `,this.ticker=e.firstElementChild,this.container.append(this.wheel,this.circle||"",this.ticker),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWheel",{bubbles:!0,composed:!0}))},10)}darkenHex(e,t){e=parseInt(e.slice(1),16);return"#"+(Math.max(0,(e>>16)-t)<<16|Math.max(0,(e>>8&255)-t)<<8|Math.max(0,(255&e)-t)).toString(16).padStart(6,"0")}drawRewardText(r,d){var e=this.width/2,t=e-48;let p=.45*e;var n=this.data.contentSize||this.defaultSize||32;let i=n;var o=e=>{r.font=`bold ${e}px "${this.data.fontFamily}"`;e=d.replace(/\n+/g," \n ").split(" ");let t=[],n="";var i,o=()=>{n.trim()&&(t.push(n.trim()),n="")};for(i of e)if("\n"===i)o();else if(r.measureText(i).width>p){let e="";for(var a of i)r.measureText(e+a).width>p?e&&(t.push(e),e=a):e+=a;e&&(s=(n+" "+e).trim(),n=r.measureText(s).width<=p?s:(o(),e))}else{var s=(n+" "+i).trim();n=r.measureText(s).width<=p?s:(o(),i)}return o(),t};let a=o(i);for(;4<a.length&&i>Math.max(10,n-8);)--i,a=o(i);r.textAlign="right",r.textBaseline="middle",r.font=`bold ${i}px "${this.data.fontFamily}"`;var s=Math.round(1.15*i),l=Math.min(a.length,4),c=-(l-1)*s/2;for(let e=0;e<l;e++)r.fillText(a[e],t,c+e*s)}renderWheelCanvas(){let i=this.wheel.getContext("2d"),o=this.width/2;if(i.clearRect(0,0,this.width,this.height),"line"===this.data.borderAround?.type&&(i.beginPath(),i.arc(o,o,o-10,0,2*Math.PI),i.lineWidth=10,i.strokeStyle=this.data.borderAround.color||"#CCCCCC",i.stroke()),this.data.rewards?.length){let n=2*Math.PI/this.data.rewards.length;this.data.rewards?.forEach((e,t)=>{"auto_darken"===this.data.borderAround?.type&&(i.beginPath(),i.moveTo(o,o),i.arc(o,o,o,n*t+this.angleOffset,n*(t+1)+this.angleOffset),i.closePath(),i.fillStyle=this.darkenHex(e.config?.backgroundColor,20),i.fill()),i.beginPath(),i.moveTo(o,o),i.arc(o,o,o-13,n*t+this.angleOffset,n*(t+1)+this.angleOffset),i.closePath(),i.fillStyle=e.config?.backgroundColor,i.fill(),this.data.rewardBorder?.displayed&&(i.strokeStyle=this.data.rewardBorder.color,i.lineWidth=2,i.stroke()),i.save(),i.translate(o,o),i.rotate(n*t+n/2+this.angleOffset),i.textAlign="right",i.fillStyle=e.config?.contentColor||"#000000",i.font=`bold ${this.data.contentSize||this.defaultSize}px "${this.data.fontFamily}"`,this.drawRewardText(i,e.name),i.restore()})}else{var e=2*Math.PI;i.beginPath(),i.moveTo(o,o),i.arc(o,o,o-13,this.angleOffset,e+this.angleOffset),i.closePath(),i.fillStyle="#CCCCCC",i.fill()}this.wheel.style.transform="rotate(0deg)",this.wheel.style.transition="transform 15s cubic-bezier(0.20, 0.1, 0.20, 1)",this.wheel.addEventListener("transitionend",this.onTransitionend.bind(this))}renderCircleCanvas(){var e=this.circle.getContext("2d"),t=this.width/2;e.clearRect(0,0,this.width,this.height),e.beginPath(),e.arc(t,t,t/6,0,2*Math.PI),e.fillStyle=this.data.circleCenter?.backgroundColor||"#CCCCCC",e.fill(),"line"===this.data.circleCenter?.borderType&&(e.lineWidth=5,e.strokeStyle=this.data.circleCenter.borderColor||"#CCCCCC",e.stroke())}playAudio(e=200){this.enabledAudio&&fadeInSpinXAudio(this.audio,e)}stopAudio(e=200){this.enabledAudio&&fadeOutSpinXAudio(this.audio,e)}playRewardAudio(e=200){var t;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(t=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeInSpinXAudio(t.audio,e)}stopRewardAudio(e=800){var t;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(t=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeOutSpinXAudio(t.audio,e)}spin(t){if(t&&!this.isSpinning&&(this.isSpinning=!0,this.spinedRewardIndex=this.data.rewards.findIndex(e=>e.id===t),-1!==this.spinedRewardIndex)){this.playAudio(),this.dispatchEvent(new CustomEvent("onSpinXStartSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.container.classList.add(this.isSpinningClass),this.ticker.style.animation="none",this.runTickerAnimation();var n=this.spinedRewardIndex*this.rewardAngle,i=(this.spinedRewardIndex+1)*this.rewardAngle;let e=Math.round(Math.random()*(i-n)+n);0!==e&&e%this.rewardAngle!=0||e--;i=3600-e-this.stickerAngle;this.wheel.style.transform=`rotate(${i}deg)`}}onTransitionend(){cancelAnimationFrame(this.tickerAnim),this.container.classList.remove(this.isSpinningClass),this.dispatchEvent(new CustomEvent("onSpinXEndSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.stopAudio(),this.playRewardAudio(),setTimeout(()=>{this.stopRewardAudio()},15e3)}runTickerAnimation=()=>{var e=window.getComputedStyle(this.wheel).transform.split("(")[1].split(")")[0].split(","),t=e[0];let n=Math.atan2(e[1],t);n<0&&(n+=2*Math.PI);e=Math.round(n*(180/Math.PI)),t=Math.floor((e+this.stickerAngle)/this.rewardAngle);this.currentSlice!==t&&(this.ticker.style.animation="none",setTimeout(()=>this.ticker.style.animation=null,10),this.currentSlice=t),this.tickerAnim=requestAnimationFrame(this.runTickerAnimation.bind(this))}}customElements.define("spinx-wheel",SpinXWheel);class SpinXForm extends HTMLElement{data;reward;rewardCode;isLogin=!1;container;logoContainer;spinxForm;formTitle;formContent;formContentAccount;formFields;formError;formAgreementContainer;formAgreement;formSpinButton;spinxResult;resultMessageTitle;resultMessageContent;resultCode;spinxFormFooter;copyButton;copyTooltip;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);var e=this.data.content?.size||24;window.SpinX.participant?.email&&(this.isLogin=!0),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.data.textInput||(this.data.textInput={}),this.data.textInput.color||(this.data.textInput.color="#000000"),this.data.textInput.backgroundColor||(this.data.textInput.backgroundColor="#FFFFFF"),this.data.textInput.placeholderColor||(this.data.textInput.placeholderColor="#757575"),this.shadowRoot.innerHTML=`
      <style>
        #spinx-container {
          text-align: left;
          padding: 0.5em 0.5em;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        #spinx-form, #spinx-result {
          opacity: 0;
          transition: opacity 0.8s ease;
        }

        #spinx-form.show, #spinx-result.show {
          opacity: 1;
        }

        #spinx-form.hidden, #spinx-result.hidden {
          display: none;
        }

        #spinx-logo-container {
          margin-bottom: 1em;
          display: none;
        }

        #spinx-logo-container img {
          height: 8em;
        }

        #spinx-form-title {
          margin: 0;
          margin-bottom: 0.5em;
          line-height: 1.2em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||36)/this.rootSize}em;
          font-weight: 600;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-form-content {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${e/this.rootSize}em;
        }

        #spinx-form-content-account {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.contentForExistingAccount?.color};
          font-size: ${(this.data.contentForExistingAccount?.size||24)/this.rootSize}em;
        }

        #spinx-form-fields {
          margin-bottom: 1em;
        }

        #spinx-form-fields p {
          margin: 0;
        }

        #spinx-form-fields input[type="text"], #spinx-form-fields input[type="email"] {
          width: 100%;
          padding: ${10/this.rootSize}em;
          margin: 5px 0;
          box-sizing: border-box;
          line-height: 1.3em;
          font-size: ${e/(this.rootSize+4)}em;
        }

        #spinx-form-fields input[type="text"].error, #spinx-form-fields input[type="email"].error {
          border: 2px red solid;
        }

        .spinx-form-field-item {
          background-color: ${this.data.textInput?.backgroundColor};
          color: ${this.data.textInput?.color};
          outline: none;
          box-shadow: none;
          border: 0;
        }

        /* Chrome, Safari, Edge */
        .spinx-form-field-item::-webkit-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Firefox 19+ */
        .spinx-form-field-item::-moz-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* IE 10-11 */
        .spinx-form-field-item:-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Microsoft Edge Legacy */
        .spinx-form-field-item::-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }

        #spinx-form-error {
          display: none;
          opacity: 0;
          transition: opacity 0.5s ease;
          margin: 0.5em 0 1.5em 0;
          color: red;
          background-color: white;
        }

        #spinx-form-error.show {
          display: block;
          opacity: 1;
          padding: 8px 12px;
        }

        #spinx-form-agreement-container {
          color: ${this.data.content?.color};
          font-size: 16px;
          margin: 20px 0 15px 0;
        }

        #spinx-form-agreement {
          line-height: 1.3em;
          width: ${e/(1.2*this.rootSize)}em;
          height: ${e/(1.2*this.rootSize)}em;
          vertical-align: middle;
          cursor: pointer;
        }

        #spinx-form-agreement-container label {
          line-height: 1.3em;
          font-size: ${e/(1.2*this.rootSize)}em;
          vertical-align: middle;
          cursor: pointer;
        }

        // #spinx-form-agreement-container label.error {
        //   color: red;
        // }

        .flash {
          color: red;
          transition: color 0.25s ease-in-out;
        }

        #spinx-form-spin-button {
          width: 100%;
          color: ${this.data.spinButton?.color};
          background-color: ${this.data.spinButton?.backgroundColor};
          font-size: ${(this.data.spinButton?.size||24)/this.rootSize}em;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-weight: 500;
          padding: 12px 16px;
          border: none;
          text-decoration: none;
          cursor: pointer;
          text-stroke: 1px rgba(0, 0, 0, 0.2);
          -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          // box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          transition:
            transform 0.15s ease-out,
            box-shadow 0.15s ease-out,
            background-color 0.15s ease-out;
        }

        #spinx-form-spin-button:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        #spinx-form-spin-button:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        #spinx-form-spin-button[disabled="true"] {
          color: ${this.data.spinButton?.color} !important;
          background-color: #808080 !important;
          cursor: not-allowed !important;
          box-shadow: none !important;
          transform: none !important;
        }

        #spinx-result-message-title {
          margin: 0;
          margin-bottom: 5px;
          font-weight: 600;
          line-height: 1.3em;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-result-message-content {
          margin: 0.5em 0 1.5em 0;
          line-height: 1.3em;
        }

        #spinx-result-code input[type="text"] {
          font-size: ${e/this.rootSize}em;
          width: 100%;
          text-align: center;
          padding: 12px 40px 12px 12px;
          margin: 8px 0;
          font-weight: 600;
          letter-spacing: 2px;
          box-sizing: border-box;
        }

        #spinx-form-footer {
          margin: 24px 0 10px 0;
          text-align: center;
          color: ${this.data.footerContent?.color};
          font-size: ${(this.data.footerContent?.size||24)/this.rootSize}em;
        }

        #spinx-result-code {
          position: relative;
        }

        #copy-btn {
          cursor: pointer;
          position: absolute;
          right: 4px;
          top: 50%;
          transform: translateY(-50%);
          padding: 8px 10px 0px 10px;
          font-size: 18px;
          user-select: none;
        }

        #copy-tooltip {
          position: absolute;
          top: -25px;
          right: 10px;
          background-color: #4CAF50;
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          opacity: 0;
          transition: opacity 0.3s ease;
          pointer-events: none;
        }

        @media (orientation: portrait) {
          #spinx-container {
            text-align: center;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 11em;
          }

          #spinx-container {
            padding: 0 3.5em;
          }
        }

        @media (max-width: 912px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 10em;
          }

          #spinx-container {
            padding: 0 3em;
          }
        }

        @media (max-width: 820px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 9em;
          }

          #spinx-container {
            padding: 0 2.5em;
          }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          // #spinx-logo-container img {
          //   height: 8em;
          // }

          #spinx-container {
            padding: 0 2em;
          }
        }

        @media (max-width: 600px) and (orientation: portrait) {
          // #spinx-container {
          //   padding: 10px 0px;
          // }

          #spinx-logo-container img {
            height: 8em;
          }
        }

        @media (max-width: 540px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 6em;
          }

          #spinx-container {
            padding: 0 1em;
          }
        }

        // @media (max-width: 480px) and (orientation: portrait) {
        //   #spinx-container {
        //     padding: 10px 0px;
        //   }
        // }

        @media (max-width: 430px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 0.5em;
          }

          #spinx-form-content, #spinx-form-content-account {
            margin: 0.5em 0 0.8em 0;
          }

          #spinx-form-fields {
            margin-bottom: 0px;
          }

          #spinx-form-agreement-container {
            // line-height: 1em;
            // font-size: 12px;
          }

          #spinx-form-agreement {
            // line-height: 1.3em;
            // top: 0.1em;
          }
        }

        @media (max-width: 390px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 5.5em;
          }
        }

        @media (max-width: 375px) and (orientation: portrait) {
          #spinx-container {
            padding: 0;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }

          #spinx-logo-container img {
            height: 6em;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }

          // #spinx-logo-container img {
          //   height: 6em;
          // }
        }

        @media (max-width: 740px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
            font-size: 13px;
          }
        }
      </style>

      <div id="spinx-container">
        <div id="spinx-logo-container"></div>
        <div id="spinx-form">
          <p id="spinx-form-title"></p>
          <p id="spinx-form-content"></p>
          <p id="spinx-form-content-account"></p>
          <div id="spinx-form-fields"></div>
          <p id="spinx-form-error"></p>
          <p id="spinx-form-agreement-container">
            <input type="checkbox" id="spinx-form-agreement" name="agreement" value="true">
            <label for="spinx-form-agreement"></label>
          </p>
          <button id="spinx-form-spin-button"></button>
          <p id="spinx-form-footer"></p>
        </div>
        <div id="spinx-result">
          <p id="spinx-result-message-title"></p>
          <p id="spinx-result-message-content"></p>
          <p id="spinx-result-code">
            <input name="reward-code" type="text" value="" readonly="true" />
            <span id="copy-btn" title="Copy to clipboard">
              <svg width="36" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M589.3 260.9v30H371.4v-30H268.9v513h117.2v-304l109.7-99.1h202.1V260.9z" fill="#E1F0FF"></path>
                  <path d="M516.1 371.1l-122.9 99.8v346.8h370.4V371.1z" fill="#E1F0FF"></path>
                  <path d="M752.7 370.8h21.8v435.8h-21.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h277.3v21.8H495.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h21.8v124.3h-21.8z" fill="#446EB1"></path>
                  <path d="M397.7 488.7l-15.4-15.4 113.5-102.5 15.4 15.4z" fill="#446EB1"></path>
                  <path d="M382.3 473.3h135.3v21.8H382.3z" fill="#446EB1"></path>
                  <path d="M382.3 479.7h21.8v348.6h-21.8zM404.1 806.6h370.4v21.8H404.1z" fill="#446EB1"></path>
                  <path d="M447.7 545.1h261.5v21.8H447.7zM447.7 610.5h261.5v21.8H447.7zM447.7 675.8h261.5v21.8H447.7z" fill="#6D9EE8"></path>
                  <path d="M251.6 763h130.7v21.8H251.6z" fill="#446EB1"></path>
                  <path d="M251.6 240.1h21.8v544.7h-21.8zM687.3 240.1h21.8v130.7h-21.8zM273.4 240.1h108.9v21.8H273.4z" fill="#446EB1"></path>
                  <path d="M578.4 240.1h130.7v21.8H578.4zM360.5 196.5h21.8v108.9h-21.8zM382.3 283.7h196.1v21.8H382.3zM534.8 196.5h65.4v21.8h-65.4z" fill="#446EB1"></path>
                  <path d="M360.5 196.5h65.4v21.8h-65.4zM404.1 174.7h152.5v21.8H404.1zM578.4 196.5h21.8v108.9h-21.8z" fill="#446EB1"></path>
                </g>
              </svg>
            </span>
            <span id="copy-tooltip">Copied!</span>
          </p>
        </div>
      </div>

      <style>
        ${this.data.styleContent}
      </style>
    `,this.container=this.shadowRoot.getElementById("spinx-container"),this.logoContainer=this.shadowRoot.getElementById("spinx-logo-container"),this.spinxForm=this.shadowRoot.getElementById("spinx-form"),this.formTitle=this.shadowRoot.getElementById("spinx-form-title"),this.formContent=this.shadowRoot.getElementById("spinx-form-content"),this.formContentAccount=this.shadowRoot.getElementById("spinx-form-content-account"),this.formFields=this.shadowRoot.getElementById("spinx-form-fields"),this.formError=this.shadowRoot.getElementById("spinx-form-error"),this.formAgreementContainer=this.shadowRoot.getElementById("spinx-form-agreement-container"),this.formAgreement=this.shadowRoot.getElementById("spinx-form-agreement"),this.formAgreementLabel=this.formAgreementContainer.getElementsByTagName("label")[0],this.formSpinButton=this.shadowRoot.getElementById("spinx-form-spin-button"),this.spinxResult=this.shadowRoot.getElementById("spinx-result"),this.resultMessageTitle=this.shadowRoot.getElementById("spinx-result-message-title"),this.resultMessageContent=this.shadowRoot.getElementById("spinx-result-message-content"),this.resultCode=this.shadowRoot.getElementById("spinx-result-code"),this.resultCodeInput=this.resultCode.getElementsByTagName("input")[0],this.spinxFormFooter=this.shadowRoot.getElementById("spinx-form-footer"),this.copyButton=this.shadowRoot.getElementById("copy-btn"),this.copyTooltip=this.shadowRoot.getElementById("copy-tooltip"),this.generateContents(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedForm",{bubbles:!0,composed:!0}))},10)}showSpinXForm(e=!0){e?(this.spinxForm.classList.remove("hidden"),this.spinxResult.classList.add("hidden"),this.spinxResult.classList.remove("show"),setTimeout(()=>this.spinxForm.classList.add("show"),10)):(this.spinxForm.classList.add("hidden"),this.spinxResult.classList.remove("hidden"),this.spinxForm.classList.remove("show"),setTimeout(()=>this.spinxResult.classList.add("show"),10))}generateMinAttribute(e){return e&&["text","email","number"].includes(e.type)&&null!=e.min?"number"===e.type?`min="${e.min}"`:`minLength="${e.min}"`:""}generateMaxAttribute(e){return e&&["text","email","number"].includes(e.type)&&null!=e.max?"number"===e.type?`max="${e.max}"`:`maxLength="${e.max}"`:""}generateFields(){let t="";return this.reward||this.data.fields?.forEach(e=>{t+=`<p><input id="spinx-form-${e.name}" class="spinx-form-field-item" name="${e.name}" autocomplete="${e.name}" placeholder="${e.placeholder||e.label}" type="${e.type}" required="${e.required}" ${this.generateMinAttribute(e)} ${this.generateMaxAttribute(e)} /></p>`}),t}generateContents(){this.data.showLogo?.enabled&&window.SpinX.site?.config?.logo?.url&&(this.logoContainer.style.display="block",this.logoContainer.innerHTML=`<img src="${window.SpinX.site.config.logo.url}" alt="${window.SpinX.site.name}">`),this.reward?(this.showSpinXForm(!1),this.resultMessageTitle.innerText=this.reward.config?.message?.title?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageContent.innerText=this.reward.config?.message?.content?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageTitle.style.color=this.reward.config?.message?.title?.color,this.resultMessageTitle.style.fontSize=this.reward.config?.message?.title?.size/this.rootSize+"em",this.resultMessageContent.style.color=this.reward.config?.message?.content?.color,this.resultMessageContent.style.fontSize=this.reward.config?.message?.content?.size/this.rootSize+"em","none"!==this.reward.type?this.resultCodeInput.value=this.rewardCode:(this.resultCodeInput.style.display="none",this.copyButton.style.display="none",this.copyTooltip.style.display="none")):(this.showSpinXForm(),this.formTitle.innerText=this.data.title?.text||"",this.isLogin?(this.formContent.style.display="none",this.formFields.style.display="none",this.formContentAccount.style.display="block",this.formContentAccount.innerHTML=escapeHtml(this.data.contentForExistingAccount?.text||"").replace(/{{NAME}}/g,`<b>${getSpinXParticipantName(window.SpinX.participant)||"Unknown"}</b>`)||""):(this.formContent.style.display="block",this.formFields.style.display="block",this.formContentAccount.style.display="none",this.formContent.innerText=this.data.content?.text||"",this.formFields.innerHTML=this.generateFields()),this.formAgreementLabel.innerText=this.data.agreement,this.formSpinButton.innerText=this.data.spinButton?.text||"",this.spinxFormFooter.innerText=this.data.footerContent?.text||"",this.registerEvents())}handleCopyCode(){this.copyButton.addEventListener("click",()=>{var e=this.resultCodeInput;e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value).then(()=>{let e=this.copyTooltip;e.style.opacity=1,setTimeout(()=>{e.style.opacity=0},2e3)})})}enableFormInputs(t){this.isLogin||this.data.fields.forEach(e=>{e=this.shadowRoot.getElementById("spinx-form-"+e.name);t?e.removeAttribute("readonly"):e.setAttribute("readonly",!0)}),t?(this.formAgreement.removeAttribute("disabled"),this.formSpinButton.removeAttribute("disabled")):(this.formAgreement.setAttribute("disabled",!0),this.formSpinButton.setAttribute("disabled",!0))}registerEvents(){this.isLogin||this.data.fields?.forEach(e=>{let t=this.shadowRoot.getElementById("spinx-form-"+e.name);t.addEventListener("change",()=>{e.value=t.value,["text","email"].includes(e.type)&&e.max&&e.value.length>e.max&&(e.value=e.value.substring(0,e.max))})}),this.formSpinButton.addEventListener("click",()=>{if(this.validateForm())if(this.formAgreement.checked){let e={};var t,n,i;this.isLogin?e={...window.SpinX.participant}:"first-name_last-name_email"===this.data.formTemplate?(n=this.shadowRoot.getElementById("spinx-form-first-name"),i=this.shadowRoot.getElementById("spinx-form-last-name"),t=this.shadowRoot.getElementById("spinx-form-email"),e.firstName=n.value,e.lastName=i.value,e.email=t.value):(n=this.shadowRoot.getElementById("spinx-form-name"),i=this.shadowRoot.getElementById("spinx-form-email"),e.firstName=n.value,e.lastName="",e.email=i.value),e.locale=window.SpinX.locale,setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXSpin",{bubbles:!0,composed:!0,detail:e}))},10)}else this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash"),setTimeout(()=>{this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash"),setTimeout(()=>{this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash")},1500)},50)},200)},50)},200)})}validateField(e){this.formError.classList.remove("show");let t=!(this.formError.innerText="");var n=this.shadowRoot.getElementById("spinx-form-"+e.name);return n.classList.remove("error"),"name"===e.name?e.required&&!e.value&&(t=!1,this.formError.innerText=e.messages?.required||""):"email"===e.name&&(e.required&&!e.value?(t=!1,this.formError.innerText=e.messages?.required||""):/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value)||(t=!1,this.formError.innerText=e.messages?.type||"")),this.formError.innerText&&(this.formError.classList.add("show"),n.classList.add("error")),t}validateForm(){let t=!0;if(!this.isLogin&&this.data.fields?.length)for(let e=0;e<this.data.fields.length;e++){var n=this.data.fields[e];if(!(t=this.validateField(n)))break}return t}showError(e){this.formError.innerText="",this.formError.classList.remove("show"),e&&(this.formError.innerText=e,this.formError.classList.add("show"))}showReward(e,t){this.reward=e,this.rewardCode=t,this.generateContents(),this.handleCopyCode()}}async function initSpinXApp(o,a){if(removeSpinXWelcomePopup(),removeSpinXIntentPopup(),removeSpinXPopup(),removeSpinXOpener(),removeSpinXAnnouncement(),!checkSpinXAppHidden(o?.config?.excludeUrls||[])&&["scheduled","launching"].includes(o?.status)){var t,n=await readSpinXJson(getSpinXThemeDataUrl(o.config?.theme?.value));if(checkSpinXAnnouncementBarEnable(o)&&(window.SpinX.announcement=combineSpinXAnnouncementData(o,n)),"launching"===o?.status){window.SpinX.popup=combineSpinXPopupData(o,n),window.SpinX.wheel=combineSpinXWheelData(o,n),checkSpinXOpenerEnable(o)&&(window.SpinX.opener=combineSpinXOpenerData(o,n));let e=initSpinXPopup(window.SpinX.popup,t=>{var e=initSpinXWheel(window.SpinX.wheel,e=>{t.scrollToTop(),window.SpinX.components.opener?.enableOpenerButton(!1),window.SpinX.components.popup.enableCloseButton(!1),window.SpinX.components.popup.stopAudio(200)},e=>{window.SpinX.components.popup.enableCloseButton(!0),window.SpinX.components.opener?.enableOpenerButton(!0);var e=e.detail.reward,t=window.SpinX.winningReward?.code;e&&t?(window.SpinX.components.form.showReward(e,t),window.SpinX.winningReward={...window.SpinX.winningReward,id:e.id,name:e.name,type:e.type},window.SpinX.utils.setSessionWithTTL(window.SpinX.winningRewardKey,{rewardId:e.id,rewardCode:t},9e5),checkSpinXAnnouncementBarEnable(o)&&window.SpinX.components.announcement.reset()):window.SpinX.utils.removeSessionWithTTL(window.SpinX.winningRewardKey)}),e=(window.SpinX.components.wheel=e,t.setSpinContent(e),initSpinXForm(window.SpinX.popup,async e=>{e=e.detail;if(window.SpinX.components.form.enableFormInputs(!1),"function"==typeof a?.spin){window.SpinX.components.form.showError();try{var t=await a.spin(o.id,e);if(!t?.rewardId)throw new Error("Sorry, something went wrong. Please try it again!");window.SpinX.winningReward={code:t.rewardCode},window.SpinX.components.wheel.spin(t.rewardId)}catch(e){window.SpinX.components.form.showError(e.message),window.SpinX.components.form.enableFormInputs(!0)}}}));window.SpinX.components.form=e,t.setFormContent(e)},e=>{var t,n,i;"function"!=typeof a?.view||window.SpinX.winningReward?.code||(t=getSpinXViewTrackingKey(o.id),(t=localStorage.getItem(t))&&(n=Date.now(),i=a.viewTrackingDelayMS??6e4,n-parseInt(t)<i))||(a.view(o.id,{pageTemplate:window.SpinX.pageTemplate,urlPath:location.pathname,email:window.SpinX.participant?.email||null}),localStorage.setItem(getSpinXTriggerKey(o.id),!0),localStorage.setItem(getSpinXViewTrackingKey(o.id),Date.now()))});window.SpinX.components.popup=e,checkSpinXOpenerEnable(o)&&(t=initSpinXOpener(window.SpinX.opener,void 0,()=>{e&&(e.isOpened?e.close():e.open())}),window.SpinX.components.opener=t),checkSpinXWelcomePopupEnable(o)&&(window.SpinX.delayedDisplay=combineDelayedDisplayData(o,n),t=initSpinXWelcomePopup(window.SpinX.delayedDisplay,e=>{e.registerPopupTrigger(o.id)},()=>{!e||e.isOpened||e.open()}),window.SpinX.components.welcomePopup=t),checkSpinXIntentPopupEnable(o)&&(window.SpinX.exitIntent=combineExitIntentData(o,n),t=initSpinXIntentPopup(window.SpinX.exitIntent,e=>{e.registerPopupTrigger(o.id)},()=>{!e||e.isOpened||e.open()}),window.SpinX.components.intentPopup=t)}if(checkSpinXAnnouncementBarEnable(o)){let t=initSpinXAnnouncement(window.SpinX.announcement,void 0,e=>{checkSpinXOpenerEnable(o)&&(e.detail&&"bottom"===window.SpinX.announcement.position?(e=t.getContainerHeight(),window.SpinX.components.opener?.resetBottomDistance(e)):window.SpinX.components.opener?.resetBottomDistance(0))});window.SpinX.components.announcement=t}}}customElements.define("spinx-form",SpinXForm);