window.SpinX=window.SpinX||{locale:null,site:null,campaign:null,participant:null,opener:null,wheel:null,popup:null,announcement:null,components:{opener:null,wheel:null,popup:null,form:null,welcomePopup:null,intentPopup:null,announcement:null},winningReward:{id:null,name:null,type:null,code:null},utils:{}},window.SpinX.version="v1.0.25",window.SpinX.isDevelopment=!1,window.SpinX.widgetPath="https://cdn.jsdelivr.net/gh/eplugin-io/spinx"+(window.SpinX.version?"@"+window.SpinX.version:""),window.SpinX.disableAutoTriggerPopupKey="spinx-disabled-auto-trigger-popup",window.SpinX.winningRewardKey="spinx-wheel-winning-reward",window.SpinX=window.SpinX||{},window.SpinX.catalog={name:"SpinX Catalog",description:"A collection of themes for SpinX widgets.",categories:[{id:"classic",name:"Classic",prefix:"CLS_",path:"/catalog/classic/category.json",count:30,tags:["classic"],published:!0},{id:"halloween",name:"Halloween",prefix:"HLW_",path:"/catalog/halloween/category.json",count:3,tags:["event","halloween","october"],published:!0},{id:"black_friday",name:"Black Friday",prefix:"BFD_",path:"/catalog/black_friday/category.json",count:3,tags:["event","black friday","november"],published:!0},{id:"christmas",name:"Christmas",prefix:"CHR_",path:"/catalog/christmas/category.json",count:3,tags:["event","christmas","december"],published:!0}]},window.SpinX=window.SpinX||{},window.SpinX.utils=window.SpinX.utils||{},window.SpinX.utils.getCustomizedData=function(t,e,n="value",i){return i||(t?.customized&&null!=t[n]?t[n]:e&&Object.hasOwn(e,n)?e[n]:e)},window.SpinX.utils.getRewardTypeDefault=function(t,e){e=e.rewardTypes;let n;return e&&("none"===t.type?n=e.none:"discount_code"===t.type?n=e.discountCode:"free_shipping"===t.type?n=e.freeShipping:"free_gift"===t.type&&(n=e.freeGift)),n},window.SpinX.utils.getRewardEffectMusic=function(t,e){return(null==t.config?.effectMusic?.enabled||t.config?.effectMusic?.enabled&&!t.config?.effectMusic?.value?window.SpinX.utils.getRewardTypeDefault(t,e):t.config)?.effectMusic},window.SpinX.utils.getCustomizedRewardMessage=function(t,e,n,i){var e=e.config?.popup||{},o=n?.popup,n=window.SpinX.utils.getRewardTypeDefault(t,n);return{title:{text:window.SpinX.utils.getCustomizedData(t.config?.message?.title,n?.message?.title,"text",i?.messageTitle),size:Number(window.SpinX.utils.getCustomizedData(t.config?.message?.title,window.SpinX.utils.getCustomizedData(e.title,o?.title,"size"),"size")),color:window.SpinX.utils.getCustomizedData(t.config?.message?.title,window.SpinX.utils.getCustomizedData(e.title,o?.title,"color"),"color")},content:{text:window.SpinX.utils.getCustomizedData(t.config?.message?.content,n?.message?.content,"text",i?.messageContent),size:Number(window.SpinX.utils.getCustomizedData(t.config?.message?.content,window.SpinX.utils.getCustomizedData(e.content,o?.content,"size"),"size")),color:window.SpinX.utils.getCustomizedData(t.config?.message?.content,window.SpinX.utils.getCustomizedData(e.content,o?.content,"color"),"color")}}},window.SpinX.utils.getCustomizedResourceUrl=function(t,e,n){return t&&e?.url?e.url:n?.path?""+window.SpinX.widgetPath+n.path:null},window.SpinX.utils.getCurrentLocale=function(t){var e=window.SpinX.locale,t=t.config||{};return e&&t.multiLanguage?.enabled&&Object.hasOwn(t.multiLanguage.langs||{},e)?t.multiLanguage.langs[e]:null},window.SpinX.utils.getThemeCateId=function(e){return window.SpinX.catalog.categories.find(t=>e?.startsWith(t.prefix))?.id||"classic"},window.SpinX.utils.getThemeDataUrl=function(t){var e=window.SpinX.utils.getThemeCateId(t);return window.SpinX.widgetPath+`/catalog/${e}/themes/${t}/theme.json`},window.SpinX.utils.getOpenerIconUrl=function(t){var e=window.SpinX.utils.getThemeCateId(t);return window.SpinX.widgetPath+`/catalog/${e}/openers/${t}.png`},window.SpinX.utils.getSoundUrl=function(t){var e=window.SpinX.utils.getThemeCateId(t);let n=t;return t?.includes("_BG_")?n="background/"+t:t?.includes("_PY_")?n="playing/"+t:t?.includes("_WN_")?n="winning/"+t:t?.includes("_LS_")&&(n="losing/"+t),`${window.SpinX.widgetPath}/catalog/${e}/sounds/${n}.mp3`},window.SpinX.utils.checkAppHidden=function(t){let e=window.location.pathname;return t.some(t=>e.startsWith(t))},window.SpinX.utils.checkOpenerEnable=function(t){return!!t?.config?.triggers?.opener?.enabled},window.SpinX.utils.checkWelcomePopupEnable=function(t){return!!t?.config?.triggers?.delayedDisplay?.enabled},window.SpinX.utils.checkIntentPopupEnable=function(t){return!!t?.config?.triggers?.exitIntent?.enabled},window.SpinX.utils.checkAnnouncementBarEnable=function(t){return!!t?.config?.announcement?.upcomingEvent?.enabled||!!t?.config?.announcement?.readyToSpin?.enabled},window.SpinX.utils.initSpinXWheel=function(t,e,n){var i=document.createElement("spinx-wheel");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXStartSpin",e),"function"==typeof n&&i.addEventListener("onSpinXEndSpin",n),i},window.SpinX.utils.initSpinXForm=function(t,e){var n=document.createElement("spinx-form");return n.dataset.json=JSON.stringify(t),"function"==typeof e&&n.addEventListener("onSpinXSpin",e),n},window.SpinX.utils.initSpinXPopup=function(t,e,n){let i=document.createElement("spinx-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedPopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXOpenedPopup",()=>n(i)),document.body.append(i),i},window.SpinX.utils.removeSpinXPopup=function(){document.querySelector("spinx-popup")?.remove()},window.SpinX.utils.initSpinXOpener=function(t,e,n){let i=document.createElement("spinx-opener");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedOpener",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickOpener",n),document.body.append(i),i},window.SpinX.utils.removeSpinXOpener=function(){document.querySelector("spinx-opener")?.remove()},window.SpinX.utils.initWelcomePopup=function(t,e,n){let i=document.createElement("spinx-welcome-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedWelcomePopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickWelcomePopup",n),document.body.append(i),i},window.SpinX.utils.removeWelcomePopup=function(){document.querySelector("spinx-welcome-popup")?.remove()},window.SpinX.utils.initIntentPopup=function(t,e,n){let i=document.createElement("spinx-intent-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedIntentPopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickIntentPopup",n),document.body.append(i),i},window.SpinX.utils.removeIntentPopup=function(){document.querySelector("spinx-intent-popup")?.remove()},window.SpinX.utils.initAnnouncement=function(t,e,n){let i=document.createElement("spinx-announcement");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedAnnouncement",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXVisibleAnnouncementChanged",n),"top"===t.position?document.body.insertBefore(i,document.body.firstChild):document.body.append(i),i},window.SpinX.utils.removeAnnouncement=function(){document.querySelector("spinx-announcement")?.remove()},window.SpinX.utils.onElementSizeChange=function(n,i,t={}){if(!n)throw new Error("onSizeChange: element is required");if("function"!=typeof i)throw new Error("onSizeChange: callback is required");let{box:o="border-box",initial:e=!0}=t,a=!1,s=-1,r=-1,d=()=>{var t,e;a||({width:e,height:t}="content-box"===o?{width:n.clientWidth,height:n.clientHeight}:{width:(e=n.getBoundingClientRect()).width,height:e.height},e===s&&t===r)||(s=e,r=t,i({width:e,height:t}))};if(e&&d(),"undefined"!=typeof ResizeObserver){let t=new ResizeObserver(()=>{requestAnimationFrame(d)});try{t.observe(n,{box:"content-box"===o?"content-box":"border-box"})}catch{t.observe(n)}return()=>{a=!0,t.disconnect()}}let l=new MutationObserver(()=>requestAnimationFrame(d)),p=(l.observe(n,{attributes:!0,attributeFilter:["style","class"],childList:!0,subtree:!0,characterData:!0}),()=>d()),c=(window.addEventListener("resize",p),window.addEventListener("orientationchange",p),setInterval(d,200));return()=>{a=!0,l.disconnect(),window.removeEventListener("resize",p),window.removeEventListener("orientationchange",p),clearInterval(c)}},window.SpinX.utils.combineWheelData=async function(a,s){var t=a.config?.wheel||{};let r=window.SpinX.utils.getCurrentLocale(a),d=s.wheel,l=(t,e)=>e<t?e:l(t,e-t);var e=window.SpinX.utils.getCustomizedData(t.fontFamily,d?.fontFamily);return await window.SpinX.utils.loadGoogleFont(e),{fontFamily:e,contentSize:Number(window.SpinX.utils.getCustomizedData(t.contentSize,d?.contentSize)),borderAround:{type:window.SpinX.utils.getCustomizedData(t.borderAround,d?.borderAround,"type"),color:window.SpinX.utils.getCustomizedData(t.borderAround,d?.borderAround,"color")},rewardBorder:{displayed:window.SpinX.utils.getCustomizedData(t.rewardBorder,d?.rewardBorder,"displayed"),color:window.SpinX.utils.getCustomizedData(t.rewardBorder,d?.rewardBorder,"color")},circleCenter:{displayed:window.SpinX.utils.getCustomizedData(t.circleCenter,d?.circleCenter,"displayed"),borderType:window.SpinX.utils.getCustomizedData(t.circleCenter,d?.circleCenter,"borderType"),borderColor:window.SpinX.utils.getCustomizedData(t.circleCenter,d?.circleCenter,"borderColor"),backgroundColor:window.SpinX.utils.getCustomizedData(t.circleCenter,d?.circleCenter,"backgroundColor"),icon:window.SpinX.utils.getCustomizedData(t.circleCenter,d?.circleCenter,"icon")},sticker:{borderType:window.SpinX.utils.getCustomizedData(t.sticker,d?.sticker,"borderType"),borderColor:window.SpinX.utils.getCustomizedData(t.sticker,d?.sticker,"borderColor"),backgroundColor:window.SpinX.utils.getCustomizedData(t.sticker,d?.sticker,"backgroundColor")},playingMusic:t.playingMusic||d?.playingMusic,rewards:a.rewards?.map((t,e)=>{let n=t;var t=n.config||{},e=d.rewards?.length?d.rewards[l(d.rewards.length,e)]:null,i=r?.rewards?.find(t=>t.id===n.id),o=i?.name||n.name;return t.discountCode?.amount&&"number"!=typeof t.discountCode.amount&&(t.discountCode.amount=Number(t.discountCode.amount)),t.discountCode?.percentage&&"number"!=typeof t.discountCode.percentage&&(t.discountCode.percentage=Number(t.discountCode.percentage)),t.discountCode?.startTime?.date&&"string"==typeof t.discountCode.startTime.date&&(t.discountCode.startTime.date=new Date(t.discountCode.startTime.date)),t.discountCode?.endTime?.date&&"string"==typeof t.discountCode.endTime.date&&(t.discountCode.endTime.date=new Date(t.discountCode.endTime.date)),t.freeShipping?.shippingRates?.amount&&"number"!=typeof t.freeShipping.shippingRates.amount&&(t.freeShipping.shippingRates.amount=Number(t.freeShipping.shippingRates.amount)),t.freeShipping?.startTime?.date&&"string"==typeof t.freeShipping.startTime.date&&(t.freeShipping.startTime.date=new Date(t.freeShipping.startTime.date)),t.freeShipping?.endTime?.date&&"string"==typeof t.freeShipping.endTime.date&&(t.freeShipping.endTime.date=new Date(t.freeShipping.endTime.date)),t.freeGift?.quantity?.amount&&"number"!=typeof t.freeGift.quantity.amount&&(t.freeGift.quantity.amount=Number(t.freeGift.quantity.amount)),t.freeGift?.startTime?.date&&"string"==typeof t.freeGift.startTime.date&&(t.freeGift.startTime.date=new Date(t.freeGift.startTime.date)),t.freeGift?.endTime?.date&&"string"==typeof t.freeGift.endTime.date&&(t.freeGift.endTime.date=new Date(t.freeGift.endTime.date)),{id:n.id,name:o,type:n.type,status:n.status,order:n.order,config:{discountCode:t.discountCode,freeShipping:t.freeShipping,contentColor:window.SpinX.utils.getCustomizedData(t.contentColor,e?.contentColor),backgroundColor:window.SpinX.utils.getCustomizedData(t.backgroundColor,e?.backgroundColor),effectMusic:window.SpinX.utils.getRewardEffectMusic(n,s),message:window.SpinX.utils.getCustomizedRewardMessage(n,a,s,i)}}})}},window.SpinX.utils.combinePopupData=async function(t,e){var n=t.config?.popup||{};let i=window.SpinX.utils.getCurrentLocale(t);t=e?.popup,e=window.SpinX.utils.getCustomizedData(n.fontFamily,t?.fontFamily);return await window.SpinX.utils.loadGoogleFont(e),{contentColor:n?.content?.color,displayType:n.displayType||t?.displayType,showLogo:"boolean"==typeof n.showLogo?n.showLogo:t?.showLogo,background:{backgroundColor:window.SpinX.utils.getCustomizedData(n.background,t?.background,"backgroundColor"),backgroundImage:window.SpinX.utils.getCustomizedResourceUrl(n.background?.customized,n.background?.backgroundImage,t?.background?.backgroundImage),mobileBackgroundImage:window.SpinX.utils.getCustomizedResourceUrl(n.background?.customized,n.background?.mobileBackgroundImage,t?.background?.mobileBackgroundImage)},backgroundMusic:n.backgroundMusic||t?.backgroundMusic,contentPanel:n.contentPanel||t?.contentPanel,fontFamily:e,title:{text:window.SpinX.utils.getCustomizedData(n.title,t?.title,"text",i?.popup?.title),size:Number(window.SpinX.utils.getCustomizedData(n.title,t?.title,"size")),color:window.SpinX.utils.getCustomizedData(n.title,t?.title,"color")},content:{text:window.SpinX.utils.getCustomizedData(n.content,t?.content,"text",i?.popup?.content),size:Number(window.SpinX.utils.getCustomizedData(n.content,t?.content,"size")),color:window.SpinX.utils.getCustomizedData(n.content,t?.content,"color")},contentForExistingAccount:{text:window.SpinX.utils.getCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"text",i?.popup?.contentForExistingAccount),size:Number(window.SpinX.utils.getCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"size")),color:window.SpinX.utils.getCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"color")},fields:(n.fields||t?.fields)?.map(e=>{let n=i?.popup?.fields?.find(t=>t.name===e.name);return n?.label&&(e.label=n.label),n?.placeholder&&(e.placeholder=n.placeholder),e.messages||(e.messages={}),Object.keys(n?.messages||{}).forEach(t=>{e.messages[t]=n.messages[t]}),e}),textInput:{color:window.SpinX.utils.getCustomizedData(n.textInput,t?.textInput,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(n.textInput,t?.textInput,"backgroundColor"),placeholderColor:window.SpinX.utils.getCustomizedData(n.textInput,t?.textInput,"placeholderColor")},agreement:i?.popup?.agreement||t?.agreement,spinButton:{text:window.SpinX.utils.getCustomizedData(n.spinButton,t?.spinButton,"text",i?.popup?.spinButton),size:Number(window.SpinX.utils.getCustomizedData(n.spinButton,t?.spinButton,"size")),color:window.SpinX.utils.getCustomizedData(n.spinButton,t?.spinButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(n.spinButton,t?.spinButton,"backgroundColor")},dismissButton:{text:window.SpinX.utils.getCustomizedData(n.dismissButton,t?.dismissButton,"text",i?.popup?.dismissButton),size:Number(window.SpinX.utils.getCustomizedData(n.dismissButton,t?.dismissButton,"size")),color:window.SpinX.utils.getCustomizedData(n.dismissButton,t?.dismissButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(n.dismissButton,t?.dismissButton,"backgroundColor")},footerContent:{text:window.SpinX.utils.getCustomizedData(n.footerContent,t?.footerContent,"text",i?.popup?.footerContent),size:Number(window.SpinX.utils.getCustomizedData(n.footerContent,t?.footerContent,"size")),color:window.SpinX.utils.getCustomizedData(n.footerContent,t?.footerContent,"color")},styleContent:window.SpinX.utils.getCustomizedData(n.styleContent,"")}},window.SpinX.utils.combineOpenerData=async function(t,e){var n=t.config||{},t=window.SpinX.utils.getCurrentLocale(t),n=n.triggers.opener,e=e?.triggers?.opener||{},i={...e?.attentionEffect||{},...n.attentionEffect||{}},o=("string"==typeof i.intervalTime&&(i.intervalTime=Number(i.intervalTime)),window.SpinX.utils.getCustomizedData(n.fontFamily,e?.fontFamily));return await window.SpinX.utils.loadGoogleFont(o,600),{position:n.position,distance:{left:Number(window.SpinX.utils.getCustomizedData(n.distance?.left,e?.distance?.left)),right:Number(window.SpinX.utils.getCustomizedData(n.distance?.right,e?.distance?.right)),bottom:Number(window.SpinX.utils.getCustomizedData(n.distance?.bottom,e?.distance?.bottom)),bottomFromAnnouncement:Number(window.SpinX.utils.getCustomizedData(n.distance?.bottomFromAnnouncement,e?.distance?.bottomFromAnnouncement))},fontFamily:o,fontWeight:600,content:window.SpinX.utils.getCustomizedData(n.content,e?.content,"value",t?.triggers?.opener?.content),contentColor:window.SpinX.utils.getCustomizedData(n.contentColor,e?.contentColor),backgroundColor:window.SpinX.utils.getCustomizedData(n.backgroundColor,e?.backgroundColor),icon:n.icon?.value?n.icon:e?.icon,attentionEffect:i}},window.SpinX.utils.combineDelayedDisplayData=async function(t,e){var n=window.SpinX.utils.getCurrentLocale(t),t=t.config?.triggers?.delayedDisplay||{},e=e?.triggers?.delayedDisplay,i=window.SpinX.utils.getCustomizedData(t.fontFamily,e?.fontFamily);return await window.SpinX.utils.loadGoogleFont(i,"400;600"),{delay:window.SpinX.utils.getCustomizedData(t.delay,e?.delay),background:{overlay:t.background?.overlay||e?.background?.overlay,backgroundColor:window.SpinX.utils.getCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:window.SpinX.utils.getCustomizedResourceUrl(t.background?.customized,t.background?.backgroundImage,e?.background?.backgroundImage),mobileBackgroundImage:window.SpinX.utils.getCustomizedResourceUrl(t.background?.customized,t.background?.mobileBackgroundImage,e?.background?.mobileBackgroundImage)},fontFamily:i,title:{text:window.SpinX.utils.getCustomizedData(t.title,e?.title,"text",n?.triggers?.delayedDisplay?.title),size:Number(window.SpinX.utils.getCustomizedData(t.title,e?.title,"size")),color:window.SpinX.utils.getCustomizedData(t.title,e?.title,"color"),fontWeight:600},content:{text:window.SpinX.utils.getCustomizedData(t.content,e?.content,"text",n?.triggers?.delayedDisplay?.content),size:Number(window.SpinX.utils.getCustomizedData(t.content,e?.content,"size")),color:window.SpinX.utils.getCustomizedData(t.content,e?.content,"color"),fontWeight:400},contentBottom:{text:window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.delayedDisplay?.contentBottom),size:Number(window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"color"),fontWeight:400},spinButton:{text:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.delayedDisplay?.spinButton),size:Number(window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"size")),color:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"backgroundColor"),fontWeight:600},cancelButton:{text:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.delayedDisplay?.cancelButton),size:Number(window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor"),fontWeight:600}}},window.SpinX.utils.combineExitIntentData=async function(t,e){var n=window.SpinX.utils.getCurrentLocale(t),t=t.config?.triggers?.exitIntent||{},e=e?.triggers?.exitIntent,i=window.SpinX.utils.getCustomizedData(t.fontFamily,e?.fontFamily);return await window.SpinX.utils.loadGoogleFont(i,"400;600"),{desktop:t.desktop,mobile:t.mobile,background:{overlay:t.background?.overlay||e?.background?.overlay,backgroundColor:window.SpinX.utils.getCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:window.SpinX.utils.getCustomizedResourceUrl(t.background?.customized,t.background?.backgroundImage,e?.background?.backgroundImage),mobileBackgroundImage:window.SpinX.utils.getCustomizedResourceUrl(t.background?.customized,t.background?.mobileBackgroundImage,e?.background?.mobileBackgroundImage)},fontFamily:i,title:{text:window.SpinX.utils.getCustomizedData(t.title,e?.title,"text",n?.triggers?.exitIntent?.title),size:Number(window.SpinX.utils.getCustomizedData(t.title,e?.title,"size")),color:window.SpinX.utils.getCustomizedData(t.title,e?.title,"color"),fontWeight:600},content:{text:window.SpinX.utils.getCustomizedData(t.content,e?.content,"text",n?.triggers?.exitIntent?.content),size:Number(window.SpinX.utils.getCustomizedData(t.content,e?.content,"size")),color:window.SpinX.utils.getCustomizedData(t.content,e?.content,"color"),fontWeight:400},contentBottom:{text:window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.exitIntent?.contentBottom),size:Number(window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:window.SpinX.utils.getCustomizedData(t.contentBottom,e?.contentBottom,"color"),fontWeight:400},spinButton:{text:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.exitIntent?.spinButton),size:Number(window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"size")),color:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(t.spinButton,e?.spinButton,"backgroundColor"),fontWeight:600},cancelButton:{text:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.exitIntent?.cancelButton),size:Number(window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:window.SpinX.utils.getCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor"),fontWeight:600}}},window.SpinX.utils.combineAnnouncementData=async function(t,e){var n=t.config||{},i=window.SpinX.utils.getCurrentLocale(t),o=n.announcement,a=e?.announcement||{},s={...o.upcomingEvent||{},content:window.SpinX.utils.getCustomizedData(o.upcomingEvent?.content,a?.upcomingEvent?.content,"value",i?.announcement?.upcomingEvent?.content)},r={...o.readyToSpin||{},content:window.SpinX.utils.getCustomizedData(o.readyToSpin?.content,a?.readyToSpin?.content,"value",i?.announcement?.readyToSpin?.content)},d={...o.countDownToLaunch||{},content:window.SpinX.utils.getCustomizedData(o.countDownToLaunch?.content,a?.countDownToLaunch?.content,"value",i?.announcement?.countDownToLaunch?.content)},l={...o.countDownToClose||{},content:window.SpinX.utils.getCustomizedData(o.countDownToClose?.content,a?.countDownToClose?.content,"value",i?.announcement?.countDownToClose?.content)},i={...o.encourageUsePrize||{},discountMessage:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.discountMessage,a?.encourageUsePrize?.discountMessage,"value",i?.announcement?.encourageUsePrize?.discountMessage),discountMessageWithMinOrder:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.discountMessageWithMinOrder,a?.encourageUsePrize?.discountMessageWithMinOrder,"value",i?.announcement?.encourageUsePrize?.discountMessageWithMinOrder),freeGiftMessage:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.freeGiftMessage,a?.encourageUsePrize?.freeGiftMessage,"value",i?.announcement?.encourageUsePrize?.freeGiftMessage),freeShipMessage:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.freeShipMessage,a?.encourageUsePrize?.freeShipMessage,"value",i?.announcement?.encourageUsePrize?.freeShipMessage),freeShipMessageWithMaxAmount:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.freeShipMessageWithMaxAmount,a?.encourageUsePrize?.freeShipMessageWithMaxAmount,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMaxAmount),freeShipMessageWithMinOrder:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.freeShipMessageWithMinOrder,a?.encourageUsePrize?.freeShipMessageWithMinOrder,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMinOrder),freeShipMessageWithMaxAmountAndMinOrder:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder,a?.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder,"value",i?.announcement?.encourageUsePrize?.freeShipMessageWithMaxAmountAndMinOrder),helperText:window.SpinX.utils.getCustomizedData(o.encourageUsePrize?.helperText,a?.encourageUsePrize?.helperText,"value",i?.announcement?.encourageUsePrize?.helperText)},p=(s.displayDays&&"number"!=typeof s.displayDays&&(s.displayDays=Number(s.displayDays)),d.displayHours&&"number"!=typeof d.displayHours&&(d.displayHours=Number(d.displayHours)),l.displayHours&&"number"!=typeof l.displayHours&&(l.displayHours=Number(l.displayHours)),window.SpinX.utils.getCustomizedData(o.fontFamily,a?.fontFamily));return await window.SpinX.utils.loadGoogleFont(p,400),{status:t.status,spinState:{state:"scheduled"===t.status?"upcoming_event":"launching"===t.status?"ready_to_spin":"",rewardCode:"",winningRewardReminder:""},scheduledAt:t.scheduledAt&&"string"==typeof t.scheduledAt?new Date(t.scheduledAt):t.scheduledAt,launchedAt:t.launchedAt&&"string"==typeof t.launchedAt?new Date(t.launchedAt):t.launchedAt,closedAt:t.closedAt&&"string"==typeof t.closedAt?new Date(t.closedAt):t.closedAt,position:o.position,displayType:o.displayType,fontFamily:p,fontWeight:400,contentSize:Number(window.SpinX.utils.getCustomizedData(o.contentSize,a?.contentSize)),contentColor:window.SpinX.utils.getCustomizedData(o.contentColor,a?.contentColor),backgroundColor:window.SpinX.utils.getCustomizedData(o.backgroundColor,a?.backgroundColor),openerIcon:n.triggers?.opener?.icon?.value?n.triggers.opener.icon:e?.triggers?.opener?.icon,upcomingEvent:s,readyToSpin:r,countDownToLaunch:d,countDownToClose:l,encourageUsePrize:i}},window.SpinX.utils.getTriggerKey=function(t){return window.SpinX.disableAutoTriggerPopupKey+`_${t}_`+(window.SpinX.participant?.id||"anonymous")},window.SpinX.utils.fadeInAudio=function(e,n=500){e.currentTime=0,e.volume=0,e.play();let i=performance.now(),o=t=>{t=Math.min(1,(t-i)/n);e.volume=Math.min(1,Math.max(0,t)),t<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},window.SpinX.utils.fadeOutAudio=function(e,n=500){let i=e.volume,o=performance.now(),a=t=>{t=Math.min(1,(t-o)/n);e.volume=Math.min(1,Math.max(0,i*(1-t))),t<1?requestAnimationFrame(a):(e.pause(),e.currentTime=0)};requestAnimationFrame(a)},window.SpinX.utils.readJson=function(t){return fetch(t).then(t=>{if(t.ok)return t.json();throw new Error("HTTP error "+t.status)}).catch(function(){this.dataError=!0})},window.SpinX.utils.getParticipantName=function(t){var e=(`${t.firstName||""} `+(t.lastName||"")).trim();return e||t.email},window.SpinX.utils.convertCurrency=function(t,e="USD",n){return t.toLocaleString(n?.locales,{style:"currency",currency:e,currencyDisplay:n?.currencyDisplay})},window.SpinX.utils.formatDateTime=function(t){return"[object Date]"!==Object.prototype.toString.call(t)?"NaD":dayjs(t).format("DD/MM/YYYY HH:mm")},window.SpinX.utils.lessThanHours=function(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/36e5<n},window.SpinX.utils.lessThanDays=function(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/864e5<n},window.SpinX.utils.convertCountDownTime=function(t){var e=t%3600;return Math.floor(t/3600)+`:${Math.floor(e/60)}:`+Math.floor(e%60)},window.SpinX.utils.escapeHtml=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},window.SpinX.utils.fontLoadCache=new Map,window.SpinX.utils.cssLinkCache=new Set,window.SpinX.utils.loadGoogleFont=async function(e,t){if(e&&!["Arial","Times New Roman","Courier New","Verdana","Tahoma"].includes(e)){var e=e.trim().replace(/\s+/g,"+"),n=t?`https://fonts.googleapis.com/css2?family=${e}:wght@${t}&display=swap`:null,e=`https://fonts.googleapis.com/css2?family=${e}&display=swap`;if(t&&"failed"===window.SpinX.utils.fontLoadCache.get(n))return window.SpinX.utils.loadFontAndWait(e);if(!t)return window.SpinX.utils.loadFontAndWait(e);try{await window.SpinX.utils.loadFontAndWait(n),window.SpinX.utils.fontLoadCache.set(n,"success")}catch(t){window.SpinX.utils.fontLoadCache.set(n,"failed"),await window.SpinX.utils.loadFontAndWait(e)}}},window.SpinX.utils.loadFontAndWait=async function(t){window.SpinX.utils.cssLinkCache.has(t)||(await window.SpinX.utils.loadCss(t),window.SpinX.utils.cssLinkCache.add(t));try{await document.fonts.ready}catch(t){}},window.SpinX.utils.loadCss=function(i){return new Promise((t,e)=>{if([...document.head.querySelectorAll("link")].some(t=>t.href===i))return t();var n=document.createElement("link");n.rel="stylesheet",n.href=i,n.onload=t,n.onerror=e,document.head.appendChild(n)})},window.SpinX.utils.getSessionWithTTL=t=>{var e=sessionStorage.getItem(t);if(!e)return null;try{var n=JSON.parse(e);return!n.expiry||Date.now()>n.expiry?(sessionStorage.removeItem(t),null):n.value}catch{return sessionStorage.removeItem(t),null}},window.SpinX.utils.setSessionWithTTL=(t,e,n)=>{var i=Date.now();sessionStorage.setItem(t,JSON.stringify({value:e,expiry:i+n}))},window.SpinX.utils.removeSessionWithTTL=t=>{try{sessionStorage.removeItem(t)}catch(t){}},window.SpinX.utils.getWinningRewardReminder=(t,e,n,i,o)=>{if(!(t&&e&&n&&i&&0!==i.length))return"";if(!n.enabled)return"";i=i.find(t=>t.id===e);if(!i||!i.config)return"";var a=i.type,i=i.config;if("none"===a)return"";let s="";return"discount_code"===a?s=window.SpinX.utils.getWinningDiscountReminder(t,i.discountCode,n,o):"free_shipping"===a?s=window.SpinX.utils.getWinningFreeShippingReminder(t,i.freeShipping,n,o):"free_gift"===a&&(s=window.SpinX.utils.getWinningFreeGiftReminder(t,n,o)),s&&n.helperText&&(s+="<newline>"+n.helperText?.replace("{{CODE}}",`<strong>${t}</strong>`)),s},window.SpinX.utils.getWinningDiscountReminder=(t,e,n,i)=>{if(!e)return"";var o=e.minOrderAmount?.enabled&&0<e.minOrderAmount?.amount;let a="",s=("percentage"===e.type&&e.percentage?a=e.percentage+"%":"fixed_amount"===e.type&&e.amount&&(a=""+window.SpinX.utils.convertMoneyFormat(e.amount,i)),"");return s=(s=(s=o?(s=n.discountMessageWithMinOrder||n.discountMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(e.minOrderAmount.amount,i)):n.discountMessage||"").replace("{{VALUE}}",`<strong>${a}</strong>`)).replace("{{CODE}}",`<strong>${t}</strong>`)},window.SpinX.utils.getWinningFreeShippingReminder=(t,e,n,i)=>{if(!e)return"";var o=e.minOrderAmount?.enabled&&0<e.minOrderAmount?.amount,a=e.maxAmount?.enabled&&0<e.maxAmount?.amount;let s="";return s=(s=o&&a?(s=(s=n.freeShipMessageWithMaxAmountAndMinOrder||n.freeShipMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(e.minOrderAmount.amount,i))).replace("{{MAX_AMOUNT}}",""+window.SpinX.utils.convertMoneyFormat(e.maxAmount.amount,i)):o?(s=n.freeShipMessageWithMinOrder||n.freeShipMessage||"").replace("{{MIN_ORDER}}",""+window.SpinX.utils.convertMoneyFormat(e.minOrderAmount.amount,i)):a?(s=n.freeShipMessageWithMaxAmount||n.freeShipMessage||"").replace("{{MAX_AMOUNT}}",""+window.SpinX.utils.convertMoneyFormat(e.maxAmount.amount,i)):n.freeShipMessage||"").replace("{{CODE}}",`<strong>${t}</strong>`)},window.SpinX.utils.getWinningFreeGiftReminder=(t,e)=>{let n=e.freeGiftMessage||"";return n=n.replace("{{CODE}}",`<strong>${t}</strong>`)},window.SpinX.utils.formatAmount=t=>t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.formatAmountWithCommaSeparator=t=>t.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.formatAmountNoDecimalsWithCommaSeparator=t=>Math.round(t).toLocaleString("de-DE"),window.SpinX.utils.formatAmountWithApostropheSeparator=t=>t.toLocaleString("en-CH",{minimumFractionDigits:2,maximumFractionDigits:2}),window.SpinX.utils.convertMoneyFormat=(t,e)=>(e=e||"{{amount}}").includes("{{amount}}")?e.replace("{{amount}}",window.SpinX.utils.formatAmount(t)):e.includes("{{amount_with_comma_separator}}")?e.replace("{{amount_with_comma_separator}}",window.SpinX.utils.formatAmountWithCommaSeparator(t)):e.includes("{{amount_no_decimals}}")?e.replace("{{amount_no_decimals}}",Math.round(t).toString()):e.includes("{{amount_no_decimals_with_comma_separator}}")?e.replace("{{amount_no_decimals_with_comma_separator}}",window.SpinX.utils.formatAmountNoDecimalsWithCommaSeparator(t)):e.includes("{{amount_with_apostrophe_separator}}")?e.replace("{{amount_with_apostrophe_separator}}",window.SpinX.utils.formatAmountWithApostropheSeparator(t)):e;class SpinXAnnouncement extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"}),this.countDownId="spinx-count-down",this.messageItemClass="announcement-item"}connectedCallback(){this.reset(),this.delayMobileClick()}async render(){this.data=JSON.parse(this.dataset.json),this.data.scheduledAt&&"string"==typeof this.data.scheduledAt&&(this.data.scheduledAt=new Date(this.data.scheduledAt)),this.data.launchedAt&&"string"==typeof this.data.launchedAt&&(this.data.launchedAt=new Date(this.data.launchedAt)),this.data.closedAt&&"string"==typeof this.data.closedAt&&(this.data.closedAt=new Date(this.data.closedAt));let n=[];var t=window.SpinX.utils.getSessionWithTTL(window.SpinX.winningRewardKey);let e="";var i=window.SpinX?.campaign?.config?.announcement?.encourageUsePrize?.enabled||!1;if(i&&t?.rewardCode&&t?.rewardId&&(l=window.SpinX?.campaign?.rewards||[],d=window.SpinX?.announcement?.encourageUsePrize||{},f=window.SpinX?.site?.config?.currency?.moneyFormat||"",e=window.SpinX.utils.getWinningRewardReminder(t.rewardCode,t.rewardId,d,l,f)),"upcoming_event"===this.data.spinState?.state)if(this.data.countDownToLaunch?.enabled&&this.data.countDownToLaunch.content&&this.data.countDownToLaunch.displayHours&&window.SpinX.utils.lessThanHours(this.data.launchedAt,new Date,this.data.countDownToLaunch.displayHours)){let e=()=>(this.data.launchedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=window.SpinX.utils.convertCountDownTime(e()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToLaunch.content.replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${window.SpinX.utils.convertCountDownTime(e())}</span>`)}</p>`)}else this.data.upcomingEvent?.enabled&&this.data.upcomingEvent.content&&this.data.upcomingEvent.displayDays&&window.SpinX.utils.lessThanDays(this.data.launchedAt,new Date,this.data.upcomingEvent.displayDays)&&n.push(`<p class="${this.messageItemClass}">${this.data.upcomingEvent.content.replace(/{{TIME}}/g,window.SpinX.utils.formatDateTime(this.data.launchedAt))}</p>`);else if(i&&e)e.split("<newline>").forEach(t=>{n.push(`<p class="${this.messageItemClass}">${t.trim()}</p>`)});else if("ready_to_spin"===this.data.spinState?.state){t=`<img class="spinx-icon-announcement" src="${window.SpinX.utils.getOpenerIconUrl(this.data.openerIcon?.value)}" />`;if(this.data.countDownToClose?.enabled&&this.data.countDownToClose.content&&this.data.countDownToClose.displayHours&&window.SpinX.utils.lessThanHours(this.data.closedAt,new Date,this.data.countDownToClose.displayHours)){let e=()=>(this.data.closedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=window.SpinX.utils.convertCountDownTime(e()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToClose.content.replace(/{{OPENER}}/g,t).replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${window.SpinX.utils.convertCountDownTime(e())}</span>`)}</p>`)}else this.data.readyToSpin?.enabled&&this.data.readyToSpin.content&&n.push(`<p class="${this.messageItemClass}">${this.data.readyToSpin.content.replace(/{{OPENER}}/g,t)}</p>`)}let o="";n.forEach(t=>{o+=t});var a=n.map(t=>this.getDelayTime(t)),s=a.reduce((t,e)=>t+e,0);let r=[];a.reduce((t,e,n)=>(r[n]=t)+e,0);var d=`
      .spinx-announcement-container .${this.messageItemClass} {
        margin: auto;
        padding-top: 4px;
        padding-bottom: 3px;
        position: absolute;
        width: 80%;
        font-family: '${this.data.fontFamily}', Arial, sans-serif;
        font-weight: ${this.data.fontWeight||500};
        font-size: ${this.data.contentSize||16}px;
        ${1<n.length?`opacity: 0; animation: slideUp ${s}s linear infinite both;`:"opacity: 1; transform: translateY(0%);"}
      }
    `,l=`
      @media (hover: hover) {
        .spinx-announcement-container:hover .${this.messageItemClass} {
          animation-play-state: paused !important;
        }
      }
    `;let p=d;if(1<n.length)for(let t=0;t<n.length;t++){var c=r[t]/s,u=(r[t]+a[t])/s,m=Math.max(0,u-c),h=(100*c).toFixed(4),g=(100*(c+.05*m)).toFixed(4),w=(100*(c+.9*m)).toFixed(4),c=(100*(c+.95*m)).toFixed(4),m=(100*u).toFixed(4);p=(p+=`
          @keyframes slideUp_${t} {
            0% { transform: translateY(100%); opacity: 0; }
            ${h}% { transform: translateY(100%); opacity: 0; }
            ${g}% { transform: translateY(0%);   opacity: 1; }
            ${w}% { transform: translateY(0%);   opacity: 1; }
            ${c}% { transform: translateY(-100%); opacity: 0; }
            ${m}% { transform: translateY(-100%); opacity: 0; }
            100% { transform: translateY(-100%); opacity: 0; }
          }
        `)+`
          .spinx-announcement-container .${this.messageItemClass}:nth-child(${t+1}) {
            animation-name: slideUp_${t};
            animation-duration: ${s}s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
            animation-fill-mode: both;
          }
        `}this.shadowRoot.innerHTML=`
      <style>
        .spinx-announcement-container {
          opacity: 0;
          padding: 4px;
          transition: opacity 0.5s linear;
          background: ${this.data.backgroundColor||"#fdc73b"};
          color: ${this.data.contentColor||"#121212"};
          font-size: 16px;
          letter-spacing: 0.06rem;
          line-height: 1.25em;
          text-align: center;
          width: 100%;
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: fixed;
          z-index: 1000;
          ${"top"===this.data.position?"top: 0;":"bottom: 0;"}
        }

        .spinx-icon-announcement {
          width: 21px;
          height: 21px;
          vertical-align: middle;
          position: relative;
          // top: 5px;
          margin-top: -4px;
        }

        .close-button {
          color: ${this.data.contentColor||"#121212"};
          position: absolute;
          right: 8px;
          padding: 3px 12px;
          font-size: 22px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        @keyframes slideUp {
          0% {
            transform: translateY(100%);
            opacity: 0;
          }
          10% {
            transform: translateY(0%);
            opacity: 1;
          }
          45% {
            transform: translateY(0%);
            opacity: 1;
          }
          55% {
            transform: translateY(-100%);
            opacity: 0;
          }
          100% {
            transform: translateY(-100%);
            opacity: 0;
          }
        }

        ${p}
        ${l}
      </style>

      <div class="spinx-announcement-container" style="display: none">
        ${o}
        <button class="close-button">&times;</button>
      </div>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.announcementContainer=this.shadowRoot.querySelector(".spinx-announcement-container"),setTimeout(()=>{this.announcementContainer.style.opacity=1},10);this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(t=>{window.SpinX.utils.onElementSizeChange(t,this.resetContainerHeight.bind(this),{initial:!1})});var f=sessionStorage.getItem("hide_announcement_"+this.data.spinState?.state);"true"===f?this.hide():0<n.length&&this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedAnnouncement",{bubbles:!0,composed:!0}))},10)}show(){this.announcementContainer.style.display="flex",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))},10)}hide(){this.announcementContainer.style.display="none",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!1}))},10)}reset(){this.updateSpinState(),this.render()}resetContainerHeight(){let e=0;this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(t=>{t.offsetHeight>e&&(e=t.offsetHeight)}),this.announcementContainer.style.height=e+"px",this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))}getContainerHeight(){return this.announcementContainer?.clientHeight||0}updateSpinState(){window.SpinX.announcement.spinState={state:"scheduled"===window.SpinX.campaign.status?"upcoming_event":"ready_to_spin",rewardCode:""},this.dataset.json=JSON.stringify(window.SpinX.announcement)}close(){this.hide(),sessionStorage.setItem("hide_announcement_"+this.data.spinState?.state,"true")}getDelayTime(t){t=(new DOMParser).parseFromString(t,"text/html").body.textContent?.trim()||"";return t.length<=50?8:t.length<=100?10:12}delayMobileClick(){if(window.matchMedia("(hover: none) and (pointer: coarse)").matches){let e=this.shadowRoot.querySelectorAll("."+this.messageItemClass);e.length&&e.forEach(t=>{t.addEventListener("click",t=>{t.stopPropagation(),e.forEach(t=>{t.style.animationPlayState="paused"}),clearTimeout(this._resumeTimer),this._resumeTimer=setTimeout(()=>{e.forEach(t=>{t.style.animationPlayState="running"})},5e3)})})}}}customElements.define("spinx-announcement",SpinXAnnouncement);class SpinXOpener extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);var t=window.SpinX.utils.getOpenerIconUrl(this.data.icon?.value),e=this.data.backgroundColor||"#1D305D",n=this.data.contentColor||"#ffffff";this.shadowRoot.innerHTML=`
      <style>
        @keyframes rotateIn {
          0% {
            transform: rotate(0deg);
          }
          80% {
            opacity: 1;
          }
          100% {
            opacity: 1;
            transform: rotate(2880deg);
          }
        }

        @keyframes fadein {
          0% {
            opacity: 0;
            box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.6);
          }
          100% {
            opacity: 1;
            box-shadow: -2px 4px 8px rgba(0, 0, 0, 0.6);
          }
        }

        @keyframes contentDisplay {
          0% {
            transform: scaleX(0);
            box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.6);
          }
          100% {
            transform: scaleX(1);
            box-shadow: -2px 4px 8px rgba(0, 0, 0, 0.6);
          }
        }

        .opener-button-container {
          position: ${"preview-in-box"===this.data?.viewMode?"absolute":"fixed"};
          ${"preview-in-box"===this.data?.viewMode?"":"z-index: 1001;"}
          ${"preview-in-box"===this.data?.viewMode?"":`bottom: ${this.data.distance?.bottom?this.data.distance?.bottom+"px":"24px"};`}
          ${"left"===this.data?.position?"preview-in-box"===this.data?.viewMode?"":`left: ${this.data.distance?.left?this.data.distance.left+"px":"16px"};`:`right: ${this.data.distance?.right?this.data.distance.right+"px":"16px"};`}
          filter: drop-shadow(0 8px 14px rgba(0, 0, 0, 0.24));
        }

        .opener-button-container[data-direction="right"] .opener-text {
          right: 62%;
        }

        .opener-button-container[data-direction="left"] .opener-text {
          left: 62%;
        }

        .opener-button {
          --size: 56px;

          width: var(--size);
          height: var(--size);
          position: relative;
          z-index: 1003;
          border-radius: 50%;
          border: 0px;
          opacity: 0;
          transition: transform 0.1s ease;
          animation: fadein 1.2s forwards ease;
          background: ${e};
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0;
        }

        .opener-button .icon {
          --size: 50px;
          --deltaX: ${this.data.icon?.deltaX?this.data.icon.deltaX:0}px;
          --deltaY: ${this.data.icon?.deltaY?this.data.icon.deltaY:0}px;
          opacity: 0;
          transition: transform 0.1s ease;
          animation: rotateIn 1.2s forwards ease;
          width: var(--size);
          height: var(--size);
          position: relative;
          left: var(--deltaX);
          top: var(--deltaY);
          pointer-events: none;
        }

        .opener-button:hover {
          transform: scale(1.05) !important;
        }

        .opener-button:active {
          transform: scale(0.95) !important;
        }

        .opener-text {
          position: absolute;
          z-index: 1002;
          bottom: 5px;
          ${"left"===this.data?.position?"border-radius: 0px 8px 8px 0px;":"border-radius: 8px 0px 0px 8px;"}
          width: auto;
          height: 47px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-weight: ${this.data.fontWeight||600};
          line-height: 1em;
          text-transform: uppercase;
          color: ${n};
          background: ${e};
          white-space: nowrap;
          transform: scaleX(0);
          transform-origin: ${this.data?.position};
          transition: 0.3s all ease;
          pointer-events: none;
        }

        .opener-text span {
          text-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
          // text-stroke: 1px rgba(0, 0, 0, 0.3);
          // -webkit-text-stroke: 1px rgba(0, 0, 0, 0.3);
          ${"left"===this.data?.position?"padding: 0px 15px 0px 30px;":"padding: 0px 30px 0px 15px;"}
        }

        @media only screen and (max-width: 600px) {
          .opener-text {
            display: none !important;
            animation: none;
          }

          .opener-button {
            background: ${this.data.icon?.transparentBackground?"transparent":e};
            ${this.data.icon?.transparentBackground?"box-shadow: none !important":""};
          }

          .opener-button .icon {
            --size: ${this.data.icon?.transparentBackground?56:50}px;

            width: var(--size);
            height: var(--size);
          }
        }
      </style>

      <div class="opener-button-container" id="opener-button-container" data-direction="${this.data?.position}" style="display: none;">
        <div class="opener-text" id="opener-text"><span>${this.data?.content?this.data.content:"Spin Now"}</span></div>
        <button class="opener-button" id="opener-button">
          <img class="icon" id="opener-button-icon" src="${t}" alt="">
        </button>
      </div>
    `,this.openerContainer=this.shadowRoot.getElementById("opener-button-container"),this.openerButton=this.shadowRoot.getElementById("opener-button"),this.openerButtonIcon=this.shadowRoot.getElementById("opener-button-icon"),this.openerText=this.shadowRoot.getElementById("opener-text"),this.data?.attentionEffect.enabled?(this.openerButtonIcon.style.animation="rotateIn 2s forwards ease",this.openerText.style.animation="contentDisplay 0.8s forwards ease-out 1.2s",setInterval(()=>{this.openerButtonIcon.style.animation="none",this.openerButtonIcon.style.opacity=1,setTimeout(()=>this.openerButtonIcon.style.animation="rotateIn 2s forwards ease",100)},1e3*(this.data?.attentionEffect.intervalTime||10))):(this.openerButtonIcon.style.opacity=1,this.openerText.style.transform="scaleX(1)"),this.openerButton.addEventListener("click",()=>this.click()),this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedOpener",{bubbles:!0,composed:!0}))},10)}show(){this.openerContainer.style.display="block"}hide(){this.openerContainer.style.display="none"}click(){this.dispatchEvent(new CustomEvent("onSpinXClickOpener",{bubbles:!0,composed:!0}))}enableOpenerButton(t){this.openerButton.disabled=!t}resetBottomDistance(t){"preview-in-box"!==this.data?.viewMode&&(this.openerContainer.style.bottom=t?t+(this.data.distance?.bottomFromAnnouncement||12)+"px":`${this.data.distance?.bottom||24}px`)}}customElements.define("spinx-opener",SpinXOpener);class SpinXWelcomePopup extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          animation: fadeIn 0.3s ease;
          border-radius: 24px;
          margin: 0px 20px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          box-shadow: 0 2px 8px rgba(0,0,0,0.5);
          background: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        .modal-container {
          padding: 30px 20px;
          max-width: 580px;
          min-height: 300px;
          max-height: 85vh;
          overflow-y: auto;
          border-radius: 24px;
          ${this.data.background?.overlay?.enabled?`background: ${this.data.background?.overlay?.color||"rgba(0, 0, 0, 0.4)"};`:""}
          ${this.data.background?.overlay?.enabled&&this.data.background?.overlay?.blur?`backdrop-filter: blur(${this.data.background?.overlay?.blur});`:""}
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${this.data.title?.size||28}px;
          font-weight: 600;
          margin-top: 0px;
          margin-bottom: 0px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${this.data.content?.size||16}px;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${this.data.contentBottom?.size||16}px;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 16px;
          margin-bottom: 5px;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          border: 1px solid #333333;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          // text-stroke: 1px rgba(0, 0, 0, 0.2);
          // -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          text-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
          transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.15s ease-out;
        }

        .btn:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        .btn:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        .btn-cancel {
          background: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${this.data.cancelButton?.size||16}px;
          font-weight: ${this.data.cancelButton.fontWeight||600};
        }

        .btn-primary {
          background: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${this.data.spinButton?.size||16}px;
          font-weight: ${this.data.spinButton.fontWeight||600};
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (max-height: 767px) and (orientation: landscape) {
          .modal-container {
            padding: 20px 20px;
          }

          #spinx-wheel-div {
            opacity: 0;
            width: 0px;
          }
        }

        @media (max-width: 767px) and (orientation: portrait) {
          .modal {
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }

          .modal-container {
            padding: 30px 15px;
          }

          #spinx-wheel-div {
            width: 80%;
          }

          .buttons {
            gap: 14px;
          }

          .btn {
            padding: 12px 16px;
          }
        }

        @media (max-width: 414px) and (orientation: portrait) {
          .modal-container {
            padding: 30px 10px;
          }

          .buttons {
            gap: 12px;
          }

          .btn {
            padding: 12px;
          }
        }

        @media (max-width: 360px) and (orientation: portrait) {
          .buttons {
            gap: 8px;
          }

          .btn {
            padding: 8px;
          }
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <div class="modal-container">
            <h2 class="modal-title">
              ${this.data.title.text}
            </h2>
            <div class="modal-body">
              <p class="modal-content">
                ${this.data.content.text}
              </p>
              <div id="spinx-wheel-div"></div>
              <p class="modal-content-bottom">
                ${this.data.contentBottom.text}
              </p>
            </div>
            <div class="buttons">
              <button class="btn btn-cancel" id="btnCancel">${this.data.cancelButton.text}</button>
              <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
            </div>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,e.noAnimation=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickWelcomePopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWelcomePopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=window.SpinX.utils.getTriggerKey(t);localStorage.getItem(e)||(t=this.data.delay||10,setTimeout(()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))},1e3*t))}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-welcome-popup",SpinXWelcomePopup);class SpinXIntentPopup extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          animation: fadeIn 0.3s ease;
          border-radius: 24px;
          margin: 0px 20px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          box-shadow: 0 2px 8px rgba(0,0,0,0.5);
          background: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        .modal-container {
          padding: 30px 20px;
          max-width: 580px;
          min-height: 300px;
          max-height: 85vh;
          overflow-y: auto;
          border-radius: 24px;
          ${this.data.background?.overlay?.enabled?`background: ${this.data.background?.overlay?.color||"rgba(0, 0, 0, 0.4)"};`:""}
          ${this.data.background?.overlay?.enabled&&this.data.background?.overlay?.blur?`backdrop-filter: blur(${this.data.background?.overlay?.blur});`:""}
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${this.data.title?.size||24}px;
          font-weight: ${this.data.titleFontWeight||600};
          margin-top: 0px;
          margin-bottom: 0px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${this.data.content?.size||16}px;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${this.data.contentBottom?.size||16}px;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 16px;
          margin-bottom: 5px;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          border: 1px solid #333333;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          // text-stroke: 1px rgba(0, 0, 0, 0.2);
          // -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          text-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
          transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.15s ease-out;
        }

        .btn:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        .btn:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        .btn-cancel {
          background: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${this.data.cancelButton?.size||16}px;
          font-weight: ${this.data.cancelButton.fontWeight||600};
        }

        .btn-primary {
          background: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${this.data.spinButton?.size||16}px;
          font-weight: ${this.data.spinButton.fontWeight||600};
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-wheel-div {
            width: 80%;
          }
        }

        @media (max-width: 1024px) and (max-height: 767px) and (orientation: landscape) {
          .modal-container {
            padding: 20px 20px;
          }

          #spinx-wheel-div {
            opacity: 0;
            width: 0px;
          }
        }

        @media (max-width: 767px) and (orientation: portrait) {
          .modal {
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }

          .modal-container {
            padding: 30px 15px;
          }

          #spinx-wheel-div {
            width: 80%;
          }

          .buttons {
            gap: 14px;
          }

          .btn {
            padding: 12px 16px;
          }
        }

        @media (max-width: 414px) and (orientation: portrait) {
          .modal-container {
            padding: 30px 10px;
          }

          .buttons {
            gap: 12px;
          }

          .btn {
            padding: 12px;
          }
        }

        @media (max-width: 360px) and (orientation: portrait) {
          .buttons {
            gap: 8px;
          }

          .btn {
            padding: 8px;
          }
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <div class="modal-container">
            <h2 class="modal-title">
              ${this.data.title.text}
            </h2>
            <div class="modal-body">
              <p class="modal-content">
                ${this.data.content.text}
              </p>
              <div id="spinx-wheel-div"></div>
              <p class="modal-content-bottom">
                ${this.data.contentBottom.text}
              </p>
            </div>
            <div class="buttons">
              <button class="btn btn-cancel" id="btnCancel">${this.data.cancelButton.text}</button>
              <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
            </div>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,e.noAnimation=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickIntentPopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedIntentPopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=window.SpinX.utils.getTriggerKey(t),n=()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))};setTimeout(()=>{var t=localStorage.getItem(e);if(!t&&(this.data.desktop&&768<window.innerWidth&&document.addEventListener("mouseout",function(t){!t.toElement&&!t.relatedTarget&&t.clientY<=10&&n()}),this.data.mobile)&&window.innerWidth<=768){window.addEventListener("popstate",function(t){n(),history.pushState(null,null,location.href)});let e=0;window.addEventListener("scroll",()=>{var t=window.pageYOffset;200<e&&t<30&&n(),e=t}),window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&n()})}},1500)}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-intent-popup",SpinXIntentPopup);class SpinXPopup extends HTMLElement{data;audio;enabledAudio=!1;popup;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t;this.render(),window.addEventListener("resize",this.updateElementSize.bind(this)),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.backgroundMusic?.enabled&&!!this.data?.backgroundMusic?.value,this.enabledAudio&&(t=window.SpinX.utils.getSoundUrl(this.data.backgroundMusic.value),this.audio=new Audio(t),this.audio.loop=!0,this.audio.volume=0)}render(){this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          max-height: 100vh; /* fallback cho mi browser */
          background: #fff;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
          overflow-y: auto;
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1004;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        @supports (height: 100dvh) {
          .popup-overlay {
            max-height: 100dvh; /* override cho browser hin i (iOS 16+, Android mi, desktop modern) */
          }
        }

        .close-button {
          color: ${this.data.title?.color||"#000000"};
          position: absolute;
          top: 10px;
          right: 10px;
          padding: 0 10px;
          font-size: 36px;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        .popup-content {
          width: 100%;
          height: 100%;
          border-radius: 8px;
          display: grid;
          align-items: center;
          position: relative;
          text-align: center;
          background: ${this.data.background?.backgroundColor||"#ffffff"};
        }

        .popup-body {
          width: 100%;
          height: 100%;
          display: grid;
          gap: 4em;
          grid-template-columns: 0 1.3fr 1.1fr 0;
          align-items: center;
          text-align: center;
          background: ${this.data.background?.backgroundColor||"#ffffff"};
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        .spin-column {
          width: 100%;
        }

        .info-column {
          width: 100%;
        }

        .spin-element {
          margin: auto;
        }

        .spin-form {
          margin: auto;
        }

        .popup-overlay.fullscreen.active {
          transform: translateX(0);
        }

        .popup-overlay.halfscreen.active {
          transform: translateX(-25%);
        }

        @media (orientation: portrait) {
          .popup-overlay.halfscreen.active {
            transform: translateX(0);
          }

          .popup-body {
            gap: 2em !important;
            grid-template-columns: none !important;
            grid-template-rows: 0 auto auto 0;
            ${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage?`background-image: url(${this.data.background.mobileBackgroundImage||this.data.background?.backgroundImage}); background-color: transparent;`:""}
          }

          .spin-element {
            width: 90%;
          }

          .spin-form {
            width: 90%;
          }
        }

        @media (orientation: landscape) {
          .popup-body {
            ${this.data.background?.backgroundImage?`background-image: url(${this.data.background.backgroundImage});`:""}
          }
        }

        @media (max-width: 1180px) and (max-height: 820px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .popup-body {
            gap: 2.5em;
            grid-template-columns: 0 1.2fr 1fr 0;
          }
        }

        @media (max-width: 1024px) and (max-height: 768px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .popup-body {
            gap: 2em;
            grid-template-columns: 0 1.1fr 1fr 0;
          }
        }

        @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .popup-overlay.halfscreen.active {
            transform: translateX(0);
          }

          .popup-body {
            gap: 2.5em;
            grid-template-columns: 0 1fr 1fr 0;
            align-items: start;
          }

          .spin-column {
            position: sticky;
            top: 0;
          }

          .info-column {
            padding: 1em 0;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          .popup-body {
            gap: 2em;
            grid-template-columns: 0 1.1fr 1fr 0;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          .popup-body {
            gap: 2.5em;
            grid-template-columns: 0 1fr 1fr 0;
          }
        }

        @media (max-width: 882px) and (max-height: 344px) and (orientation: landscape) {
          .popup-body {
            gap: 2.5em;
            grid-template-columns: 0 1fr 1.2fr 0;
          }
        }

        @media (max-width: 720px) and (orientation: landscape) {
          .popup-body {
            gap: 2em;
          }
        }

        @media (max-width: 667px) and (orientation: landscape) {
          .popup-body {
            gap: 1em;
          }
        }
      </style>

      <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content">
          <div class="popup-body">
            <div class="spin-spacing"></div>
            <div class="spin-column">
              <div class="spin-element"></div>
            </div>
            <div class="info-column">
              <div class="spin-form"></div>
            </div>
            <div class="spin-spacing"></div>
          </div>
        </div>
        <button class="close-button close-button-normal">&times;</button>
      </div>
    `,this.popup=this.shadowRoot.getElementById("popup-overlay"),this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedPopup",{bubbles:!0,composed:!0}))},10)}get isOpened(){return this.popup.classList.contains("active")}enableCloseButton(t){this.shadowRoot.querySelector(".close-button").disabled=!t}setSpinContent(t){this.shadowRoot.querySelector(".spin-element").replaceChildren(t)}setFormContent(t){this.shadowRoot.querySelector(".spin-form").replaceChildren(t)}playAudio(t=1200){this.enabledAudio&&window.SpinX.utils.fadeInAudio(this.audio,t)}stopAudio(t=800){this.enabledAudio&&window.SpinX.utils.fadeOutAudio(this.audio,t)}open(){var t=window.SpinX.utils.getTriggerKey(window.SpinX.campaign.id);localStorage.getItem(t)||localStorage.setItem(t,!0),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",this.popup.classList.remove("fullscreen","halfscreen"),this.popup.classList.add("full_screen"===this.data.displayType?"fullscreen":"halfscreen"),this.popup.classList.add("active"),this.updateElementSize(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXOpenedPopup",{bubbles:!0,composed:!0}))},10),this.playAudio()}close(){setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXClosedPopup",{bubbles:!0,composed:!0}))},10),this.popup.classList.remove("active"),document.documentElement.style.overflow="",document.body.style.overflow="",this.stopAudio(),window.SpinX.components.wheel?.stopRewardAudio()}updateElementSize(){var t,e,n=this.shadowRoot.querySelector(".spin-element");n&&(e=window.innerWidth<=932&&window.matchMedia("(orientation: landscape)").matches,t=window.innerWidth<=1024&&window.innerHeight<=600&&window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(hover: none)").matches&&window.matchMedia("(pointer: coarse)").matches,e||t?(e=n.offsetHeight,n.style.marginTop=(window.innerHeight-e)/2+"px",this.forceAlwaysShowScrollbar(!0)):(n.style.marginTop="",this.forceAlwaysShowScrollbar(!1)))}forceAlwaysShowScrollbar(t){this.popup&&(t?(this.popup.style.overflowY="scroll",this.popup.style.webkitOverflowScrolling="touch",this.popup.style.scrollbarWidth="auto",this._scrollbarStyle||(this._scrollbarStyle=document.createElement("style"),this._scrollbarStyle.textContent=`
          ::-webkit-scrollbar {
            width: 6px;
          }
          ::-webkit-scrollbar-thumb {
            background: #b7b9be;
            border-radius: 2px;
          }
        `,this.shadowRoot.appendChild(this._scrollbarStyle))):(this.popup.style.overflowY="",this.popup.style.webkitOverflowScrolling="",this.popup.style.scrollbarWidth="",this._scrollbarStyle&&(this._scrollbarStyle.remove(),this._scrollbarStyle=null)))}scrollToTop(){this.popup&&this.popup.scrollTo({top:0,behavior:"smooth"})}}customElements.define("spinx-popup",SpinXPopup);class SpinXWheel extends HTMLElement{data;spinedRewardIndex=-1;audio;enabledAudio=!1;audioRewards;constructor(){super(),this.attachShadow({mode:"open"}),this.init()}connectedCallback(){var t;this.render(),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.playingMusic?.enabled&&!!this.data?.playingMusic?.value,this.enabledAudio&&!this.data.noAnimation&&(t=window.SpinX.utils.getSoundUrl(this.data.playingMusic.value),this.audio=new Audio(t),this.audio.volume=0),this.audioRewards={},this.uniqueAudio={},this.data.rewards?.forEach(t=>{var e,n={enabledAudio:!1,audio:null};window.SpinX?.widgetPath&&t.config?.effectMusic?.enabled&&t.config?.effectMusic?.value&&!this.data.noAnimation&&(e=window.SpinX.utils.getSoundUrl(t.config.effectMusic.value),Object.hasOwn(this.uniqueAudio,e)||(this.uniqueAudio[e]=new Audio(e)),n.enabledAudio=!0,n.audio=this.uniqueAudio[e]),this.audioRewards[t.id]=n})}init(){this.width=this.getAttribute("width")||1e3,this.height=this.getAttribute("height")||1e3,this.defaultSize=42,this.stickerAngle=45,this.angleOffset=0,this.isSpinning=!1,this.isSpinningClass="is-spinning",this.tickerAnim,this.currentSlice=0}render(){this.data=JSON.parse(this.dataset.json),this.rewardAngle=this.data.rewards?.length?360/this.data.rewards?.length:0,this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
        }

        #container {
          width: 100%;
          aspect-ratio: 1 / 1;
          position: relative;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: ${this.data.contentSize||this.defaultSize}px;
          overflow: hidden;
        }

        canvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }

        .ticker {
          ${this.data.sticker.hidden?"display: none;":""}
          position: absolute;
          width: 7%;
          height: 15%;
          top: 7%;
          right: 8%;
          transform-origin: 50% 30%;
          transform: translate(0, 0) rotate(${this.stickerAngle}deg);
          pointer-events: none;
          filter: drop-shadow(4px 4px 4px rgba(0, 0, 0, 0.35));
        }

        .${this.isSpinningClass} .ticker {
          animation: tick 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes tick {
          40% {
            transform: translate(0, 0) rotate(20deg);
          }
        }

        @media (orientation: portrait) {
          #container {
            width: 90%;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          #container {
            width: 90%;
          }
        }

        @media (max-width: 430px) and (orientation: portrait) {
          #container {
            width: 100%;
          }
        }
      </style>

      <div id="container"></div>
    `,this.container=this.shadowRoot.getElementById("container"),this.wheel=document.createElement("canvas"),this.wheel.classList.add("wheel"),this.wheel.width=this.width,this.wheel.height=this.height,this.renderWheelCanvas(),this.data.circleCenter?.displayed?(this.circle=document.createElement("canvas"),this.circle.classList.add("circle"),this.circle.width=this.width,this.circle.height=this.height,this.renderCircleCanvas()):this.circle=null;var t=document.createElement("div");t.innerHTML=`
      <svg class="ticker" viewBox="55 0 190 300" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M71.8615 145.363C82.9061 180.684 121.428 288.612 149.699 288.611C177.97 288.611 216.491 180.684 227.536 145.363C247.489 81.5512 222.41 11.0005 149.699 11.0005C76.9872 11.0005 51.9081 81.5512 71.8615 145.363Z" fill="${this.data.sticker?.backgroundColor||"#CCCCCC"}"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="${"line"===this.data.sticker?.borderType?"M67.0663 50.5022C81.3603 22.0419 109.079 2.00046 149.699 2.00046C190.319 2.00046 218.038 22.0419 232.332 50.5022C246.376 78.4655 247.496 114.328 237.019 147.833C231.434 165.693 218.917 201.883 204.161 233.737C196.806 249.614 188.715 264.809 180.451 276.172C176.332 281.836 171.908 286.918 167.203 290.677C162.625 294.334 156.681 297.611 149.699 297.611C142.717 297.611 136.773 294.334 132.195 290.677C127.49 286.919 123.066 281.837 118.947 276.173C110.683 264.81 102.592 249.614 95.2373 233.738C80.4807 201.884 67.9636 165.693 62.3787 147.833C51.9022 114.328 53.0219 78.4655 67.0663 50.5022ZM149.699 288.611C121.428 288.612 82.9063 180.684 71.8617 145.363C51.9083 81.5512 76.9874 11.0005 149.699 11.0005C222.411 11.0005 247.49 81.5512 227.536 145.363C216.492 180.684 177.97 288.611 149.699 288.611Z":""}"  fill="${"line"===this.data.sticker?.borderType&&this.data.sticker.borderColor?this.data.sticker.borderColor:"#CCCCCC"}"/>
      </svg>
    `,this.ticker=t.firstElementChild,this.container.append(this.wheel,this.circle||"",this.ticker),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWheel",{bubbles:!0,composed:!0}))},10)}darkenHex(t,e){t=parseInt(t.slice(1),16);return"#"+(Math.max(0,(t>>16)-e)<<16|Math.max(0,(t>>8&255)-e)<<8|Math.max(0,(255&t)-e)).toString(16).padStart(6,"0")}createLinearGradientFromGradientCSS(t,e,n,i,o,a){var s=e.match(/linear-gradient\(([^,]+),/),s=s?s[1].trim():"180deg";let r=parseFloat(s);isNaN(r)&&(r=180);s=e.match(/\(([^)]+)\)/);let d=[];(d=s?s[1].split(",").slice(1).map(t=>t.trim()):d).length<2&&(d=["#000000","#FFFFFF"]);e=r*Math.PI/180,s=n+o*Math.cos(e),o=i+a*Math.sin(e);let l=t.createLinearGradient(n,i,s,o),p=d.length;return d.forEach((t,e)=>{e/=p-1;l.addColorStop(e,t)}),l}drawRewardText(r,d){var t=this.width/2,e=t-48;let l=.45*t;var n=this.data.contentSize||this.defaultSize||32;let i=n;var o=t=>{r.font=`bold ${t}px "${this.data.fontFamily}"`;t=d.replace(/\n+/g," \n ").split(" ");let e=[],n="";var i,o=()=>{n.trim()&&(e.push(n.trim()),n="")};for(i of t)if("\n"===i)o();else if(r.measureText(i).width>l){let t="";for(var a of i)r.measureText(t+a).width>l?t&&(e.push(t),t=a):t+=a;t&&(s=(n+" "+t).trim(),n=r.measureText(s).width<=l?s:(o(),t))}else{var s=(n+" "+i).trim();n=r.measureText(s).width<=l?s:(o(),i)}return o(),e};let a=o(i);for(;4<a.length&&i>Math.max(10,n-8);)--i,a=o(i);r.textAlign="right",r.textBaseline="middle",r.font=`bold ${i}px "${this.data.fontFamily}"`;var s=Math.round(1.15*i),p=Math.min(a.length,4),c=-(p-1)*s/2;for(let t=0;t<p;t++)r.fillText(a[t],e,c+t*s)}renderWheelCanvas(){let o=this.wheel.getContext("2d"),a=this.width/2;if(o.clearRect(0,0,this.width,this.height),"line"===this.data.borderAround?.type&&(o.beginPath(),o.arc(a,a,a-10,0,2*Math.PI),o.lineWidth=10,t=this.data.borderAround?.color||"#CCCCCC",o.strokeStyle=t.includes("linear-gradient")?this.createLinearGradientFromGradientCSS(o,t,2.3*a,a,1.8*a,1.8*a):t,o.stroke()),this.data.rewards?.length){let i=2*Math.PI/this.data.rewards.length;this.data.rewards?.forEach((t,e)=>{"auto_darken"===this.data.borderAround?.type&&(o.beginPath(),o.moveTo(a,a),o.arc(a,a,a,i*e+this.angleOffset,i*(e+1)+this.angleOffset),o.closePath(),o.fillStyle=this.darkenHex(t.config?.backgroundColor,20),o.fill()),o.beginPath(),o.moveTo(a,a),o.arc(a,a,a-13,i*e+this.angleOffset,i*(e+1)+this.angleOffset),o.closePath();var n=t.config?.backgroundColor||"#CCCCCC";o.fillStyle=n.includes("linear-gradient")?this.createLinearGradientFromGradientCSS(o,n,2.3*a,a,1.8*a,1.8*a):n,o.fill(),this.data.rewardBorder?.displayed&&(o.strokeStyle=this.data.rewardBorder.color,o.lineWidth=2,o.stroke()),o.save(),o.translate(a,a),o.rotate(i*e+i/2+this.angleOffset),o.textAlign="right",o.fillStyle=t.config?.contentColor||"#000000",o.font=`600 ${this.data.contentSize||this.defaultSize}px "${this.data.fontFamily}"`,this.drawRewardText(o,t.name),o.restore()})}else{var t=2*Math.PI;o.beginPath(),o.moveTo(a,a),o.arc(a,a,a-13,this.angleOffset,t+this.angleOffset),o.closePath(),o.fillStyle="#CCCCCC",o.fill()}this.wheel.style.transform="rotate(0deg)",this.wheel.style.transition="transform 15s cubic-bezier(0.20, 0.1, 0.20, 1)",this.wheel.addEventListener("transitionend",this.onTransitionend.bind(this))}renderCircleCanvas(){var e=this.circle.getContext("2d"),n=this.width/2;e.clearRect(0,0,this.width,this.height),e.beginPath(),e.arc(n,n,n/6,0,2*Math.PI);let t=this.data.circleCenter?.backgroundColor||"#CCCCCC";if(e.fillStyle=t.includes("linear-gradient")?this.createLinearGradientFromGradientCSS(e,t,n/6*2.3,n/6,n/6*1.8,n/6*1.8):t,e.fill(),"line"===this.data.circleCenter?.borderType){let t=this.data.circleCenter.borderColor||"#CCCCCC";e.strokeStyle=t.includes("linear-gradient")?this.createLinearGradientFromGradientCSS(e,t,n/6*2.3,n/6,n/6*1.8,n/6*1.8):t,e.lineWidth=5,e.stroke()}}playAudio(t=200){this.enabledAudio&&window.SpinX.utils.fadeInAudio(this.audio,t)}stopAudio(t=200){this.enabledAudio&&window.SpinX.utils.fadeOutAudio(this.audio,t)}playRewardAudio(t=200){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&window.SpinX.utils.fadeInAudio(e.audio,t)}stopRewardAudio(t=800){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&window.SpinX.utils.fadeOutAudio(e.audio,t)}spin(e){if(e&&!this.isSpinning&&(this.isSpinning=!0,this.spinedRewardIndex=this.data.rewards.findIndex(t=>t.id===e),-1!==this.spinedRewardIndex)){this.playAudio(),this.dispatchEvent(new CustomEvent("onSpinXStartSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.container.classList.add(this.isSpinningClass),this.ticker.style.animation="none",this.runTickerAnimation();var n=this.spinedRewardIndex*this.rewardAngle,i=(this.spinedRewardIndex+1)*this.rewardAngle;let t=Math.round(Math.random()*(i-n)+n);0!==t&&t%this.rewardAngle!=0||t--;i=3600-t-this.stickerAngle;this.wheel.style.transform=`rotate(${i}deg)`}}onTransitionend(){cancelAnimationFrame(this.tickerAnim),this.container.classList.remove(this.isSpinningClass),this.dispatchEvent(new CustomEvent("onSpinXEndSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.stopAudio(),this.playRewardAudio(),setTimeout(()=>{this.stopRewardAudio()},15e3)}runTickerAnimation=()=>{var t=window.getComputedStyle(this.wheel).transform.split("(")[1].split(")")[0].split(","),e=t[0];let n=Math.atan2(t[1],e);n<0&&(n+=2*Math.PI);t=Math.round(n*(180/Math.PI)),e=Math.floor((t+this.stickerAngle)/this.rewardAngle);this.currentSlice!==e&&(this.ticker.style.animation="none",setTimeout(()=>this.ticker.style.animation=null,10),this.currentSlice=e),this.tickerAnim=requestAnimationFrame(this.runTickerAnimation.bind(this))}}customElements.define("spinx-wheel",SpinXWheel);class SpinXForm extends HTMLElement{data;reward;rewardCode;isLogin=!1;container;logoContainer;spinxForm;formTitle;formContent;formContentAccount;formFields;formError;formAgreementContainer;formAgreement;formSpinButton;formDismissButton;spinxResult;resultMessageTitle;resultMessageContent;resultCode;spinxFormFooter;copyButton;copyTooltip;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);var t=this.data.content?.size||24;window.SpinX.participant?.email&&(this.isLogin=!0),this.data.textInput||(this.data.textInput={}),this.data.textInput.color||(this.data.textInput.color="#000000"),this.data.textInput.backgroundColor||(this.data.textInput.backgroundColor="#FFFFFF"),this.data.textInput.placeholderColor||(this.data.textInput.placeholderColor="#757575"),this.shadowRoot.innerHTML=`
      <style>
        #spinx-container {
          text-align: left;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        #spinx-container p {
          margin: 0 0 0.8em 0;
        }

        #spinx-container:not(.spinx-content-panel) {
          padding: 0 0.5em;
        }

        .spinx-content-panel {
          padding: 2em 2em 1em 2em;
          ${this.data.contentPanel?.backgroundColor?`background: ${this.data.contentPanel.backgroundColor};`:""}
          ${this.data.contentPanel?.blur?`backdrop-filter: blur(${this.data.contentPanel.blur});`:""}
          border-radius: 14px;
        }

        #spinx-form, #spinx-result {
          opacity: 0;
          transition: opacity 0.8s ease;
        }

        #spinx-form.show, #spinx-result.show {
          opacity: 1;
        }

        #spinx-form.hidden, #spinx-result.hidden {
          display: none;
        }

        #spinx-logo-container {
          display: none;
        }

        #spinx-logo-container img {
          height: 8em;
        }

        #spinx-form-title {
          line-height: 1.2em;
          color: ${this.data.title?.color};
          font-size: ${this.data.title?.size||32}px;
          font-weight: 600;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-form-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${t}px;
        }

        #spinx-form-content-account {
          line-height: 1.3em;
          color: ${this.data.contentForExistingAccount?.color};
          font-size: ${this.data.contentForExistingAccount?.size||24}px;
        }

        #spinx-form-fields {
          margin: 0 0 1em 0;
        }

        #spinx-form-fields p {
          margin: 0 0 0.5em 0;
        }

        #spinx-form-fields input[type="text"], #spinx-form-fields input[type="email"] {
          width: 100%;
          padding: 0.6em;
          box-sizing: border-box;
          line-height: 1.3em;
          font-size: ${t-4}px;
        }

        #spinx-form-fields input[type="text"].error, #spinx-form-fields input[type="email"].error {
          border: 2px red solid;
        }

        .spinx-form-field-item {
          background: ${this.data.textInput?.backgroundColor};
          color: ${this.data.textInput?.color};
          outline: none;
          box-shadow: none;
          border: 0;
          border-radius: 4px;
        }

        /* Chrome, Safari, Edge */
        .spinx-form-field-item::-webkit-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Firefox 19+ */
        .spinx-form-field-item::-moz-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* IE 10-11 */
        .spinx-form-field-item:-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Microsoft Edge Legacy */
        .spinx-form-field-item::-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }

        #spinx-form-error {
          display: none;
          opacity: 0;
          transition: opacity 0.5s ease;
          color: red;
          background-color: white;
          border-radius: 4px;
        }

        #spinx-form-error.show {
          display: block;
          opacity: 1;
          padding: 8px 12px;
        }

        #spinx-form-agreement-container {
          color: ${this.data.content?.color};
          font-size: 16px;
        }

        #spinx-form-agreement {
          line-height: 1.3em;
          font-size: ${t-8}px;
          width: 1em;
          height: 1em;
          cursor: pointer;
        }

        #spinx-form-agreement-container label {
          line-height: 1.3em;
          font-size: ${t-4}px;
          vertical-align: top;
          cursor: pointer;
        }

        .flash {
          color: red;
          transition: color 0.25s ease-in-out;
        }

        #spinx-form-spin-button {
          width: 100%;
          color: ${this.data.spinButton?.color};
          background: ${this.data.spinButton?.backgroundColor};
          font-size: ${this.data.spinButton?.size||24}px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-weight: 500;
          padding: 12px 16px;
          border: none;
          text-decoration: none;
          cursor: pointer;
          border-radius: 4px;
          // text-stroke: 1px rgba(0, 0, 0, 0.2);
          // -webkit-text-stroke: 1px rgba(0, 0, 0, 0.2);
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
          text-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
          transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.15s ease-out;
        }

        #spinx-form-spin-button:hover {
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
          transform: translateY(-1px);
        }

        #spinx-form-spin-button:active {
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
          transform: translateY(1px);
        }

        #spinx-form-spin-button[disabled="true"] {
          color: ${this.data.spinButton?.color} !important;
          background-color: #808080 !important;
          cursor: not-allowed !important;
          box-shadow: none !important;
          transform: none !important;
        }

        .spinx-form-dismiss-button, .spinx-result-dismiss-button {
          display: block;
          width: fit-content;
          margin: 0 auto;
          text-align: center;
          text-decoration: underline ${this.data.dismissButton?.color} 1px;
          text-underline-offset: 3px;
          color: ${this.data.dismissButton?.color};
          font-size: ${this.data.dismissButton?.size||20}px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          padding: 12px 16px;
          cursor: pointer;
        }

        .spinx-form-dismiss-button.disabled, .spinx-result-dismiss-button.disabled {
          opacity: 0.4;
          cursor: not-allowed;
          pointer-events: none;
        }

        #spinx-result-message-title {
          font-weight: 600;
          line-height: 1.2em;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-result-message-content {
          line-height: 1.3em;
        }

        #spinx-result-code input[type="text"] {
          font-size: ${t}px;
          width: 100%;
          text-align: center;
          padding: 12px 40px 12px 12px;
          font-weight: 600;
          letter-spacing: 2px;
          box-sizing: border-box;
        }

        #spinx-form-footer {
          text-align: center;
          color: ${this.data.footerContent?.color};
          font-size: ${this.data.footerContent?.size||24}px;
        }

        #spinx-result-code {
          position: relative;
        }

        #copy-btn {
          cursor: pointer;
          position: absolute;
          right: 4px;
          top: 50%;
          transform: translateY(-50%);
          padding: 8px 10px 0px 10px;
          font-size: 18px;
          user-select: none;
        }

        #copy-tooltip {
          position: absolute;
          top: -25px;
          right: 10px;
          background-color: #4CAF50;
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          opacity: 0;
          transition: opacity 0.3s ease;
          pointer-events: none;
        }

        @media (orientation: portrait) {
          #spinx-container {
            text-align: center;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 11em;
          }

          // .spinx-content-panel {
          //   padding: 1.5em 3.5em 0 3.5em;
          // }
        }

        @media (max-width: 912px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 10em;
          }

          // .spinx-content-panel {
          //   padding: 1.5em 3em 0 3em;
          // }
        }

        @media (max-width: 820px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 9em;
          }

          // .spinx-content-panel {
          //   padding: 1.5em 2.5em 0 2.5em;
          // }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          // .spinx-content-panel {
          //   padding: 1.5em 2em 0 2em;
          // }
        }

        @media (max-width: 600px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 8em;
          }
        }

        @media (max-width: 540px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 6em;
          }

          .spinx-content-panel {
            padding: 2em 1em 1em 1em;
          }
        }

        // @media (max-width: 480px) and (orientation: portrait) {
        //   .spinx-content-panel {
        //     padding: 10px 0px;
        //   }
        // }

        @media (max-width: 430px) and (orientation: portrait) {
          // .spinx-content-panel {
          //   padding: 1.8em 1.3em;
          // }

          // #spinx-form-content, #spinx-form-content-account {
          //   margin: 0.5em 0 0.8em 0;
          // }

          // #spinx-form-fields {
          //   margin-bottom: 0px;
          // }
        }

        @media (max-width: 390px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 5.5em;
          }
        }

        @media (max-width: 375px) and (orientation: portrait) {
          // .spinx-content-panel {
          //   padding: 1.5em 1em;
          // }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          // .spinx-content-panel {
          //   padding: 2em 1.5em;
          // }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          #spinx-logo-container img {
            height: 6em;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          .spinx-content-panel {
            padding: 2em 1.5em 1em 1.5em;
          }
        }

        @media (max-width: 740px) and (orientation: landscape) {
          #spinx-container {
            font-size: 13px;
          }
        }
      </style>

      <div id="spinx-container" ${this.data.contentPanel?.enabled?'class="spinx-content-panel"':""}>
        <div id="spinx-logo-container"></div>
        <div id="spinx-form">
          <p id="spinx-form-title"></p>
          <p id="spinx-form-content"></p>
          <p id="spinx-form-content-account"></p>
          <div id="spinx-form-fields"></div>
          <p id="spinx-form-error"></p>
          <p id="spinx-form-agreement-container">
            <input type="checkbox" id="spinx-form-agreement" name="agreement" value="true">
            <label for="spinx-form-agreement"></label>
          </p>
          <p id="spinx-form-spin-button-container">
            <button id="spinx-form-spin-button"></button>
          </p>
          <p id="spinx-form-dismiss-button-container">
            <span class="spinx-form-dismiss-button"></span>
          </p>
          <p id="spinx-form-footer"></p>
        </div>
        <div id="spinx-result">
          <p id="spinx-result-message-title"></p>
          <p id="spinx-result-message-content"></p>
          <p id="spinx-result-code">
            <input name="reward-code" type="text" value="" readonly="true" />
            <span id="copy-btn" title="Copy to clipboard">
              <svg width="36" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M589.3 260.9v30H371.4v-30H268.9v513h117.2v-304l109.7-99.1h202.1V260.9z" fill="#E1F0FF"></path>
                  <path d="M516.1 371.1l-122.9 99.8v346.8h370.4V371.1z" fill="#E1F0FF"></path>
                  <path d="M752.7 370.8h21.8v435.8h-21.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h277.3v21.8H495.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h21.8v124.3h-21.8z" fill="#446EB1"></path>
                  <path d="M397.7 488.7l-15.4-15.4 113.5-102.5 15.4 15.4z" fill="#446EB1"></path>
                  <path d="M382.3 473.3h135.3v21.8H382.3z" fill="#446EB1"></path>
                  <path d="M382.3 479.7h21.8v348.6h-21.8zM404.1 806.6h370.4v21.8H404.1z" fill="#446EB1"></path>
                  <path d="M447.7 545.1h261.5v21.8H447.7zM447.7 610.5h261.5v21.8H447.7zM447.7 675.8h261.5v21.8H447.7z" fill="#6D9EE8"></path>
                  <path d="M251.6 763h130.7v21.8H251.6z" fill="#446EB1"></path>
                  <path d="M251.6 240.1h21.8v544.7h-21.8zM687.3 240.1h21.8v130.7h-21.8zM273.4 240.1h108.9v21.8H273.4z" fill="#446EB1"></path>
                  <path d="M578.4 240.1h130.7v21.8H578.4zM360.5 196.5h21.8v108.9h-21.8zM382.3 283.7h196.1v21.8H382.3zM534.8 196.5h65.4v21.8h-65.4z" fill="#446EB1"></path>
                  <path d="M360.5 196.5h65.4v21.8h-65.4zM404.1 174.7h152.5v21.8H404.1zM578.4 196.5h21.8v108.9h-21.8z" fill="#446EB1"></path>
                </g>
              </svg>
            </span>
            <span id="copy-tooltip">Copied!</span>
          </p>
          <p id="spinx-result-dismiss-button-container">
            <span class="spinx-result-dismiss-button"></span>
          </p>
        </div>
      </div>

      <style>
        ${this.data.styleContent}
      </style>
    `,this.container=this.shadowRoot.getElementById("spinx-container"),this.logoContainer=this.shadowRoot.getElementById("spinx-logo-container"),this.spinxForm=this.shadowRoot.getElementById("spinx-form"),this.formTitle=this.shadowRoot.getElementById("spinx-form-title"),this.formContent=this.shadowRoot.getElementById("spinx-form-content"),this.formContentAccount=this.shadowRoot.getElementById("spinx-form-content-account"),this.formFields=this.shadowRoot.getElementById("spinx-form-fields"),this.formError=this.shadowRoot.getElementById("spinx-form-error"),this.formAgreementContainer=this.shadowRoot.getElementById("spinx-form-agreement-container"),this.formAgreement=this.shadowRoot.getElementById("spinx-form-agreement"),this.formAgreementLabel=this.formAgreementContainer.getElementsByTagName("label")[0],this.formSpinButton=this.shadowRoot.getElementById("spinx-form-spin-button"),this.formDismissButton=this.shadowRoot.querySelector(".spinx-form-dismiss-button"),this.formResultDismissButton=this.shadowRoot.querySelector(".spinx-result-dismiss-button"),this.spinxResult=this.shadowRoot.getElementById("spinx-result"),this.resultMessageTitle=this.shadowRoot.getElementById("spinx-result-message-title"),this.resultMessageContent=this.shadowRoot.getElementById("spinx-result-message-content"),this.resultCode=this.shadowRoot.getElementById("spinx-result-code"),this.resultCodeInput=this.resultCode.getElementsByTagName("input")[0],this.spinxFormFooter=this.shadowRoot.getElementById("spinx-form-footer"),this.copyButton=this.shadowRoot.getElementById("copy-btn"),this.copyTooltip=this.shadowRoot.getElementById("copy-tooltip"),this.generateContents(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedForm",{bubbles:!0,composed:!0}))},10)}showSpinXForm(t=!0){t?(this.spinxForm.classList.remove("hidden"),this.spinxResult.classList.add("hidden"),this.spinxResult.classList.remove("show"),setTimeout(()=>this.spinxForm.classList.add("show"),10)):(this.spinxForm.classList.add("hidden"),this.spinxResult.classList.remove("hidden"),this.spinxForm.classList.remove("show"),setTimeout(()=>this.spinxResult.classList.add("show"),10))}generateMinAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.min?"number"===t.type?`min="${t.min}"`:`minLength="${t.min}"`:""}generateMaxAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.max?"number"===t.type?`max="${t.max}"`:`maxLength="${t.max}"`:""}generateFields(){let e="";return this.reward||this.data.fields?.forEach(t=>{e+=`<p><input id="spinx-form-${t.name}" class="spinx-form-field-item" name="${t.name}" autocomplete="${t.name}" placeholder="${t.placeholder||t.label}" type="${t.type}" required="${t.required}" ${this.generateMinAttribute(t)} ${this.generateMaxAttribute(t)} /></p>`}),e}generateContents(){this.data.showLogo?.enabled&&window.SpinX.site?.config?.logo?.url&&(this.logoContainer.style.display="block",this.logoContainer.innerHTML=`<img src="${window.SpinX.site.config.logo.url}" alt="${window.SpinX.site.name}">`),this.reward?(this.showSpinXForm(!1),this.resultMessageTitle.innerText=this.reward.config?.message?.title?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageContent.innerText=this.reward.config?.message?.content?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageTitle.style.color=this.reward.config?.message?.title?.color,this.resultMessageTitle.style.fontSize=this.reward.config?.message?.title?.size+"px",this.resultMessageContent.style.color=this.reward.config?.message?.content?.color,this.resultMessageContent.style.fontSize=this.reward.config?.message?.content?.size+"px","none"!==this.reward.type?this.resultCodeInput.value=this.rewardCode:(this.resultCodeInput.style.display="none",this.copyButton.style.display="none",this.copyTooltip.style.display="none"),this.formDismissButton.innerText=this.data.dismissButton?.text||"",this.formDismissButton.classList.remove("disabled")):(this.showSpinXForm(),this.formTitle.innerText=this.data.title?.text||"",this.isLogin?(this.formContent.style.display="none",this.formFields.style.display="none",this.formContentAccount.style.display="block",this.formContentAccount.innerHTML=window.SpinX.utils.escapeHtml(this.data.contentForExistingAccount?.text||"").replace(/{{NAME}}/g,`<b>${window.SpinX.utils.getParticipantName(window.SpinX.participant)||"Unknown"}</b>`)||""):(this.formContent.style.display="block",this.formFields.style.display="block",this.formContentAccount.style.display="none",this.formContent.innerText=this.data.content?.text||"",this.formFields.innerHTML=this.generateFields()),this.formAgreementLabel.innerText=this.data.agreement,this.formSpinButton.innerText=this.data.spinButton?.text||"",this.spinxFormFooter.innerText=this.data.footerContent?.text||"",this.formDismissButton.innerText=this.data.dismissButton?.text||"",this.formResultDismissButton.innerText=this.data.dismissButton?.text||"",this.registerEvents())}handleCopyCode(){this.copyButton.addEventListener("click",()=>{var t=this.resultCodeInput;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value).then(()=>{let t=this.copyTooltip;t.style.opacity=1,setTimeout(()=>{t.style.opacity=0},2e3)})})}enableFormInputs(e){this.isLogin||this.data.fields.forEach(t=>{t=this.shadowRoot.getElementById("spinx-form-"+t.name);e?t.removeAttribute("readonly"):t.setAttribute("readonly",!0)}),e?(this.formAgreement.removeAttribute("disabled"),this.formSpinButton.removeAttribute("disabled"),this.formDismissButton.classList.remove("disabled")):(this.formAgreement.setAttribute("disabled",!0),this.formSpinButton.setAttribute("disabled",!0),this.formDismissButton.classList.add("disabled"))}registerEvents(){this.isLogin||this.data.fields?.forEach(t=>{let e=this.shadowRoot.getElementById("spinx-form-"+t.name);e.addEventListener("change",()=>{t.value=e.value,["text","email"].includes(t.type)&&t.max&&t.value.length>t.max&&(t.value=t.value.substring(0,t.max))})}),this.formSpinButton.addEventListener("click",()=>{if(this.validateForm())if(this.formAgreement.checked){let t={};var e,n,i;this.isLogin?t={...window.SpinX.participant}:"first-name_last-name_email"===this.data.formTemplate?(n=this.shadowRoot.getElementById("spinx-form-first-name"),i=this.shadowRoot.getElementById("spinx-form-last-name"),e=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName=i.value,t.email=e.value):(n=this.shadowRoot.getElementById("spinx-form-name"),i=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName="",t.email=i.value),t.locale=window.SpinX.locale,setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXSpin",{bubbles:!0,composed:!0,detail:t}))},10)}else this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash"),setTimeout(()=>{this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash"),setTimeout(()=>{this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash")},1500)},50)},200)},50)},200)}),this.formDismissButton.addEventListener("click",()=>window.SpinX.components.popup?.close()),this.formResultDismissButton.addEventListener("click",()=>window.SpinX.components.popup?.close())}validateField(t){this.formError.classList.remove("show");let e=!(this.formError.innerText="");var n=this.shadowRoot.getElementById("spinx-form-"+t.name);return n.classList.remove("error"),"name"===t.name?t.required&&!t.value&&(e=!1,this.formError.innerText=t.messages?.required||""):"email"===t.name&&(t.required&&!t.value?(e=!1,this.formError.innerText=t.messages?.required||""):/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.value)||(e=!1,this.formError.innerText=t.messages?.type||"")),this.formError.innerText&&(this.formError.classList.add("show"),n.classList.add("error")),e}validateForm(){let e=!0;if(!this.isLogin&&this.data.fields?.length)for(let t=0;t<this.data.fields.length;t++){var n=this.data.fields[t];if(!(e=this.validateField(n)))break}return e}showError(t){this.formError.innerText="",this.formError.classList.remove("show"),t&&(this.formError.innerText=t,this.formError.classList.add("show"))}showReward(t,e){this.reward=t,this.rewardCode=e,this.generateContents(),this.handleCopyCode()}}async function initSpinXApp(n,i){if(window.SpinX.utils.removeWelcomePopup(),window.SpinX.utils.removeIntentPopup(),window.SpinX.utils.removeSpinXPopup(),window.SpinX.utils.removeSpinXOpener(),window.SpinX.utils.removeAnnouncement(),!window.SpinX.utils.checkAppHidden(n?.config?.excludeUrls||[])&&["scheduled","launching"].includes(n?.status)){var o,a=window.SpinX.utils.getThemeDataUrl(n.config?.theme?.value),a=await window.SpinX.utils.readJson(a);if("launching"===n?.status&&window.SpinX.utils.checkOpenerEnable(n)&&(window.SpinX.opener=await window.SpinX.utils.combineOpenerData(n,a),o=window.SpinX.utils.initSpinXOpener(window.SpinX.opener,void 0,()=>{var t=window.SpinX.components.popup;t&&(t.isOpened?t.close():t.open())}),window.SpinX.components.opener=o),window.SpinX.utils.checkAnnouncementBarEnable(n)){window.SpinX.announcement=await window.SpinX.utils.combineAnnouncementData(n,a);let e=window.SpinX.utils.initAnnouncement(window.SpinX.announcement,void 0,t=>{window.SpinX.utils.checkOpenerEnable(n)&&(t.detail&&"bottom"===window.SpinX.announcement.position?(t=e.getContainerHeight(),window.SpinX.components.opener?.resetBottomDistance(t)):window.SpinX.components.opener?.resetBottomDistance(0))});window.SpinX.components.announcement=e}if("launching"===n?.status){window.SpinX.wheel=await window.SpinX.utils.combineWheelData(n,a),window.SpinX.popup=await window.SpinX.utils.combinePopupData(n,a);let e=!1,t=window.SpinX.utils.initSpinXPopup(window.SpinX.popup,e=>{var t=window.SpinX.utils.initSpinXWheel(window.SpinX.wheel,t=>{e.scrollToTop(),window.SpinX.components.opener?.enableOpenerButton(!1),window.SpinX.components.popup.enableCloseButton(!1),window.SpinX.components.popup.stopAudio(200)},t=>{window.SpinX.components.popup.enableCloseButton(!0),window.SpinX.components.opener?.enableOpenerButton(!0);var t=t.detail.reward,e=window.SpinX.winningReward?.code;t?(window.SpinX.components.form.showReward(t,e),window.SpinX.winningReward={...window.SpinX.winningReward,id:t.id,name:t.name,type:t.type},window.SpinX.utils.setSessionWithTTL(window.SpinX.winningRewardKey,{rewardId:t.id,rewardCode:e},9e5),window.SpinX.utils.checkAnnouncementBarEnable(n)&&window.SpinX.components.announcement.reset()):window.SpinX.utils.removeSessionWithTTL(window.SpinX.winningRewardKey)}),t=(window.SpinX.components.wheel=t,e.setSpinContent(t),window.SpinX.utils.initSpinXForm(window.SpinX.popup,async t=>{t=t.detail;if(window.SpinX.components.form.enableFormInputs(!1),"function"==typeof i?.spin){window.SpinX.components.form.showError();try{var e=await i.spin(n.id,t);if(!e?.rewardId)throw new Error("Sorry, something went wrong. Please try it again!");window.SpinX.winningReward={code:e.rewardCode},window.SpinX.components.wheel.spin(e.rewardId)}catch(t){window.SpinX.components.form.showError(t.message),window.SpinX.components.form.enableFormInputs(!0)}}}));window.SpinX.components.form=t,e.setFormContent(t)},t=>{"function"==typeof i?.view&&(e||(e=!0,i.view(n.id,{pageTemplate:window.SpinX.pageTemplate,urlPath:location.pathname,email:window.SpinX.participant?.email||null})),localStorage.setItem(window.SpinX.utils.getTriggerKey(n.id),!0))});window.SpinX.components.popup=t,window.SpinX.utils.checkWelcomePopupEnable(n)&&(window.SpinX.delayedDisplay=await window.SpinX.utils.combineDelayedDisplayData(n,a),o=window.SpinX.utils.initWelcomePopup(window.SpinX.delayedDisplay,t=>{t.registerPopupTrigger(n.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.welcomePopup=o),window.SpinX.utils.checkIntentPopupEnable(n)&&(window.SpinX.exitIntent=await window.SpinX.utils.combineExitIntentData(n,a),o=window.SpinX.utils.initIntentPopup(window.SpinX.exitIntent,t=>{t.registerPopupTrigger(n.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.intentPopup=o)}}}customElements.define("spinx-form",SpinXForm);