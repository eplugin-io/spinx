function getSpinXCustomizedData(t,e,n="value",i){return i||(t?.customized&&null!=t[n]?t[n]:e&&Object.hasOwn(e,n)?e[n]:e)}function getSpinXRewardTypeDefault(t,e){e=e.rewardTypes;let n;return e&&("none"===t.type?n=e.none:"discount_code"===t.type?n=e.discountCode:"free_shipping"===t.type?n=e.freeShipping:"free_gift"===t.type&&(n=e.freeGift)),n}function getSpinXRewardEffectMusic(t,e){return(null==t.config?.effectMusic?.enabled||t.config?.effectMusic?.enabled&&!t.config?.effectMusic?.value?getSpinXRewardTypeDefault(t,e):t.config)?.effectMusic}function getSpinXCustomizedRewardMessage(t,e,n,i){var e=e.config?.popup||{},o=n?.popup,n=getSpinXRewardTypeDefault(t,n);return{title:{text:getSpinXCustomizedData(t.config?.message?.title,n?.message?.title,"text",i?.messageTitle),size:Number(getSpinXCustomizedData(t.config?.message?.title,getSpinXCustomizedData(e.title,o?.title,"size"),"size")),color:getSpinXCustomizedData(t.config?.message?.title,getSpinXCustomizedData(e.title,o?.title,"color"),"color")},content:{text:getSpinXCustomizedData(t.config?.message?.content,n?.message?.content,"text",i?.messageContent),size:Number(getSpinXCustomizedData(t.config?.message?.content,getSpinXCustomizedData(e.content,o?.content,"size"),"size")),color:getSpinXCustomizedData(t.config?.message?.content,getSpinXCustomizedData(e.content,o?.content,"color"),"color")}}}function getSpinXCustomizedResourceUrl(t,e,n){return t&&e?.url?e.url:n?.path?""+window.SpinX.widgetPath+n.path:null}function getSpinXCurrentLocale(t){var e=window.SpinX.locale;return e&&t.config?.langs&&Object.hasOwn(t.config.langs,e)?t.config.langs[e]:null}function getSpinXThemeCate(t){return!t?.startsWith("CLS_")&&t?.startsWith("HLW_")?"halloween":"classic"}function getSpinXThemeDataUrl(t){var e=getSpinXThemeCate(t);return window.SpinX.widgetPath+`/catalog/${e}/themes/${t}/theme.json`}function getSpinXOpenerIconUrl(t){var e=getSpinXThemeCate(t);return window.SpinX.widgetPath+`/catalog/${e}/openers/${t}.png`}function getSpinXSoundUrl(t){var e=getSpinXThemeCate(t);let n=t;return t?.includes("_BG_")?n="background/"+t:t?.includes("_PY_")?n="playing/"+t:t?.includes("_WN_")?n="winning/"+t:t?.includes("_LS_")&&(n="losing/"+t),`${window.SpinX.widgetPath}/catalog/${e}/sounds/${n}.mp3`}function initSpinXWheel(t,e,n){var i=document.createElement("spinx-wheel");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXStartSpin",e),"function"==typeof n&&i.addEventListener("onSpinXEndSpin",n),i}function initSpinXForm(t,e){var n=document.createElement("spinx-form");return n.dataset.json=JSON.stringify(t),"function"==typeof e&&n.addEventListener("onSpinXSpin",e),n}function initSpinXPopup(t,e,n){let i=document.createElement("spinx-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedPopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXOpenedPopup",()=>n(i)),document.body.append(i),i}function removeSpinXPopup(){document.querySelector("spinx-popup")?.remove()}function initSpinXOpener(t,e,n){let i=document.createElement("spinx-opener");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedOpener",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickOpener",n),document.body.append(i),i}function removeSpinXOpener(){document.querySelector("spinx-opener")?.remove()}function initSpinXWelcomePopup(t,e,n){let i=document.createElement("spinx-welcome-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedWelcomePopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickWelcomePopup",n),document.body.append(i),i}function removeSpinXWelcomePopup(){document.querySelector("spinx-welcome-popup")?.remove()}function initSpinXIntentPopup(t,e,n){let i=document.createElement("spinx-intent-popup");return i.dataset.json=JSON.stringify(t),"function"==typeof e&&i.addEventListener("onSpinXLoadedIntentPopup",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXClickIntentPopup",n),document.body.append(i),i}function removeSpinXIntentPopup(){document.querySelector("spinx-intent-popup")?.remove()}function initSpinXAnnouncement(t,e,n){let i=document.createElement("spinx-announcement");return i.dataset.json=JSON.stringify(t),"top"===t.position?document.body.insertBefore(i,document.body.firstChild):document.body.append(i),"function"==typeof e&&i.addEventListener("onSpinXLoadedAnnouncement",()=>e(i)),"function"==typeof n&&i.addEventListener("onSpinXVisibleAnnouncementChanged",n),i}function removeSpinXAnnouncement(){document.querySelector("spinx-announcement")?.remove()}function getSpinXTriggerKey(t){return window.SpinX.disableAutoTriggerPopupKey+`_${t}_`+(window.SpinX.participant?.id||"anonymous")}function getSpinXViewTrackingKey(t){return"spinx_view_"+t}function checkSpinXAppHidden(t){let e=window.location.pathname;return t.some(t=>e.startsWith(t))}function checkSpinXOpenerEnable(t){return!!t?.config?.triggers?.opener?.enabled}function checkSpinXWelcomePopupEnable(t){return!!t?.config?.triggers?.delayedDisplay?.enabled}function checkSpinXIntentPopupEnable(t){return!!t?.config?.triggers?.exitIntent?.enabled}function checkSpinXAnnouncementBarEnable(t){return!!t?.config?.announcement?.upcomingEvent?.enabled||!!t?.config?.announcement?.readyToSpin?.enabled}function fadeInSpinXAudio(e,n=500){e.currentTime=0,e.volume=0,e.play();let i=performance.now(),o=t=>{t=Math.min(1,(t-i)/n);e.volume=Math.min(1,Math.max(0,t)),t<1&&requestAnimationFrame(o)};requestAnimationFrame(o)}function fadeOutSpinXAudio(e,n=500){let i=e.volume,o=performance.now(),a=t=>{t=Math.min(1,(t-o)/n);e.volume=Math.min(1,Math.max(0,i*(1-t))),t<1?requestAnimationFrame(a):(e.pause(),e.currentTime=0)};requestAnimationFrame(a)}function readSpinXJson(t){return fetch(t).then(t=>{if(t.ok)return t.json();throw new Error("HTTP error "+t.status)}).catch(function(){this.dataError=!0})}function getSpinXParticipantName(t){var e=(`${t.firstName||""} `+(t.lastName||"")).trim();return e||t.email}function convertSpinXCurrency(t,e="USD",n){return t.toLocaleString(n?.locales,{style:"currency",currency:e,currencyDisplay:n?.currencyDisplay})}function formatSpinXDateTime(t){return"[object Date]"!==Object.prototype.toString.call(t)?"NaD":dayjs(t).format("DD/MM/YYYY HH:mm")}function lessThanSpinXHours(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/36e5<n}function lessThanSpinXDays(t,e,n){return 0<t.getTime()-e.getTime()&&(t.getTime()-e.getTime())/864e5<n}function convertSpinXCountDownTime(t){var e=t%3600;return Math.floor(t/3600)+`:${Math.floor(e/60)}:`+Math.floor(e%60)}function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function loadGoogleFont(t){if(["Arial","Times New Roman","Courier New","Verdana","Tahoma"].includes(t))return Promise.resolve();let i=`https://fonts.googleapis.com/css2?family=${t.replace(" ","+")}:wght@400;700&display=swap`;return Array.from(document.head.getElementsByTagName("link")).find(t=>t.href===i)?document.fonts.ready:new Promise((t,e)=>{var n=document.createElement("link");n.href=i,n.rel="stylesheet",n.onload=()=>{document.fonts.ready.then(t).catch(e)},n.onerror=e,document.head.appendChild(n)})}function onSpinXElementSizeChange(n,i,t={}){if(!n)throw new Error("onSizeChange: element is required");if("function"!=typeof i)throw new Error("onSizeChange: callback is required");let{box:o="border-box",initial:e=!0}=t,a=!1,s=-1,r=-1,d=()=>{var t,e;a||({width:e,height:t}="content-box"===o?{width:n.clientWidth,height:n.clientHeight}:{width:(e=n.getBoundingClientRect()).width,height:e.height},e===s&&t===r)||(s=e,r=t,i({width:e,height:t}))};if(e&&d(),"undefined"!=typeof ResizeObserver){let t=new ResizeObserver(()=>{requestAnimationFrame(d)});try{t.observe(n,{box:"content-box"===o?"content-box":"border-box"})}catch{t.observe(n)}return()=>{a=!0,t.disconnect()}}let p=new MutationObserver(()=>requestAnimationFrame(d)),l=(p.observe(n,{attributes:!0,attributeFilter:["style","class"],childList:!0,subtree:!0,characterData:!0}),()=>d()),c=(window.addEventListener("resize",l),window.addEventListener("orientationchange",l),setInterval(d,200));return()=>{a=!0,p.disconnect(),window.removeEventListener("resize",l),window.removeEventListener("orientationchange",l),clearInterval(c)}}function combineSpinXWheelData(a,s){var t=a.config?.wheel||{};let r=getSpinXCurrentLocale(a),d=s.wheel,p=(t,e)=>e<t?e:p(t,e-t);return{fontFamily:getSpinXCustomizedData(t.fontFamily,d?.fontFamily),contentSize:Number(getSpinXCustomizedData(t.contentSize,d?.contentSize)),borderAround:{type:getSpinXCustomizedData(t.borderAround,d?.borderAround,"type"),color:getSpinXCustomizedData(t.borderAround,d?.borderAround,"color")},rewardBorder:{displayed:getSpinXCustomizedData(t.rewardBorder,d?.rewardBorder,"displayed"),color:getSpinXCustomizedData(t.rewardBorder,d?.rewardBorder,"color")},circleCenter:{displayed:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"displayed"),borderType:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"borderType"),borderColor:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"borderColor"),backgroundColor:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"backgroundColor"),icon:getSpinXCustomizedData(t.circleCenter,d?.circleCenter,"icon")},sticker:{borderType:getSpinXCustomizedData(t.sticker,d?.sticker,"borderType"),borderColor:getSpinXCustomizedData(t.sticker,d?.sticker,"borderColor"),backgroundColor:getSpinXCustomizedData(t.sticker,d?.sticker,"backgroundColor")},playingMusic:t.playingMusic||d?.playingMusic,rewards:a.rewards?.map((t,e)=>{let n=t;var t=n.config||{},e=d.rewards?.length?d.rewards[p(d.rewards.length,e)]:null,i=r?.rewards?.find(t=>t.id===n.id),o=i?.name||n.name;return t.discountCode?.amount&&"number"!=typeof t.discountCode.amount&&(t.discountCode.amount=Number(t.discountCode.amount)),t.discountCode?.percentage&&"number"!=typeof t.discountCode.percentage&&(t.discountCode.percentage=Number(t.discountCode.percentage)),t.discountCode?.startTime?.date&&"string"==typeof t.discountCode.startTime.date&&(t.discountCode.startTime.date=new Date(t.discountCode.startTime.date)),t.discountCode?.endTime?.date&&"string"==typeof t.discountCode.endTime.date&&(t.discountCode.endTime.date=new Date(t.discountCode.endTime.date)),t.freeShipping?.shippingRates?.amount&&"number"!=typeof t.freeShipping.shippingRates.amount&&(t.freeShipping.shippingRates.amount=Number(t.freeShipping.shippingRates.amount)),t.freeShipping?.startTime?.date&&"string"==typeof t.freeShipping.startTime.date&&(t.freeShipping.startTime.date=new Date(t.freeShipping.startTime.date)),t.freeShipping?.endTime?.date&&"string"==typeof t.freeShipping.endTime.date&&(t.freeShipping.endTime.date=new Date(t.freeShipping.endTime.date)),t.freeGift?.quantity?.amount&&"number"!=typeof t.freeGift.quantity.amount&&(t.freeGift.quantity.amount=Number(t.freeGift.quantity.amount)),t.freeGift?.startTime?.date&&"string"==typeof t.freeGift.startTime.date&&(t.freeGift.startTime.date=new Date(t.freeGift.startTime.date)),t.freeGift?.endTime?.date&&"string"==typeof t.freeGift.endTime.date&&(t.freeGift.endTime.date=new Date(t.freeGift.endTime.date)),{id:n.id,name:o,type:n.type,status:n.status,order:n.order,config:{discountCode:t.discountCode,freeShipping:t.freeShipping,contentColor:getSpinXCustomizedData(t.contentColor,e?.contentColor),backgroundColor:getSpinXCustomizedData(t.backgroundColor,e?.backgroundColor),effectMusic:getSpinXRewardEffectMusic(n,s),message:getSpinXCustomizedRewardMessage(n,a,s,i)}}})}}function combineSpinXPopupData(t,e){var n=t.config?.popup||{};let i=getSpinXCurrentLocale(t);t=e?.popup;return{contentColor:n?.content?.color,displayType:n.displayType||t?.displayType,showLogo:"boolean"==typeof n.showLogo?n.showLogo:t?.showLogo,background:{backgroundColor:getSpinXCustomizedData(n.background,t?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(n.background?.customized,n.background?.backgroundImage,t?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(n.background?.customized,n.background?.mobileBackgroundImage,t?.background?.mobileBackgroundImage)},backgroundMusic:n.backgroundMusic||t?.backgroundMusic,fontFamily:getSpinXCustomizedData(n.fontFamily,t?.fontFamily),title:{text:getSpinXCustomizedData(n.title,t?.title,"text",i?.popup?.title),size:Number(getSpinXCustomizedData(n.title,t?.title,"size")),color:getSpinXCustomizedData(n.title,t?.title,"color")},content:{text:getSpinXCustomizedData(n.content,t?.content,"text",i?.popup?.content),size:Number(getSpinXCustomizedData(n.content,t?.content,"size")),color:getSpinXCustomizedData(n.content,t?.content,"color")},contentForExistingAccount:{text:getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"text",i?.popup?.contentForExistingAccount),size:Number(getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"size")),color:getSpinXCustomizedData(n.contentForExistingAccount,t?.contentForExistingAccount,"color")},fields:(n.fields||t?.fields)?.map(e=>{let n=i?.popup?.fields?.find(t=>t.name===e.name);return n?.label&&(e.label=n.label),n?.placeholder&&(e.placeholder=n.placeholder),e.messages||(e.messages={}),Object.keys(n?.messages||{}).forEach(t=>{e.messages[t]=n.messages[t]}),e}),textInput:{color:getSpinXCustomizedData(n.textInput,t?.textInput,"color"),backgroundColor:getSpinXCustomizedData(n.textInput,t?.textInput,"backgroundColor"),placeholderColor:getSpinXCustomizedData(n.textInput,t?.textInput,"placeholderColor")},agreement:i?.popup?.agreement||t?.agreement,spinButton:{text:getSpinXCustomizedData(n.spinButton,t?.spinButton,"text",i?.popup?.spinButton),size:Number(getSpinXCustomizedData(n.spinButton,t?.spinButton,"size")),color:getSpinXCustomizedData(n.spinButton,t?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(n.spinButton,t?.spinButton,"backgroundColor")},footerContent:{text:getSpinXCustomizedData(n.footerContent,t?.footerContent,"text",i?.popup?.footerContent),size:Number(getSpinXCustomizedData(n.footerContent,t?.footerContent,"size")),color:getSpinXCustomizedData(n.footerContent,t?.footerContent,"color")},styleContent:getSpinXCustomizedData(n.styleContent,"")}}function combineSpinXOpenerData(t,e){var n=t.config||{},t=getSpinXCurrentLocale(t),n=n.triggers.opener,e=e?.triggers?.opener||{},i={...e?.attentionEffect||{},...n.attentionEffect||{}};return"string"==typeof i.intervalTime&&(i.intervalTime=Number(i.intervalTime)),{content:getSpinXCustomizedData(n.content,e?.content,"value",t?.triggers?.opener?.content),position:n.position,distance:{left:Number(getSpinXCustomizedData(n.distance?.left,e?.distance?.left)),right:Number(getSpinXCustomizedData(n.distance?.right,e?.distance?.right)),bottom:Number(getSpinXCustomizedData(n.distance?.bottom,e?.distance?.bottom)),bottomFromAnnouncement:Number(getSpinXCustomizedData(n.distance?.bottomFromAnnouncement,e?.distance?.bottomFromAnnouncement))},fontFamily:getSpinXCustomizedData(n.fontFamily,e?.fontFamily),contentColor:getSpinXCustomizedData(n.contentColor,e?.contentColor),backgroundColor:getSpinXCustomizedData(n.backgroundColor,e?.backgroundColor),icon:n.icon?.value?n.icon:e?.icon,attentionEffect:i}}function combineDelayedDisplayData(t,e){var n=getSpinXCurrentLocale(t),t=t.config?.triggers?.delayedDisplay||{},e=e?.triggers?.delayedDisplay;return{delay:getSpinXCustomizedData(t.delay,e?.delay),background:{backgroundColor:getSpinXCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(t.background?.customized,t.background?.backgroundImage,e?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(t.background?.customized,t.background?.mobileBackgroundImage,e?.background?.mobileBackgroundImage)},fontFamily:getSpinXCustomizedData(t.fontFamily,e?.fontFamily),title:{text:getSpinXCustomizedData(t.title,e?.title,"text",n?.triggers?.delayedDisplay?.title),size:Number(getSpinXCustomizedData(t.title,e?.title,"size")),color:getSpinXCustomizedData(t.title,e?.title,"color")},content:{text:getSpinXCustomizedData(t.content,e?.content,"text",n?.triggers?.delayedDisplay?.content),size:Number(getSpinXCustomizedData(t.content,e?.content,"size")),color:getSpinXCustomizedData(t.content,e?.content,"color")},contentBottom:{text:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.delayedDisplay?.contentBottom),size:Number(getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.delayedDisplay?.spinButton),size:Number(getSpinXCustomizedData(t.spinButton,e?.spinButton,"size")),color:getSpinXCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(t.spinButton,e?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.delayedDisplay?.cancelButton),size:Number(getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor")}}}function combineExitIntentData(t,e){var n=getSpinXCurrentLocale(t),t=t.config?.triggers?.exitIntent||{},e=e?.triggers?.exitIntent;return{desktop:t.desktop,mobile:t.mobile,background:{backgroundColor:getSpinXCustomizedData(t.background,e?.background,"backgroundColor"),backgroundImage:getSpinXCustomizedResourceUrl(t.background?.customized,t.background?.backgroundImage,e?.background?.backgroundImage),mobileBackgroundImage:getSpinXCustomizedResourceUrl(t.background?.customized,t.background?.mobileBackgroundImage,e?.background?.mobileBackgroundImage)},fontFamily:getSpinXCustomizedData(t.fontFamily,e?.fontFamily),title:{text:getSpinXCustomizedData(t.title,e?.title,"text",n?.triggers?.exitIntent?.title),size:Number(getSpinXCustomizedData(t.title,e?.title,"size")),color:getSpinXCustomizedData(t.title,e?.title,"color")},content:{text:getSpinXCustomizedData(t.content,e?.content,"text",n?.triggers?.exitIntent?.content),size:Number(getSpinXCustomizedData(t.content,e?.content,"size")),color:getSpinXCustomizedData(t.content,e?.content,"color")},contentBottom:{text:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"text",n?.triggers?.exitIntent?.contentBottom),size:Number(getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"size")),color:getSpinXCustomizedData(t.contentBottom,e?.contentBottom,"color")},spinButton:{text:getSpinXCustomizedData(t.spinButton,e?.spinButton,"text",n?.triggers?.exitIntent?.spinButton),size:Number(getSpinXCustomizedData(t.spinButton,e?.spinButton,"size")),color:getSpinXCustomizedData(t.spinButton,e?.spinButton,"color"),backgroundColor:getSpinXCustomizedData(t.spinButton,e?.spinButton,"backgroundColor")},cancelButton:{text:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"text",n?.triggers?.exitIntent?.cancelButton),size:Number(getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"size")),color:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"color"),backgroundColor:getSpinXCustomizedData(t.cancelButton,e?.cancelButton,"backgroundColor")}}}function combineSpinXAnnouncementData(t,e){var n=t.config||{},i=getSpinXCurrentLocale(t),o=n.announcement,a=e?.announcement||{},s={...o.upcomingEvent||{},content:getSpinXCustomizedData(o.upcomingEvent?.content,a?.upcomingEvent?.content,"value",i?.announcement?.upcomingEvent?.content)},r={...o.readyToSpin||{},content:getSpinXCustomizedData(o.readyToSpin?.content,a?.readyToSpin?.content,"value",i?.announcement?.readyToSpin?.content)},d={...o.countDownToLaunch||{},content:getSpinXCustomizedData(o.countDownToLaunch?.content,a?.countDownToLaunch?.content,"value",i?.announcement?.countDownToLaunch?.content)},i={...o.countDownToClose||{},content:getSpinXCustomizedData(o.countDownToClose?.content,a?.countDownToClose?.content,"value",i?.announcement?.countDownToClose?.content)},p=(s.displayDays&&"number"!=typeof s.displayDays&&(s.displayDays=Number(s.displayDays)),d.displayHours&&"number"!=typeof d.displayHours&&(d.displayHours=Number(d.displayHours)),i.displayHours&&"number"!=typeof i.displayHours&&(i.displayHours=Number(i.displayHours)),getSpinXWheelWinningReward());return{status:t.status,spinState:{state:"scheduled"===t.status?"upcoming_event":p?"use_winning_reward":"launching"===t.status?"ready_to_spin":"",rewardCode:p},scheduledAt:t.scheduledAt&&"string"==typeof t.scheduledAt?new Date(t.scheduledAt):t.scheduledAt,launchedAt:t.launchedAt&&"string"==typeof t.launchedAt?new Date(t.launchedAt):t.launchedAt,closedAt:t.closedAt&&"string"==typeof t.closedAt?new Date(t.closedAt):t.closedAt,position:o.position,displayType:o.displayType,fontFamily:getSpinXCustomizedData(o.fontFamily,a?.fontFamily),contentSize:Number(getSpinXCustomizedData(o.contentSize,a?.contentSize)),contentColor:getSpinXCustomizedData(o.contentColor,a?.contentColor),backgroundColor:getSpinXCustomizedData(o.backgroundColor,a?.backgroundColor),openerIcon:n.triggers?.opener?.icon?.value?n.triggers.opener.icon:e?.triggers?.opener?.icon,upcomingEvent:s,readyToSpin:r,countDownToLaunch:d,countDownToClose:i}}function setSpinXWheelWinningReward(t){try{sessionStorage.setItem("spinx-wheel-reward-code",t)}catch(t){console.error("Error setting winning prize:",t)}}function getSpinXWheelWinningReward(){try{return sessionStorage.getItem("spinx-wheel-reward-code")}catch(t){return console.error("Error getting winning prize:",t),null}}function getSpinXWheelRewardTypeByCode(t){return t&&"string"==typeof t?t.startsWith("SPX-O")?1:t.startsWith("SPX-FS")?2:t.startsWith("SPX-FG")?3:0:0}window.SpinX=window.SpinX||{locale:null,site:null,campaign:null,participant:null,opener:null,wheel:null,popup:null,announcement:null,components:{opener:null,wheel:null,popup:null,form:null,welcomePopup:null,intentPopup:null,announcement:null}},window.SpinX.version="stg-build-219",window.SpinX.isDevelopment=!1,window.SpinX.widgetPath="https://cdn.jsdelivr.net/gh/eplugin-io/spinx"+(window.SpinX.version?"@"+window.SpinX.version:""),window.SpinX.disableAutoTriggerPopupKey="spinx-disabled-auto-trigger-popup";class SpinXAnnouncement extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"}),this.countDownId="spinx-count-down",this.messageItemClass="announcement-item"}connectedCallback(){this.reset()}render(){this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.data.scheduledAt&&"string"==typeof this.data.scheduledAt&&(this.data.scheduledAt=new Date(this.data.scheduledAt)),this.data.launchedAt&&"string"==typeof this.data.launchedAt&&(this.data.launchedAt=new Date(this.data.launchedAt)),this.data.closedAt&&"string"==typeof this.data.closedAt&&(this.data.closedAt=new Date(this.data.closedAt));var n=[],e=window.SpinX?.campaign?.config?.triggers?.encourageUsePrize?.enabled||!1;if("upcoming_event"===this.data.spinState?.state)if(this.data.countDownToLaunch?.enabled&&this.data.countDownToLaunch.content&&this.data.countDownToLaunch.displayHours&&lessThanSpinXHours(this.data.launchedAt,new Date,this.data.countDownToLaunch.displayHours)){let e=()=>(this.data.launchedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=convertSpinXCountDownTime(e()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToLaunch.content.replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(e())}</span>`)}</p>`)}else this.data.upcomingEvent?.enabled&&this.data.upcomingEvent.content&&this.data.upcomingEvent.displayDays&&lessThanSpinXDays(this.data.launchedAt,new Date,this.data.upcomingEvent.displayDays)&&n.push(`<p class="${this.messageItemClass}">${this.data.upcomingEvent.content.replace(/{{TIME}}/g,formatSpinXDateTime(this.data.launchedAt))}</p>`);else if("use_winning_reward"===this.data.spinState?.state&&e&&this.data.spinState?.rewardCode){var e=this.data.spinState.rewardCode,i=getSpinXWheelRewardTypeByCode(e);let t="";t=1===i?window.SpinX?.campaign?.config?.triggers?.encourageUsePrize?.discountMessage||"":2===i?window.SpinX?.campaign?.config?.triggers?.encourageUsePrize?.freeShipMessage||"":window.SpinX?.campaign?.config?.triggers?.encourageUsePrize?.freeGiftMessage||"",n.push(`<p class="${this.messageItemClass}">${t.replace(/{{CODE}}/g,e)}</p>`)}else if("ready_to_spin"===this.data.spinState?.state){i=`<img class="spinx-icon-announcement" src="${getSpinXOpenerIconUrl(this.data.openerIcon?.value)}" />`;if(this.data.countDownToClose?.enabled&&this.data.countDownToClose.content&&this.data.countDownToClose.displayHours&&lessThanSpinXHours(this.data.closedAt,new Date,this.data.countDownToClose.displayHours)){let e=()=>(this.data.closedAt.getTime()-(new Date).getTime())/1e3;setInterval(()=>{var t=this.shadowRoot.getElementById(this.countDownId+"-time");t&&(t.innerText=convertSpinXCountDownTime(e()))},1e3),n.push(`<p class="${this.messageItemClass}" id="${this.countDownId}">${this.data.countDownToClose.content.replace(/{{OPENER}}/g,i).replace(/{{TIME}}/g,`<span id="${this.countDownId}-time">${convertSpinXCountDownTime(e())}</span>`)}</p>`)}else this.data.readyToSpin?.enabled&&this.data.readyToSpin.content&&n.push(`<p class="${this.messageItemClass}">${this.data.readyToSpin.content.replace(/{{OPENER}}/g,i)}</p>`)}let o="",a=(n.forEach(t=>{o+=t}),"");n.forEach((t,e)=>{a+=`.spinx-announcement-container .${this.messageItemClass}:nth-child(${e+1}) { animation-delay: ${3*e}s; } `}),this.shadowRoot.innerHTML=`
      <style>
        .spinx-announcement-container {
          opacity: 0;
          padding: 4px;
          transition: opacity 0.5s linear;
          background-color: ${this.data.backgroundColor||"#fdc73b"};
          color: ${this.data.contentColor||"#121212"};
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: 16px;
          letter-spacing: 0.06rem;
          line-height: 1.2em;
          text-align: center;
          width: 100%;
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: fixed;
          z-index: 1000;
          ${"top"===this.data.position?"top: 0;":"bottom: 0;"}
        }

        .spinx-announcement-container .${this.messageItemClass} {
          margin: auto;
          padding-top: 4px;
          padding-bottom: 4px;
          position: absolute;
          width: 80%;
          font-weight: 500;
          font-size: ${(this.data.contentSize||16)/this.rootSize}em;
          ${1<n.length?`opacity: 0; animation: slideUp ${3*n.length}s infinite;`:"opacity: 1; transform: translateY(0%);"}
        }

        .spinx-icon-announcement {
          width: 22px;
          height: 22px;
          position: relative;
          top: 5px;
          margin-top: -10px;
        }

        .close-button {
          color: ${this.data.contentColor||"#121212"};
          position: absolute;
          right: 8px;
          padding: 3px 12px;
          font-size: 22px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        @keyframes slideUp {
          0% {
            transform: translateY(100%);
            opacity: 0;
          }
          10% {
            transform: translateY(0%);
            opacity: 1;
          }
          45% {
            transform: translateY(0%);
            opacity: 1;
          }
          55% {
            transform: translateY(-100%);
            opacity: 0;
          }
          100% {
            transform: translateY(-100%);
            opacity: 0;
          }
        }

        ${a}
      </style>

      <div class="spinx-announcement-container" style="display: none">
        ${o}
        <button class="close-button">&times;</button>
      </div>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.announcementContainer=this.shadowRoot.querySelector(".spinx-announcement-container"),setTimeout(()=>{this.announcementContainer.style.opacity=1},100);this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(t=>{onSpinXElementSizeChange(t,this.resetContainerHeight.bind(this),{initial:!1})});e=sessionStorage.getItem("hide_announcement_"+this.data.spinState?.state);"true"===e?this.hide():this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedAnnouncement",{bubbles:!0,composed:!0}))},10)}show(){this.announcementContainer.style.display="flex",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))},10)}hide(){this.announcementContainer.style.display="none",setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!1}))},10)}reset(){this.updateSpinState(),this.render()}resetContainerHeight(){let e=0;this.shadowRoot.querySelectorAll("."+this.messageItemClass).forEach(t=>{t.offsetHeight>e&&(e=t.offsetHeight)}),this.announcementContainer.style.height=e+"px",this.dispatchEvent(new CustomEvent("onSpinXVisibleAnnouncementChanged",{bubbles:!0,composed:!0,detail:!0}))}getContainerHeight(){return this.announcementContainer?.clientHeight||0}updateSpinState(){window.SpinX.announcement.spinState={state:"scheduled"===window.SpinX.campaign.status?"upcoming_event":"ready_to_spin",rewardCode:""},this.dataset.json=JSON.stringify(window.SpinX.announcement)}close(){this.hide(),sessionStorage.setItem("hide_announcement_"+this.data.spinState?.state,"true")}}customElements.define("spinx-announcement",SpinXAnnouncement);class SpinXOpener extends HTMLElement{data;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily);var t=getSpinXOpenerIconUrl(this.data.icon?.value),e=this.data.backgroundColor||"#1D305D",n=this.data.contentColor||"#ffffff";this.shadowRoot.innerHTML=`
      <style>
        @keyframes rotateIn {
          0% {
            transform: rotate(0deg);
          }
          100% {
            opacity: 1;
            transform: rotate(2880deg);
          }
        }

        @keyframes contentDisplay {
          0% {
            transform: scaleX(0);
          }
          100% {
            transform: scaleX(1);
          }
        }

        .opener-button-container {
          position: ${"preview-in-box"===this.data?.viewMode?"absolute":"fixed"};
          ${"preview-in-box"===this.data?.viewMode?"":"z-index: 1001;"}
          ${"preview-in-box"===this.data?.viewMode?"":`bottom: ${this.data.distance?.bottom?this.data.distance?.bottom+"px":"24px"};`}
          ${"left"===this.data?.position?"preview-in-box"===this.data?.viewMode?"":`left: ${this.data.distance?.left?this.data.distance.left+"px":"20px"};`:`right: ${this.data.distance?.right?this.data.distance.right+"px":"20px"};`}
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        .opener-button-container[data-direction="right"] .opener-text {
          right: 70%;
        }

        .opener-button-container[data-direction="left"] .opener-text {
          left: 70%;
        }

        .opener-button {
          --size: 56px;

          width: var(--size);
          height: var(--size);
          position: relative;
          z-index: 1003;
          border-radius: 50%;
          border: 0px;
          // background-color: transparent;
          background-color: ${e};
          cursor: pointer;
          // box-shadow: 0px 4px 8px transparent;
          transition: transform 0.1s ease;
          animation: rotateIn 1.2s forwards ease;
          opacity: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0;
        }

        .opener-button .icon {
          --size: 48px;
          --deltaX: ${this.data.icon?.deltaX?this.data.icon.deltaX:0}px;
          --deltaY: ${this.data.icon?.deltaY?this.data.icon.deltaY:0}px;

          width: var(--size);
          height: var(--size);
          position: absolute;
          left: 50%;
          top: 50%;
          transform: translate(calc(-50% + var(--deltaX)), calc(-50% + var(--deltaY)));
          pointer-events: none;
        }

        .opener-button:hover {
          box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.4) !important;
          transform: scale(1.05) !important;
        }

        .opener-button:active {
          transform: scale(0.95) !important;
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .opener-text {
          position: absolute;
          z-index: 1002;
          bottom: 4px;
          ${"left"===this.data?.position?"border-radius: 0px 8px 8px 0px;":"border-radius: 8px 0px 0px 8px;"}
          width: auto;
          height: 48px;
          display: flex;
          align-items: center;
          justify-content: center;
          // padding: 0px 0px;
          font-size: 16px;
          font-weight: 600;
          // line-height: 2;
          // letter-spacing: 0.06rem;
          text-transform: uppercase;
          color: ${n};
          background-color: ${e};
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
          white-space: nowrap;
          // opacity: 0;
          transform: scaleX(0);
          transform-origin: ${this.data?.position};
          transition: 0.3s all ease;
          pointer-events: none;
        }

        .opener-text span {
            ${"left"===this.data?.position?"padding: 0px 20px 0px 24px;":"padding: 0px 24px 0px 20px;"}
        }

        @media only screen and (max-width: 600px) {
          .opener-text {
            display: none !important;
            animation: none;
          }

          .opener-button {
            // background-color: transparent;
            background-color: ${this.data.icon?.transparentBackground?"transparent":e};
          }

          .opener-button .icon {
            --size: ${this.data.icon?.transparentBackground?56:48}px;

            width: var(--size);
            height: var(--size);
          }
        }
      </style>

      <div class="opener-button-container" id="opener-button-container" data-direction="${this.data?.position}" style="display: none;">
        <div class="opener-text" id="opener-text"><span>${this.data?.content?this.data.content:"Spin Now"}</span></div>
        <button class="opener-button" id="opener-button">
          <img class="icon" src="${t}" alt="">
        </button>
      </div>
    `,this.openerContainer=this.shadowRoot.getElementById("opener-button-container"),this.openerButton=this.shadowRoot.getElementById("opener-button"),this.openerText=this.shadowRoot.getElementById("opener-text"),this.data?.attentionEffect.enabled?(this.openerButton.style.animation="rotateIn 2s forwards ease",this.openerText.style.animation="contentDisplay 0.8s forwards ease-out 1.2s",setInterval(()=>{this.openerButton.style.animation="none",this.openerButton.style.opacity=1,setTimeout(()=>this.openerButton.style.animation="rotateIn 2s forwards ease",100)},1e3*(this.data?.attentionEffect.intervalTime||10))):(this.openerButton.style.opacity=1,this.openerText.style.transform="scaleX(1)"),this.openerButton.addEventListener("click",()=>this.click()),this.show(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedOpener",{bubbles:!0,composed:!0}))},10)}show(){this.openerContainer.style.display="block"}hide(){this.openerContainer.style.display="none"}click(){this.dispatchEvent(new CustomEvent("onSpinXClickOpener",{bubbles:!0,composed:!0}))}enableOpenerButton(t){this.openerButton.disabled=!t}resetBottomDistance(t){"preview-in-box"!==this.data?.viewMode&&(this.openerContainer.style.bottom=t?t+(this.data.distance?.bottomFromAnnouncement||10)+"px":`${this.data.distance?.bottom||24}px`)}}customElements.define("spinx-opener",SpinXOpener);class SpinXWelcomePopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 40px;
          max-width: 600px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          min-height: 300px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          max-height: 85vh;
          overflow-y: auto;
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

         @media (max-width: 767px) {
          .modal {
            max-width: 600px;
            padding: 10px;
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .modal {
            overflow-y: auto;
            max-height: 80vh;
          }
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||28)/this.rootSize}em;
          font-weight: 600;
          margin-top: 12px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          margin: 16px 0;
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||18)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||18)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
          padding: 10px;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin: 26px 0 12px 0;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 500;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||14)/this.rootSize}em;
          border: 1px solid #ccc;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||14)/this.rootSize}em;
          border: none;
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickWelcomePopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWelcomePopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=getSpinXTriggerKey(t);localStorage.getItem(e)||(t=this.data.delay||10,setTimeout(()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))},1e3*t))}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-welcome-popup",SpinXWelcomePopup);class SpinXIntentPopup extends HTMLElement{data;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t,e;this.data=JSON.parse(this.dataset.json),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        .overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0,0,0,0.5);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        }

        .modal {
          border-radius: 24px;
          padding: 30px 40px;
          max-width: 600px;
          max-height: 85vh;
          overflow-y: auto;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          animation: fadeIn 0.3s ease;
          margin: 0px 20px;
          min-height: 300px;
          text-align: center;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-image: url(${this.data.background?.backgroundImage||""});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        @media (max-width: 767px) {
          .modal {
            max-width: 600px;
            padding: 10px;
            margin: 0px 10px;
            font-size: 13px;
            background-image: url(${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage||""});
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .modal {
            overflow-y: auto;
            max-height: 80vh;
          }
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }

        .modal-title {
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||24)/this.rootSize}em;
          font-weight: 600;
          margin-top: 12px;
          text-align: center;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        .modal-body {
          margin: 16px 0;
          text-align: center;
        }

        .modal-content {
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${(this.data.content?.size||16)/this.rootSize}em;
        }

        .modal-content-bottom {
          line-height: 1.3em;
          color: ${this.data.contentBottom?.color};
          font-size: ${(this.data.contentBottom?.size||16)/this.rootSize}em;
        }

        #spinx-wheel-div {
          width: 66%;
          margin: auto;
          padding: 10px;
        }

        .buttons {
          display: flex;
          justify-content: center;
          gap: 14px;
          margin: 26px 0 12px 0;
        }

        .btn {
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 500;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        .btn-outline {
          background-color: ${this.data.cancelButton?.backgroundColor};
          color: ${this.data.cancelButton?.color};
          font-size: ${(this.data.cancelButton?.size||16)/this.rootSize}em;
          border: 1px solid #ccc;
        }

        .btn-primary {
          background-color: ${this.data.spinButton?.backgroundColor};
          color: ${this.data.spinButton?.color};
          font-size: ${(this.data.spinButton?.size||16)/this.rootSize}em;
          border: none;
        }
      </style>

      <div class="overlay">
        <div class="modal">
          <h2 class="modal-title">
            ${this.data.title.text}
          </h2>
          <div class="modal-body">
            <p class="modal-content">
              ${this.data.content.text}
            </p>
            <div id="spinx-wheel-div"></div>
            <p class="modal-content-bottom">
              ${this.data.contentBottom.text}
            </p>
          </div>
          <div class="buttons">
            <button class="btn btn-outline" id="btnCancel">${this.data.cancelButton.text}</button>
            <button class="btn btn-primary" id="btnSpin">${this.data.spinButton.text}</button>
          </div>
        </div>
      </div>
    `,window.SpinX.wheel&&(t=document.createElement("spinx-wheel"),(e=JSON.parse(JSON.stringify(window.SpinX.wheel))).sticker.hidden=!0,t.dataset.json=JSON.stringify(e),this.shadowRoot.getElementById("spinx-wheel-div")?.replaceChildren(t)),this.shadowRoot.querySelector("#btnCancel").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector("#btnSpin").addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onSpinXClickIntentPopup",{bubbles:!0,composed:!0})),this.close()}),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedIntentPopup",{bubbles:!0,composed:!0}))},10)}registerPopupTrigger(t){let e=getSpinXTriggerKey(t),n=()=>{localStorage.getItem(e)||(this.open(),localStorage.setItem(e,!0))};setTimeout(()=>{var t=localStorage.getItem(e);if(!t&&(this.data.desktop&&768<window.innerWidth&&document.addEventListener("mouseout",function(t){!t.toElement&&!t.relatedTarget&&t.clientY<=10&&n()}),this.data.mobile)&&window.innerWidth<=768){window.addEventListener("popstate",function(t){n(),history.pushState(null,null,location.href)});let e=0;window.addEventListener("scroll",()=>{var t=window.pageYOffset;200<e&&t<30&&n(),e=t}),window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&n()})}},3e3)}open(){this.shadowRoot.querySelector(".overlay").style.display="flex"}close(){this.shadowRoot.querySelector(".overlay").style.display="none"}}customElements.define("spinx-intent-popup",SpinXIntentPopup);class SpinXPopup extends HTMLElement{data;audio;enabledAudio=!1;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t;this.render(),window.addEventListener("resize",this.updateElementSize.bind(this)),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.backgroundMusic?.enabled&&!!this.data?.backgroundMusic?.value,this.enabledAudio&&(t=getSpinXSoundUrl(this.data.backgroundMusic.value),this.audio=new Audio(t),this.audio.loop=!0,this.audio.volume=0)}render(){this.data=JSON.parse(this.dataset.json),this.shadowRoot.innerHTML=`
      <style>
        .popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: #fff;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
          overflow-y: auto;
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1004;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        .popup-overlay.fullscreen.active {
          transform: translateX(0);
        }

        // .popup-overlay.fullscreen .spin-column {
        //   padding: 120px;
        // }

        .close-button {
          color: ${this.data.title?.color||"#000000"};
          position: absolute;
          top: 10px;
          right: 10px;
          padding: 5px 15px;
          font-size: 32px;
          font-weight: bold;
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.3s ease;
        }

        .close-button:hover {
          transform: rotate(90deg);
        }

        .popup-content {
          width: 100%;
          height: 100%;
          border-radius: 8px;
          display: grid;
          align-items: center;
          position: relative;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
        }

        .popup-body {
          width: 100%;
          height: 100%;
          align-items: center;
          justify-content: center;
          text-align: center;
          background-color: ${this.data.background?.backgroundColor||"#ffffff"};
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        .spin-column {
          padding: 0px;
          width: 100%;
          margin: auto;
        }

        .info-column {
          width: 90%;
          flex: 1;
          margin: auto;
        }

        .close-button-landscape {
          display: none;
          z-index: 10000;
          font-size: 30px;
          right: 2px;
          top: 0;
        }

        @media (orientation: portrait) {
          .popup-overlay.active {
            transform: translateX(0);
          }

          .popup-body {
            ${this.data.background?.mobileBackgroundImage||this.data.background?.backgroundImage?`background-image: url(${this.data.background.mobileBackgroundImage||this.data.background?.backgroundImage}); background-color: transparent;`:""}
          }

          .spin-column {
            width: 90%;
          }

          .info-column {
            padding: 20px 10px;
          }
        }

        // @media (max-width: 1366px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 6em;
        //     // padding-bottom: 1.5em;
        //   }
        // }

        @media (max-width: 1024px) and (orientation: portrait) {
          .spin-column {
            padding-top: 5em;
          }
        }

        // @media (max-width: 912px) and (orientation: portrait) {
        //   .spin-column {
        //     padding-top: 4.8em;
        //     // padding-bottom: 1em;
        //   }
        // }

        @media (max-width: 820px) and (orientation: portrait) {
          .spin-column {
            padding-top: 4.5em;
          }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          .spin-column {
            padding-top: 4em;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          .spin-column {
            padding-top: 3em;
          }
        }

        @media (max-width: 344px) and (orientation: portrait) {
          .spin-column {
            padding-top: 2.6em;
          }
        }

        @media (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-28%);
          }

          .popup-body {
            display: flex;
            flex-direction: row;
            ${this.data.background?.backgroundImage?`background-image: url(${this.data.background.backgroundImage});`:""}
          }

          .spin-column {
            flex: 1.4;
            padding-left: 35em;
          }

          .info-column {
            padding: 0 10em 0 10em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            flex: 1;
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 2560px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-26%);
          }

          .spin-column {
            flex: 1.3;
            padding-left: 28em;
          }

          .info-column {
            padding: 0 8em 0 8em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 10em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 15em 0 8em;
          }
        }

        @media (max-width: 1920px) and (orientation: landscape) {
          .spin-column {
            padding-left: 24em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 0 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 6em;
          }
        }

        @media (max-width: 1728px) and (orientation: landscape) {
          .spin-column {
            padding-left: 18em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 2em 0 6em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 8em 0 4em;
          }
        }

        // @media (max-width: 1680px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-30%);
        //   }
        // }

        // @media (max-width: 1536px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-28%);
        //   }
        // }

        // @media (max-width: 1440px) and (orientation: landscape) {
        //   .popup-overlay.active {
        //     transform: translateX(-26%);
        //   }
        // }

        @media (max-width: 1368px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-20%);
          }

          .spin-column {
            padding-left: 3em;
          }

          .info-column {
            padding: 0 4em;
          }

          .popup-overlay.fullscreen.active .spin-column {
            padding: 0 1em 0 3em;
          }

          .popup-overlay.fullscreen.active .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-22%);
          }
        }

        @media (max-width: 1180px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-23%);
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(-24%);
          }

          .info-column {
            padding: 0 3em;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          .popup-overlay.active {
            transform: translateX(0%);
          }

          .spin-column {
            flex: 1;
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }

          .spin-element {
            margin: 0 auto;
          }

          .info-column {
            padding: 0 3em 0 0em;
          }
        }

        @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-column {
            padding: 0 3em;
            position: sticky;
            top: 0;
            margin-top: 0;
          }
          .spin-element {
            margin: 0 auto;
   	      }
        }

        @media (width: 1024px) and (height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .close-button-landscape {
            right: 250px;
          }
        }

        @media (width: 882px) and (height: 344px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
          .spin-element {
            width: 80%;
          }
        }

        // @media (max-width: 932px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: initial;
        //   }
        // }

        // @media (max-width: 1024px) and (max-height: 600px) and (orientation: landscape) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: initial;
        //   }
        // }

        // @media (min-height: 1368px) and (orientation: portrait) and (hover: none) and (pointer: coarse) {
        //   .popup-body {
        //     min-height: 100%;
        //   }
        // }

        // @media (max-width: 882px) and (min-height: 344px) and (orientation: landscape) {
        //   .spin-column {
        //     flex: 1;
        //     padding: 0 3em;
        //   }
        // }

        @media (max-width: 740px) and (orientation: landscape) {
          .spin-column {
            padding: 0 1em;
          }

          .info-column {
            padding: 0 2em 0 1em;
          }
        }

        @media (max-width: 667px) and (orientation: landscape) {
          .spin-column {
            padding: 0 !important;
            transform: translateX(-30%) !important;
          }

          .info-column {
            padding: 0 !important;
            transform: translateX(-15%) !important;
          }
        }
      </style>

      <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content">
          <div class="popup-body">
            <div class="spin-column">
              <div class="spin-element"></div>
            </div>
            <div class="info-column"></div>
          </div>
        </div>
        <button class="close-button close-button-normal">&times;</button>
      </div>
      <button class="close-button close-button-landscape">&times;</button>
    `,this.shadowRoot.querySelector(".close-button").addEventListener("click",()=>this.close()),this.shadowRoot.querySelector(".close-button-landscape").addEventListener("click",()=>this.close()),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedPopup",{bubbles:!0,composed:!0}))},10)}get isOpened(){return this.shadowRoot.getElementById("popup-overlay").classList.contains("active")}enableCloseButton(t){var e=this.shadowRoot.querySelector(".close-button"),n=this.shadowRoot.querySelector(".close-button-landscape");e.disabled=!t,n.disabled=!t}setSpinContent(t){this.shadowRoot.querySelector(".spin-element").replaceChildren(t)}setFormContent(t){this.shadowRoot.querySelector(".info-column").replaceChildren(t)}playAudio(t=1200){this.enabledAudio&&fadeInSpinXAudio(this.audio,t)}stopAudio(t=800){this.enabledAudio&&fadeOutSpinXAudio(this.audio,t)}open(){var t=getSpinXTriggerKey(window.SpinX.campaign.id),t=(localStorage.getItem(t)||localStorage.setItem(t,!0),this.shadowRoot.getElementById("popup-overlay"));t.classList.remove("fullscreen","halfscreen"),t.classList.add("full_screen"===this.data.displayType?"fullscreen":"halfscreen"),t.classList.add("active"),this.updateElementSize(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXOpenedPopup",{bubbles:!0,composed:!0}))},10),this.playAudio()}close(){setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXClosedPopup",{bubbles:!0,composed:!0}))},10),this.shadowRoot.getElementById("popup-overlay").classList.remove("active"),this.stopAudio(),window.SpinX.components.wheel?.stopRewardAudio()}updateElementSize(){var t,e,n=this.shadowRoot.querySelector(".spin-element");n&&(e=window.innerWidth<=932&&window.matchMedia("(orientation: landscape)").matches,t=window.innerWidth<=1024&&window.innerHeight<=600&&window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(hover: none)").matches&&window.matchMedia("(pointer: coarse)").matches,e||t?(e=n.offsetHeight,n.style.marginTop=(window.innerHeight-e)/2+"px",this.forceAlwaysShowScrollbar(!0),this.shadowRoot.querySelector(".close-button-normal").style.display="none",this.shadowRoot.querySelector(".close-button-landscape").style.display="block"):(n.style.marginTop="",this.forceAlwaysShowScrollbar(!1),this.shadowRoot.querySelector(".close-button-normal").style.display="block",this.shadowRoot.querySelector(".close-button-landscape").style.display="none"))}forceAlwaysShowScrollbar(t){var e=this.shadowRoot.querySelector(".popup-overlay");e&&(t?(e.style.overflowY="scroll",e.style.webkitOverflowScrolling="touch",e.style.scrollbarWidth="auto",this._scrollbarStyle||(this._scrollbarStyle=document.createElement("style"),this._scrollbarStyle.textContent=`
          ::-webkit-scrollbar {
            width: 6px;
          }
          ::-webkit-scrollbar-thumb {
            background: #b7b9be;
            border-radius: 2px;
          }
        `,this.shadowRoot.appendChild(this._scrollbarStyle))):(e.style.overflowY="",e.style.webkitOverflowScrolling="",e.style.scrollbarWidth="",this._scrollbarStyle&&(this._scrollbarStyle.remove(),this._scrollbarStyle=null)))}}customElements.define("spinx-popup",SpinXPopup);class SpinXWheel extends HTMLElement{data;spinedRewardIndex=-1;audio;enabledAudio=!1;audioRewards;constructor(){super(),this.attachShadow({mode:"open"}),this.init()}connectedCallback(){var t;this.render(),this.enabledAudio=!!window.SpinX?.widgetPath&&this.data?.playingMusic?.enabled&&!!this.data?.playingMusic?.value,this.enabledAudio&&(t=getSpinXSoundUrl(this.data.playingMusic.value),this.audio=new Audio(t),this.audio.volume=0),this.audioRewards={},this.data.rewards?.forEach(t=>{var e,n={enabledAudio:!1,audio:null};window.SpinX?.widgetPath&&t.config?.effectMusic?.enabled&&t.config?.effectMusic?.value&&(e=getSpinXSoundUrl(t.config.effectMusic.value),n.enabledAudio=!0,n.audio=new Audio(e)),this.audioRewards[t.id]=n})}init(){this.width=this.getAttribute("width")||1e3,this.height=this.getAttribute("height")||1e3,this.defaultSize=42,this.stickerAngle=45,this.angleOffset=0,this.isSpinning=!1,this.isSpinningClass="is-spinning",this.tickerAnim,this.currentSlice=0}render(){this.data=JSON.parse(this.dataset.json),this.rewardAngle=this.data.rewards?.length?360/this.data.rewards?.length:0,this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
        }

        #container {
          width: 100%;
          aspect-ratio: 1 / 1;
          position: relative;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-size: ${this.data.contentSize||this.defaultSize}px;
          overflow: hidden;
        }

        canvas {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }

        .ticker {
          ${this.data.sticker.hidden?"display: none;":""}
          position: absolute;
          width: 7%;
          height: 15%;
          top: 7%;
          right: 8%;
          transform-origin: 50% 30%;
          transform: translate(0, 0) rotate(${this.stickerAngle}deg);
          pointer-events: none;
        }

        .${this.isSpinningClass} .ticker {
          animation: tick 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes tick {
          40% {
            transform: translate(0, 0) rotate(20deg);
          }
        }

        @media (orientation: portrait) {
          #container {
            width: 85%;
          }
        }

        @media (max-width: 667px) and (orientation: portrait) {
          #container {
            width: 90%;
          }
        }
      </style>

      <div id="container"></div>
    `,this.container=this.shadowRoot.getElementById("container"),this.wheel=document.createElement("canvas"),this.wheel.classList.add("wheel"),this.wheel.width=this.width,this.wheel.height=this.height,this.renderWheelCanvas(),this.data.circleCenter?.displayed?(this.circle=document.createElement("canvas"),this.circle.classList.add("circle"),this.circle.width=this.width,this.circle.height=this.height,this.renderCircleCanvas()):this.circle=null;var t=document.createElement("div");t.innerHTML=`
      <svg class="ticker" viewBox="55 0 190 300" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M71.8615 145.363C82.9061 180.684 121.428 288.612 149.699 288.611C177.97 288.611 216.491 180.684 227.536 145.363C247.489 81.5512 222.41 11.0005 149.699 11.0005C76.9872 11.0005 51.9081 81.5512 71.8615 145.363Z" fill="${this.data.sticker?.backgroundColor||"#CCCCCC"}"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="${"line"===this.data.sticker?.borderType?"M67.0663 50.5022C81.3603 22.0419 109.079 2.00046 149.699 2.00046C190.319 2.00046 218.038 22.0419 232.332 50.5022C246.376 78.4655 247.496 114.328 237.019 147.833C231.434 165.693 218.917 201.883 204.161 233.737C196.806 249.614 188.715 264.809 180.451 276.172C176.332 281.836 171.908 286.918 167.203 290.677C162.625 294.334 156.681 297.611 149.699 297.611C142.717 297.611 136.773 294.334 132.195 290.677C127.49 286.919 123.066 281.837 118.947 276.173C110.683 264.81 102.592 249.614 95.2373 233.738C80.4807 201.884 67.9636 165.693 62.3787 147.833C51.9022 114.328 53.0219 78.4655 67.0663 50.5022ZM149.699 288.611C121.428 288.612 82.9063 180.684 71.8617 145.363C51.9083 81.5512 76.9874 11.0005 149.699 11.0005C222.411 11.0005 247.49 81.5512 227.536 145.363C216.492 180.684 177.97 288.611 149.699 288.611Z":""}"  fill="${"line"===this.data.sticker?.borderType&&this.data.sticker.borderColor?this.data.sticker.borderColor:"#CCCCCC"}"/>
      </svg>
    `,this.ticker=t.firstElementChild,this.container.append(this.wheel,this.circle||"",this.ticker),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedWheel",{bubbles:!0,composed:!0}))},10)}darkenHex(t,e){t=parseInt(t.slice(1),16);return"#"+(Math.max(0,(t>>16)-e)<<16|Math.max(0,(t>>8&255)-e)<<8|Math.max(0,(255&t)-e)).toString(16).padStart(6,"0")}drawRewardText(r,d){var t=this.width/2,e=t-48;let p=.45*t;var n=this.data.contentSize||this.defaultSize||32;let i=n;var o=t=>{r.font=`bold ${t}px "${this.data.fontFamily}"`;t=d.replace(/\n+/g," \n ").split(" ");let e=[],n="";var i,o=()=>{n.trim()&&(e.push(n.trim()),n="")};for(i of t)if("\n"===i)o();else if(r.measureText(i).width>p){let t="";for(var a of i)r.measureText(t+a).width>p?t&&(e.push(t),t=a):t+=a;t&&(s=(n+" "+t).trim(),n=r.measureText(s).width<=p?s:(o(),t))}else{var s=(n+" "+i).trim();n=r.measureText(s).width<=p?s:(o(),i)}return o(),e};let a=o(i);for(;4<a.length&&i>Math.max(10,n-8);)--i,a=o(i);r.textAlign="right",r.textBaseline="middle",r.font=`bold ${i}px "${this.data.fontFamily}"`;var s=Math.round(1.15*i),l=Math.min(a.length,4),c=-(l-1)*s/2;for(let t=0;t<l;t++)r.fillText(a[t],e,c+t*s)}renderWheelCanvas(){let i=this.wheel.getContext("2d"),o=this.width/2;if(i.clearRect(0,0,this.width,this.height),"line"===this.data.borderAround?.type&&(i.beginPath(),i.arc(o,o,o-10,0,2*Math.PI),i.lineWidth=10,i.strokeStyle=this.data.borderAround.color||"#CCCCCC",i.stroke()),this.data.rewards?.length){let n=2*Math.PI/this.data.rewards.length;this.data.rewards?.forEach((t,e)=>{"auto_darken"===this.data.borderAround?.type&&(i.beginPath(),i.moveTo(o,o),i.arc(o,o,o,n*e+this.angleOffset,n*(e+1)+this.angleOffset),i.closePath(),i.fillStyle=this.darkenHex(t.config?.backgroundColor,20),i.fill()),i.beginPath(),i.moveTo(o,o),i.arc(o,o,o-13,n*e+this.angleOffset,n*(e+1)+this.angleOffset),i.closePath(),i.fillStyle=t.config?.backgroundColor,i.fill(),this.data.rewardBorder?.displayed&&(i.strokeStyle=this.data.rewardBorder.color,i.lineWidth=2,i.stroke()),i.save(),i.translate(o,o),i.rotate(n*e+n/2+this.angleOffset),i.textAlign="right",i.fillStyle=t.config?.contentColor||"#000000",i.font=`bold ${this.data.contentSize||this.defaultSize}px "${this.data.fontFamily}"`,this.drawRewardText(i,t.name),i.restore()})}else{var t=2*Math.PI;i.beginPath(),i.moveTo(o,o),i.arc(o,o,o-13,this.angleOffset,t+this.angleOffset),i.closePath(),i.fillStyle="#CCCCCC",i.fill()}this.wheel.style.transform="rotate(0deg)",this.wheel.style.transition="transform 15s cubic-bezier(0.20, 0.1, 0.20, 1)",this.wheel.addEventListener("transitionend",this.onTransitionend.bind(this))}renderCircleCanvas(){var t=this.circle.getContext("2d"),e=this.width/2;t.clearRect(0,0,this.width,this.height),t.beginPath(),t.arc(e,e,e/6,0,2*Math.PI),t.fillStyle=this.data.circleCenter?.backgroundColor||"#CCCCCC",t.fill(),"line"===this.data.circleCenter?.borderType&&(t.lineWidth=5,t.strokeStyle=this.data.circleCenter.borderColor||"#CCCCCC",t.stroke())}playAudio(t=200){this.enabledAudio&&fadeInSpinXAudio(this.audio,t)}stopAudio(t=200){this.enabledAudio&&fadeOutSpinXAudio(this.audio,t)}playRewardAudio(t=200){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeInSpinXAudio(e.audio,t)}stopRewardAudio(t=800){var e;this.data?.rewards?.length&&this.audioRewards&&-1!==this.spinedRewardIndex&&(e=this.audioRewards[this.data.rewards[this.spinedRewardIndex].id])?.enabledAudio&&fadeOutSpinXAudio(e.audio,t)}spin(e){if(e&&!this.isSpinning&&(this.isSpinning=!0,this.spinedRewardIndex=this.data.rewards.findIndex(t=>t.id===e),-1!==this.spinedRewardIndex)){this.playAudio(),this.dispatchEvent(new CustomEvent("onSpinXStartSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.container.classList.add(this.isSpinningClass),this.ticker.style.animation="none",this.runTickerAnimation();var n=this.spinedRewardIndex*this.rewardAngle,i=(this.spinedRewardIndex+1)*this.rewardAngle;let t=Math.round(Math.random()*(i-n)+n);0!==t&&t%this.rewardAngle!=0||t--;i=3600-t-this.stickerAngle;this.wheel.style.transform=`rotate(${i}deg)`}}onTransitionend(){cancelAnimationFrame(this.tickerAnim),this.container.classList.remove(this.isSpinningClass),this.dispatchEvent(new CustomEvent("onSpinXEndSpin",{bubbles:!0,composed:!0,detail:{rewardIndex:this.spinedRewardIndex,reward:this.data.rewards[this.spinedRewardIndex]}})),this.stopAudio(),this.playRewardAudio(),setTimeout(()=>{this.stopRewardAudio()},15e3)}runTickerAnimation=()=>{var t=window.getComputedStyle(this.wheel).transform.split("(")[1].split(")")[0].split(","),e=t[0];let n=Math.atan2(t[1],e);n<0&&(n+=2*Math.PI);t=Math.round(n*(180/Math.PI)),e=Math.floor((t+this.stickerAngle)/this.rewardAngle);this.currentSlice!==e&&(this.ticker.style.animation="none",setTimeout(()=>this.ticker.style.animation=null,10),this.currentSlice=e),this.tickerAnim=requestAnimationFrame(this.runTickerAnimation.bind(this))}}customElements.define("spinx-wheel",SpinXWheel);class SpinXForm extends HTMLElement{data;reward;rewardCode;isLogin=!1;container;logoContainer;spinxForm;formTitle;formContent;formContentAccount;formFields;formError;formAgreementContainer;formAgreement;formSpinButton;spinxResult;resultMessageTitle;resultMessageContent;resultCode;spinxFormFooter;copyButton;copyTooltip;rootSize=16;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.data=JSON.parse(this.dataset.json);var t=this.data.content?.size||24;window.SpinX.participant?.email&&(this.isLogin=!0),this.data.fontFamily&&loadGoogleFont(this.data.fontFamily),this.data.textInput||(this.data.textInput={}),this.data.textInput.color||(this.data.textInput.color="#000000"),this.data.textInput.backgroundColor||(this.data.textInput.backgroundColor="#FFFFFF"),this.data.textInput.placeholderColor||(this.data.textInput.placeholderColor="#757575"),this.shadowRoot.innerHTML=`
      <style>
        #spinx-container {
          text-align: left;
          padding: 0.5em 0.5em;
          font-size: 16px;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
        }

        #spinx-form, #spinx-result {
          opacity: 0;
          transition: opacity 0.8s ease;
        }

        #spinx-form.show, #spinx-result.show {
          opacity: 1;
        }

        #spinx-form.hidden, #spinx-result.hidden {
          display: none;
        }

        #spinx-logo-container {
          margin-bottom: 1em;
        }

        #spinx-logo-container img {
          height: 8em;
        }

        #spinx-form-title {
          margin: 0;
          margin-bottom: 0.5em;
          line-height: 1.3em;
          color: ${this.data.title?.color};
          font-size: ${(this.data.title?.size||36)/this.rootSize}em;
          font-weight: 600;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-form-content {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.content?.color};
          font-size: ${t/this.rootSize}em;
        }

        #spinx-form-content-account {
          margin: 0.5em 0 1em 0;
          line-height: 1.3em;
          color: ${this.data.contentForExistingAccount?.color};
          font-size: ${(this.data.contentForExistingAccount?.size||24)/this.rootSize}em;
        }

        #spinx-form-fields {
          margin-bottom: 1em;
        }

        #spinx-form-fields p {
          margin: 0;
        }

        #spinx-form-fields input[type="text"], #spinx-form-fields input[type="email"] {
          width: 100%;
          padding: ${10/this.rootSize}em;
          margin: 8px 0;
          box-sizing: border-box;
          line-height: 1.3em;
          font-size: ${t/(this.rootSize+4)}em;
        }

        #spinx-form-fields input[type="text"].error, #spinx-form-fields input[type="email"].error {
          border: 2px red solid;
        }

        .spinx-form-field-item {
          background-color: ${this.data.textInput?.backgroundColor};
          color: ${this.data.textInput?.color};
          outline: none;
          box-shadow: none;
          border: 0;
        }

        /* Chrome, Safari, Edge */
        .spinx-form-field-item::-webkit-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Firefox 19+ */
        .spinx-form-field-item::-moz-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* IE 10-11 */
        .spinx-form-field-item:-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }
        /* Microsoft Edge Legacy */
        .spinx-form-field-item::-ms-input-placeholder {
          color: ${this.data.textInput?.placeholderColor};
        }

        #spinx-form-error {
          display: none;
          opacity: 0;
          transition: opacity 0.5s ease;
          margin: 0.5em 0 1.5em 0;
          color: red;
          background-color: white;
        }

        #spinx-form-error.show {
          display: block;
          opacity: 1;
          padding: 8px 12px;
        }

        #spinx-form-agreement-container {
          color: ${this.data.content?.color};
          font-size: 16px;
        }

        #spinx-form-agreement {
          line-height: 1.3em;
          width: ${t/(1.3*this.rootSize)}em;
          height: ${t/(1.3*this.rootSize)}em;
          position: relative;
          top: 0.1em;
          cursor: pointer;
        }

        #spinx-form-agreement-container label {
          line-height: 1.4em;
          font-size: ${t/(1.3*this.rootSize)}em;
          cursor: pointer;
        }

        // #spinx-form-agreement-container label.error {
        //   color: red;
        // }

        .flash {
          color: red;
          transition: color 0.25s ease-in-out;
        }

        #spinx-form-spin-button {
          width: 100%;
          color: ${this.data.spinButton?.color};
          background-color: ${this.data.spinButton?.backgroundColor};
          font-size: ${(this.data.spinButton?.size||24)/this.rootSize}em;
          font-family: '${this.data.fontFamily}', Arial, sans-serif;
          font-weight: 500;
          padding: 12px 16px;
          border: none;
          text-decoration: none;
          cursor: pointer;
        }

        // #spinx-form-spin-button:hover {
        //   color: ${this.data.spinButton?.backgroundColor};
        //   background-color: ${this.data.spinButton?.color};
        // }

        #spinx-form-spin-button[disabled="true"] {
          color: ${this.data.spinButton?.color} !important;
          background-color: #808080 !important;
          cursor: not-allowed !important;
        }

        #spinx-result-message-title {
          margin: 0;
          margin-bottom: 5px;
          font-weight: 600;
          line-height: 1.3em;
          text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }

        #spinx-result-message-content {
          margin: 0.5em 0 1.5em 0;
          line-height: 1.3em;
        }

        #spinx-result-code input[type="text"] {
          font-size: ${t/this.rootSize}em;
          width: 100%;
          text-align: center;
          padding: 12px 40px 12px 12px;
          margin: 8px 0;
          font-weight: 600;
          letter-spacing: 2px;
          box-sizing: border-box;
        }

        #spinx-form-footer {
          margin: 25px 0;
          text-align: center;
          color: ${this.data.footerContent?.color};
          font-size: ${(this.data.footerContent?.size||24)/this.rootSize}em;
        }

        #spinx-result-code {
          position: relative;
        }

        #copy-btn {
          cursor: pointer;
          position: absolute;
          right: 4px;
          top: 50%;
          transform: translateY(-50%);
          padding: 8px 10px 0px 10px;
          font-size: 18px;
          user-select: none;
        }

        #copy-tooltip {
          position: absolute;
          top: -25px;
          right: 10px;
          background-color: #4CAF50;
          color: white;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          opacity: 0;
          transition: opacity 0.3s ease;
          pointer-events: none;
        }

        @media (orientation: portrait) {
          #spinx-container {
            text-align: center;
          }
        }

        @media (max-width: 1024px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 11em;
          }

          #spinx-container {
            padding: 0 3.5em;
          }
        }

        @media (max-width: 912px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 10em;
          }

          #spinx-container {
            padding: 0 3em;
          }
        }

        @media (max-width: 820px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 9em;
          }

          #spinx-container {
            padding: 0 2.5em;
          }
        }

        @media (max-width: 768px) and (orientation: portrait) {
          #spinx-logo-container img {
            height: 8em;
          }

          #spinx-container {
            padding: 0 2em;
          }
        }

        // @media (max-width: 600px) and (orientation: portrait) {
        //   #spinx-container {
        //     padding: 10px 0px;
        //   }

        //   #spinx-logo-container img {
        //     margin-bottom: 0px;
        //   }
        // }

        @media (max-width: 540px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 1em;
          }
        }

        // @media (max-width: 480px) and (orientation: portrait) {
        //   #spinx-container {
        //     padding: 10px 0px;
        //   }
        // }

        @media (max-width: 430px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 0.6em;
          }

          #spinx-form-content, #spinx-form-content-account {
            margin: 0.5em 0 0.8em 0;
          }

          #spinx-form-fields {
            margin-bottom: 0px;
          }

          #spinx-form-agreement-container {
            // line-height: 1em;
            font-size: 12px;
          }

          #spinx-form-agreement {
            line-height: 1.3em;
            // top: 0.1em;
          }
        }

        // @media (max-width: 390px) and (orientation: portrait) {
        //   #spinx-logo-container img {
        //     height: 5.5em;
        //   }
        // }

        @media (max-width: 375px) and (orientation: portrait) {
          #spinx-container {
            padding: 0 0.5em;
          }
        }

        @media (max-width: 1280px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 932px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
          }
        }

        @media (max-width: 740px) and (orientation: landscape) {
          #spinx-container {
            padding: 10px 0px;
            font-size: 13px;
          }
        }
      </style>

      <div id="spinx-container">
        <div id="spinx-logo-container"></div>
        <div id="spinx-form">
          <p id="spinx-form-title"></p>
          <p id="spinx-form-content"></p>
          <p id="spinx-form-content-account"></p>
          <div id="spinx-form-fields"></div>
          <p id="spinx-form-error"></p>
          <p id="spinx-form-agreement-container">
            <input type="checkbox" id="spinx-form-agreement" name="agreement" value="true">
            <label for="spinx-form-agreement"></label>
          </p>
          <button id="spinx-form-spin-button"></button>
          <p id="spinx-form-footer"></p>
        </div>
        <div id="spinx-result">
          <p id="spinx-result-message-title"></p>
          <p id="spinx-result-message-content"></p>
          <p id="spinx-result-code">
            <input name="reward-code" type="text" value="" readonly="true" />
            <span id="copy-btn" title="Copy to clipboard">
              <svg width="36" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M589.3 260.9v30H371.4v-30H268.9v513h117.2v-304l109.7-99.1h202.1V260.9z" fill="#E1F0FF"></path>
                  <path d="M516.1 371.1l-122.9 99.8v346.8h370.4V371.1z" fill="#E1F0FF"></path>
                  <path d="M752.7 370.8h21.8v435.8h-21.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h277.3v21.8H495.8z" fill="#446EB1"></path>
                  <path d="M495.8 370.8h21.8v124.3h-21.8z" fill="#446EB1"></path>
                  <path d="M397.7 488.7l-15.4-15.4 113.5-102.5 15.4 15.4z" fill="#446EB1"></path>
                  <path d="M382.3 473.3h135.3v21.8H382.3z" fill="#446EB1"></path>
                  <path d="M382.3 479.7h21.8v348.6h-21.8zM404.1 806.6h370.4v21.8H404.1z" fill="#446EB1"></path>
                  <path d="M447.7 545.1h261.5v21.8H447.7zM447.7 610.5h261.5v21.8H447.7zM447.7 675.8h261.5v21.8H447.7z" fill="#6D9EE8"></path>
                  <path d="M251.6 763h130.7v21.8H251.6z" fill="#446EB1"></path>
                  <path d="M251.6 240.1h21.8v544.7h-21.8zM687.3 240.1h21.8v130.7h-21.8zM273.4 240.1h108.9v21.8H273.4z" fill="#446EB1"></path>
                  <path d="M578.4 240.1h130.7v21.8H578.4zM360.5 196.5h21.8v108.9h-21.8zM382.3 283.7h196.1v21.8H382.3zM534.8 196.5h65.4v21.8h-65.4z" fill="#446EB1"></path>
                  <path d="M360.5 196.5h65.4v21.8h-65.4zM404.1 174.7h152.5v21.8H404.1zM578.4 196.5h21.8v108.9h-21.8z" fill="#446EB1"></path>
                </g>
              </svg>
            </span>
            <span id="copy-tooltip">Copied!</span>
          </p>
        </div>
      </div>

      <style>
        ${this.data.styleContent}
      </style>
    `,this.container=this.shadowRoot.getElementById("spinx-container"),this.logoContainer=this.shadowRoot.getElementById("spinx-logo-container"),this.spinxForm=this.shadowRoot.getElementById("spinx-form"),this.formTitle=this.shadowRoot.getElementById("spinx-form-title"),this.formContent=this.shadowRoot.getElementById("spinx-form-content"),this.formContentAccount=this.shadowRoot.getElementById("spinx-form-content-account"),this.formFields=this.shadowRoot.getElementById("spinx-form-fields"),this.formError=this.shadowRoot.getElementById("spinx-form-error"),this.formAgreementContainer=this.shadowRoot.getElementById("spinx-form-agreement-container"),this.formAgreement=this.shadowRoot.getElementById("spinx-form-agreement"),this.formAgreementLabel=this.formAgreementContainer.getElementsByTagName("label")[0],this.formSpinButton=this.shadowRoot.getElementById("spinx-form-spin-button"),this.spinxResult=this.shadowRoot.getElementById("spinx-result"),this.resultMessageTitle=this.shadowRoot.getElementById("spinx-result-message-title"),this.resultMessageContent=this.shadowRoot.getElementById("spinx-result-message-content"),this.resultCode=this.shadowRoot.getElementById("spinx-result-code"),this.resultCodeInput=this.resultCode.getElementsByTagName("input")[0],this.spinxFormFooter=this.shadowRoot.getElementById("spinx-form-footer"),this.copyButton=this.shadowRoot.getElementById("copy-btn"),this.copyTooltip=this.shadowRoot.getElementById("copy-tooltip"),this.generateContents(),setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXLoadedForm",{bubbles:!0,composed:!0}))},10)}showSpinXForm(t=!0){t?(this.spinxForm.classList.remove("hidden"),this.spinxResult.classList.add("hidden"),this.spinxResult.classList.remove("show"),setTimeout(()=>this.spinxForm.classList.add("show"),10)):(this.spinxForm.classList.add("hidden"),this.spinxResult.classList.remove("hidden"),this.spinxForm.classList.remove("show"),setTimeout(()=>this.spinxResult.classList.add("show"),10))}generateMinAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.min?"number"===t.type?`min="${t.min}"`:`minLength="${t.min}"`:""}generateMaxAttribute(t){return t&&["text","email","number"].includes(t.type)&&null!=t.max?"number"===t.type?`max="${t.max}"`:`maxLength="${t.max}"`:""}generateFields(){let e="";return this.reward||this.data.fields?.forEach(t=>{e+=`<p><input id="spinx-form-${t.name}" class="spinx-form-field-item" name="${t.name}" autocomplete="${t.name}" placeholder="${t.placeholder||t.label}" type="${t.type}" required="${t.required}" ${this.generateMinAttribute(t)} ${this.generateMaxAttribute(t)} /></p>`}),e}generateContents(){this.data.showLogo?.enabled&&window.SpinX.site?.config?.logo?.url&&(this.logoContainer.style.display="block",this.logoContainer.innerHTML=`<img src="${window.SpinX.site.config.logo.url}" alt="${window.SpinX.site.name}">`),this.reward?(this.showSpinXForm(!1),this.resultMessageTitle.innerText=this.reward.config?.message?.title?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageContent.innerText=this.reward.config?.message?.content?.text?.replace(/{{REWARD}}/g,this.reward.name)||"",this.resultMessageTitle.style.color=this.reward.config?.message?.title?.color,this.resultMessageTitle.style.fontSize=this.reward.config?.message?.title?.size/this.rootSize+"em",this.resultMessageContent.style.color=this.reward.config?.message?.content?.color,this.resultMessageContent.style.fontSize=this.reward.config?.message?.content?.size/this.rootSize+"em","none"!==this.reward.type?this.resultCodeInput.value=this.rewardCode:(this.resultCodeInput.style.display="none",this.copyButton.style.display="none",this.copyTooltip.style.display="none")):(this.showSpinXForm(),this.formTitle.innerText=this.data.title?.text||"",this.isLogin?(this.formContent.style.display="none",this.formFields.style.display="none",this.formContentAccount.style.display="block",this.formContentAccount.innerHTML=escapeHtml(this.data.contentForExistingAccount?.text||"").replace(/{{NAME}}/g,`<b>${getSpinXParticipantName(window.SpinX.participant)||"Unknown"}</b>`)||""):(this.formContent.style.display="block",this.formFields.style.display="block",this.formContentAccount.style.display="none",this.formContent.innerText=this.data.content?.text||"",this.formFields.innerHTML=this.generateFields()),this.formAgreementLabel.innerText=this.data.agreement,this.formSpinButton.innerText=this.data.spinButton?.text||"",this.spinxFormFooter.innerText=this.data.footerContent?.text||"",this.registerEvents())}handleCopyCode(){this.copyButton.addEventListener("click",()=>{var t=this.resultCodeInput;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value).then(()=>{let t=this.copyTooltip;t.style.opacity=1,setTimeout(()=>{t.style.opacity=0},2e3)})})}enableFormInputs(e){this.isLogin||this.data.fields.forEach(t=>{t=this.shadowRoot.getElementById("spinx-form-"+t.name);e?t.removeAttribute("readonly"):t.setAttribute("readonly",!0)}),e?(this.formAgreement.removeAttribute("disabled"),this.formSpinButton.removeAttribute("disabled")):(this.formAgreement.setAttribute("disabled",!0),this.formSpinButton.setAttribute("disabled",!0))}registerEvents(){this.isLogin||this.data.fields?.forEach(t=>{let e=this.shadowRoot.getElementById("spinx-form-"+t.name);e.addEventListener("change",()=>{t.value=e.value,["text","email"].includes(t.type)&&t.max&&t.value.length>t.max&&(t.value=t.value.substring(0,t.max))})}),this.formSpinButton.addEventListener("click",()=>{if(this.validateForm())if(this.formAgreement.checked){let t={};var e,n,i;this.isLogin?t={...window.SpinX.participant}:"first-name_last-name_email"===this.data.formTemplate?(n=this.shadowRoot.getElementById("spinx-form-first-name"),i=this.shadowRoot.getElementById("spinx-form-last-name"),e=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName=i.value,t.email=e.value):(n=this.shadowRoot.getElementById("spinx-form-name"),i=this.shadowRoot.getElementById("spinx-form-email"),t.firstName=n.value,t.lastName="",t.email=i.value),t.locale=window.SpinX.locale,setTimeout(()=>{this.dispatchEvent(new CustomEvent("onSpinXSpin",{bubbles:!0,composed:!0,detail:t}))},10)}else this.formAgreementLabel.classList.add("flash"),setTimeout(()=>{this.formAgreementLabel.classList.remove("flash")},400)})}validateField(t){this.formError.classList.remove("show");let e=!(this.formError.innerText="");var n=this.shadowRoot.getElementById("spinx-form-"+t.name);return n.classList.remove("error"),"name"===t.name?t.required&&!t.value&&(e=!1,this.formError.innerText=t.messages?.required||""):"email"===t.name&&(t.required&&!t.value?(e=!1,this.formError.innerText=t.messages?.required||""):/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.value)||(e=!1,this.formError.innerText=t.messages?.type||"")),this.formError.innerText&&(this.formError.classList.add("show"),n.classList.add("error")),e}validateForm(){let e=!0;if(!this.isLogin&&this.data.fields?.length)for(let t=0;t<this.data.fields.length;t++){var n=this.data.fields[t];if(!(e=this.validateField(n)))break}return e}showError(t){this.formError.innerText="",this.formError.classList.remove("show"),t&&(this.formError.innerText=t,this.formError.classList.add("show"))}showReward(t,e){this.reward=t,this.rewardCode=e,this.generateContents(),this.handleCopyCode()}}async function initSpinXApp(o,a){if(removeSpinXWelcomePopup(),removeSpinXIntentPopup(),removeSpinXPopup(),removeSpinXOpener(),removeSpinXAnnouncement(),!checkSpinXAppHidden(o?.config?.excludeUrls||[])&&["scheduled","launching"].includes(o?.status)){var e,n=await readSpinXJson(getSpinXThemeDataUrl(o.config?.theme?.value));if(checkSpinXAnnouncementBarEnable(o)&&(window.SpinX.announcement=combineSpinXAnnouncementData(o,n)),"launching"===o?.status){window.SpinX.popup=combineSpinXPopupData(o,n),window.SpinX.wheel=combineSpinXWheelData(o,n),checkSpinXOpenerEnable(o)&&(window.SpinX.opener=combineSpinXOpenerData(o,n));let t=initSpinXPopup(window.SpinX.popup,t=>{let i;var e=initSpinXWheel(window.SpinX.wheel,t=>{window.SpinX.components.opener?.enableOpenerButton(!1),window.SpinX.components.popup.enableCloseButton(!1),window.SpinX.components.popup.stopAudio(200)},t=>{window.SpinX.components.popup.enableCloseButton(!0),window.SpinX.components.opener?.enableOpenerButton(!0),t.detail.reward&&(window.SpinX.components.form.showReward(t.detail.reward,i),checkSpinXAnnouncementBarEnable(o))&&window.SpinX.components.announcement.reset(),setTimeout(()=>{document.querySelector("spinx-popup").shadowRoot.querySelector(".popup-overlay").scrollTo({top:0,behavior:"smooth"})},500)}),e=(window.SpinX.components.wheel=e,t.setSpinContent(e),initSpinXForm(window.SpinX.popup,async t=>{t=t.detail;if(window.SpinX.components.form.enableFormInputs(!1),window.SpinX.isDevelopment){i="SPINX_CODE_DEMO";var e=Math.floor(Math.random()*window.SpinX.wheel.rewards.length),e=window.SpinX.wheel.rewards[e];setSpinXWheelWinningReward(i),window.SpinX.components.wheel.spin(e.id)}else if("function"==typeof a?.spin){window.SpinX.components.form.showError();try{var n=await a.spin(o.id,t);if(!n?.rewardId)throw new Error("Sorry, something went wrong. Please try it again!");(i=n.rewardCode)&&setSpinXWheelWinningReward(i),window.SpinX.components.wheel.spin(n.rewardId)}catch(t){window.SpinX.components.form.showError(t.message),window.SpinX.components.form.enableFormInputs(!0)}}}));window.SpinX.components.form=e,t.setFormContent(e)},t=>{var e;"function"!=typeof a?.view||(e=getSpinXViewTrackingKey(o.id),(e=localStorage.getItem(e))&&Date.now()-parseInt(e)<3e5)||(a.view(o.id,{pageTemplate:window.SpinX.pageTemplate,urlPath:location.pathname,email:window.SpinX.participant?.email||null}),localStorage.setItem(getSpinXTriggerKey(o.id),!0),localStorage.setItem(getSpinXViewTrackingKey(o.id),Date.now()))});window.SpinX.components.popup=t,checkSpinXOpenerEnable(o)&&(e=initSpinXOpener(window.SpinX.opener,void 0,()=>{t&&(t.isOpened?t.close():t.open())}),window.SpinX.components.opener=e),checkSpinXWelcomePopupEnable(o)&&(window.SpinX.delayedDisplay=combineDelayedDisplayData(o,n),e=initSpinXWelcomePopup(window.SpinX.delayedDisplay,t=>{t.registerPopupTrigger(o.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.welcomePopup=e),checkSpinXIntentPopupEnable(o)&&(window.SpinX.exitIntent=combineExitIntentData(o,n),e=initSpinXIntentPopup(window.SpinX.exitIntent,t=>{t.registerPopupTrigger(o.id)},()=>{!t||t.isOpened||t.open()}),window.SpinX.components.intentPopup=e)}if(checkSpinXAnnouncementBarEnable(o)){let e=initSpinXAnnouncement(window.SpinX.announcement,void 0,t=>{checkSpinXOpenerEnable(o)&&(t.detail&&"bottom"===window.SpinX.announcement.position?(t=e.getContainerHeight(),window.SpinX.components.opener?.resetBottomDistance(t)):window.SpinX.components.opener?.resetBottomDistance(0))});window.SpinX.components.announcement=e}}}customElements.define("spinx-form",SpinXForm);